# Contributor: Michael Mason <ms13sp@gmail.com>
# Maintainer: Michael Mason <ms13sp@gmail.com>
pkgname=postgrey
pkgver=1.32
pkgrel=0
pkgdesc="Postfix policy server implementing greylisting"
url="http://postgrey.schweikert.ch/"
license="GPL"
depends="perl perl-db perl-net-dns perl-net-server"
makedepends=""
install=
subpackages=""
source="http://postgrey.schweikert.ch/pub/$pkgname-$pkgver.tar.gz
	postgrey.confd
	postgrey.initd
	postgrey.pre-install"
#still need PERL-IO Multiplex and PERL-PARSE-SYSLOG and NET-RBLClient
build() {
	cd "$srcdir"/$pkgname-$pkgver
	
	install -m755 -D $pkgname  "$pkgdir"/usr/sbin/$pkgname
	mkdir -p "$pkgdir"/var/spool/postfix/$pkgname
	chown postgrey:postgrey "$pkgdir"/var/spool/postfix/$pkgname
	chmod 770 "$pkgdir"/var/spool/postfix/$pkgname
	install -m755 -D contrib/postgreyreport "$pkgdir"/usr/bin/postgreyreport
	install -m755 -D "$srcdir"/$pkgname.initd "$pkgdir"/etc/init.d/$pkgname
	install -m644 -D postgrey_whitelist_clients "$pkgdir"/etc/postfix/postgrey_whitelist_clients
	install -m644 -D postgrey_whitelist_recipients "$pkgdir"/etc/postfix/postgrey_whitelist_recipients
	install -m644 -D "$srcdir"/$pkgname.confd "$pkgdir"/etc/conf.d/$pkgname
}

md5sums="524a4e165bf997996f3bccade394712f  postgrey-1.32.tar.gz
caaad5770ab07fb5af3bbd522a05b84f  postgrey.confd
3bf81886c02d2879c1310bf1027e9c07  postgrey.initd
4231489e2cfbbb4b0a354826cbe40695  postgrey.pre-install"

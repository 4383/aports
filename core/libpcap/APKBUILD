# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=libpcap
pkgver=1.0.0
pkgrel=1
pkgdesc="A system-independent interface for user-level packet capture"
url="http://www.tcpdump.org/"
license="BSD"
depends="uclibc"
makedepends="bison flex"
source="http://www.tcpdump.org/release/$pkgname-$pkgver.tar.gz
	$pkgname-1.0.0-LDFLAGS.patch
	$pkgname-any.patch"
subpackages="$pkgname-doc $pkgname-dev"

build () 
{ 
	cd ${startdir}/src/${pkgname}-${pkgver}
	for i in ../*.patch; do
		msg "Applying $i..."
		patch -p1 -i $i || return 1
	done

	./configure --prefix=/usr --enable-ipv6

	make all shared || return 1
	mkdir -p "$pkgdir/usr/bin"
	make -j1 DESTDIR="$pkgdir" install install-shared

#	mkdir -p ${startdir}/pkg/usr/include/net
#	cd ${startdir}/pkg/usr/include/net
#	ln -s ../pcap-bpf.h bpf.h
}
md5sums="9ad1358c5dec48456405eac197a46d3d  libpcap-1.0.0.tar.gz
2bf7e986980c6e5d99758ba55b48d706  libpcap-1.0.0-LDFLAGS.patch
1e6b01c4f283b497e81e137c3f35e744  libpcap-any.patch"

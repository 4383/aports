#!/bin/sh
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=e2fsprogs-libs
pkgver=1.41.3
pkgrel=0
pkgdesc="e2fsprogs libraries (common error, subsystem, uuid, block id)"
url="http://e2fsprogs.sourceforge.net/"
license='GPL-2'
depends="uclibc"
source="http://downloads.sourceforge.net/e2fsprogs/$pkgname-$pkgver.tar.gz"
subpackages="$pkgname-dev $pkgname-doc libuuid com_err"

build() {
	cd "$srcdir/$pkgname-$pkgver"

	./configure --prefix=/usr \
		--mandir=/usr/share/man \
		--enable-elf-shlibs \
		--disable-tls \
		--disable-nls

	make || return 1
	make DESTDIR="$pkgdir/" install
}

libuuid() {
	mkdir -p "$subpkgdir"/usr/lib
	mv "$pkgdir"/usr/lib/libuuid* "$subpkgdir"/usr/lib/
}

com_err() {
	mkdir -p "$subpkgdir"/usr/lib
	mv "$pkgdir"/usr/lib/libcom_err* "$subpkgdir"/usr/lib/
}

md5sums="32d33d30e1fac5b8de67c562cec23630  e2fsprogs-libs-1.41.3.tar.gz"

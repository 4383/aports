# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=git
pkgver=1.6.2.4
pkgrel=0
pkgdesc="GIT - the stupid content tracker"
url="http://git.or.cz/"
license="GPL2"
depends="zlib openssl curl expat"
makedepends="zlib-dev openssl-dev curl-dev expat-dev"
source="http://kernel.org/pub/software/scm/git/git-$pkgver.tar.bz2
	git-1.6.0.4-noperl.patch
	bb-tar.patch
	"

build () {
	local makeopts="NO_ICONV=YesPlease 
			NO_TCLTK=YesPlease 
			NO_PERL=YesPlease 
			NO_SVN_TESTS=YesPlease"

	cd $srcdir/$pkgname-$pkgver
	patch -p1 < ../git-1.6.0.4-noperl.patch || return 1
	patch -p1 < ../bb-tar.patch || return 1

	make prefix=/usr DESTDIR="$pkgdir" $makeopts || return 1
	make prefix=/usr DESTDIR="$pkgdir" $makeopts install
}

md5sums="c24d796879bb09e1cc5545bf3a3d7cf6  git-1.6.2.4.tar.bz2
89fe31c2317c285ed18527a700da7844  git-1.6.0.4-noperl.patch
04e1bdf76a0bac568f8488daad07dce7  bb-tar.patch"

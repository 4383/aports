# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=git
pkgver=1.6.1.3
pkgrel=0
pkgdesc="GIT - the stupid content tracker"
url="http://git.or.cz/"
license="GPL2"
depends="zlib openssl curl expat"
makedepends="zlib-dev openssl-dev curl-dev expat-dev"
source="http://kernel.org/pub/software/scm/git/git-$pkgver.tar.bz2
	git-1.6.0.4-noperl.patch
	bb-tar.patch
	"

build () {
	local makeopts="NO_ICONV=YesPlease 
			NO_TCLTK=YesPlease 
			NO_PERL=YesPlease 
			NO_SVN_TESTS=YesPlease"

	cd $srcdir/$pkgname-$pkgver
	patch -p1 < ../git-1.6.0.4-noperl.patch || return 1
	patch -p1 < ../bb-tar.patch || return 1

	make prefix=/usr DESTDIR="$pkgdir" $makeopts || return 1
	make prefix=/usr DESTDIR="$pkgdir" $makeopts install
	rm -rf "$pkgdir"/usr/libexec
}

md5sums="e31ea5ce9b076f5745056f01465e9602  git-1.6.1.3.tar.bz2
89fe31c2317c285ed18527a700da7844  git-1.6.0.4-noperl.patch
04e1bdf76a0bac568f8488daad07dce7  bb-tar.patch"

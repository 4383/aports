pkgname=openssl
pkgver=0.9.8j
pkgrel=0
pkgdesc="Toolkit for SSL v2/v3 and TLS v1"
url=http://openssl.org
depends="uclibc"
makedepends="perl"
license="openssl"

subpackages="$pkgname-dev $pkgname-doc"

source="http://www.openssl.org/source/${pkgname}-${pkgver}.tar.gz
        http://www.linuxfromscratch.org/patches/blfs/svn/openssl-0.9.8g-fix_manpages-1.patch
	openssl-bb-basename.patch
	"
	
build() {
	cd $startdir/src/$pkgname-$pkgver

	patch -p1 -i ../openssl-0.9.8g-fix_manpages-1.patch  || return 1
	patch -p1 -i ../openssl-bb-basename.patch || return 1
	./config --prefix=/usr --openssldir=/etc/ssl shared

	make -j1 || return 1
	make INSTALL_PREFIX=$startdir/pkg MANDIR=/usr/share/man install
}

md5sums="a5cb5f6c3d11affb387ecf7a997cac0c  openssl-0.9.8j.tar.gz
04a6a88c2ee4badd4f8649792b73eaf3  openssl-0.9.8g-fix_manpages-1.patch
c6a9857a5dbd30cead0404aa7dd73977  openssl-bb-basename.patch"

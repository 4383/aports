pkgname=apk-tools-git
pkgver=2008.12.02
pkgdesc="git version of apk-tools"
url="http://dev.alpinelinux.org/cgit/cgit.cgi/apk-tools"
license=GPL
makedepends="zlib-dev"
subpackages="$pkgname-doc"

_gitname=apk-tools
_gitroot=git://dev.alpinelinux.org/$_gitname

build() {
	
	cd "$srcdir"
	msg "Connecting to GIT server..."

	if [ -d $_gitname ]; then
		cd $_gitname && git pull
	else
		git clone $_gitroot
	fi

	cd $srcdir/$_gitname

	# get commit for given date
	_commit=$(git log --before=$pkgver | head -n 1 | awk '{print $2}')
	git checkout -b $pkgver $_commit || return 1

	make clean
	make STATIC=yes || return 1
	make DESTDIR="$pkgdir" install
}


md5sums="6f78d73e358315bbd2e7c1616db30ed3  apk-tools-no-Werror.patch"

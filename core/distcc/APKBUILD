pkgname=distcc
pkgver=2.18.3
pkgrel=0
pkgdesc="A distributed C, C++, Obj C compiler"
url="http://distcc.samba.org"
license="GPL-2"
depends="popt"
makedepends="popt-dev"
source="http://distcc.samba.org/ftp/distcc/distcc-2.18.3.tar.bz2
	distccd.initd distccd.confd"
subpackages="$pkgname-doc"

build () 
{ 
	cd "$srcdir/$pkgname-$pkgver"
	./configure --prefix=/usr --without-gtk --sysconfdir=/etc

	make || return 1
	make DESTDIR="$pkgdir" install

	install -D -m644 ../distccd.confd "$pkgdir"/etc/conf.d/distccd
	install -D -m755 ../distccd.initd "$pkgdir"/etc/init.d/distccd

	local d="$pkgdir/usr/lib/$pkgname/bin"
	mkdir -p "$d"
	ln -sf /usr/bin/$pkgname "$d"/cc
	ln -sf /usr/bin/$pkgname "$d"/gcc
	ln -sf /usr/bin/$pkgname "$d"/g++
	ln -sf /usr/bin/$pkgname "$d"/cpp
}

md5sums="0d6b80a1efc3a3d816c4f4175f63eaa2  distcc-2.18.3.tar.bz2
5cf566965873279fedc16934a2ba6cd0  distccd.initd
e9e0ccc9f5813b9c3c88c8687b2ebc73  distccd.confd"

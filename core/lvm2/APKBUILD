# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=lvm2
pkgver=2.02.44
pkgrel=1
pkgdesc="Logical Volume Manager 2 utilities"
url="http://sourceware.org/lvm2/"
license="GPL"
depends="uclibc readline"
makedepends="readline-dev"
source="ftp://sources.redhat.com/pub/$pkgname/LVM2.$pkgver.tgz
	lvm.initd
	"
subpackages="$pkgname-dev $pkgname-doc"

build () {
	cd "$srcdir"/LVM2.$pkgver

	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--libdir=/lib \
		--sbindir=/sbin \
		--localstatedir=/var \
		--disable-nls \
		CLDFLAGS="$LDFLAGS" \
		|| return 1

	# TODO: fix parallel builds
	make -j1 || return 1
	make -j1 DESTDIR="$pkgdir" install || return 1

	install -d "$pkgdir"/etc/lvm/archive "$pkgdir"/etc/lvm/backup
	install -Dm755 "$srcdir"/lvm.initd "$pkgdir"/etc/init.d/lvm
}
md5sums="4ed7b99903a6fc5165b7b0b8def42486  LVM2.2.02.44.tgz
e60d88f78eedb9c1252deb5b9b9b978b  lvm.initd"

# This is an example APKBUILD file. Use this as a start to creating your own,
# and remove these comments. 
# NOTE: Please fill out the license field for your package! If it is unknown,
# then please put 'unknown'.

# Contributor: Your Name <youremail@domain.com>
pkgname=uclibc++
pkgver=0.2.2
pkgrel=0
pkgdesc="Embedded C++ library"
url="http://cxx.uclibc.org/"
license='GPL-2'
depends="uclibc"
subpackages="$pkgname-dev"
source="http://cxx.uclibc.org/src/uClibc++-$pkgver.tar.bz2
	associative_base.patch
	uclibc++.patch
	uclibc++config
	"

build() {
	cd "$srcdir/uClibc++-$pkgver"
	cp ../uclibc++config .config
	make oldconfig

	for i in ../*.patch; do
		if ! patch -p1 < $i; then
			error "failed to apply $i"
			return 1
		fi
	done
	sed -i -e 's:bin/bash:bin/sh:' bin/Makefile scripts/find_lib*
	make || return 1
	make DESTDIR="$pkgdir/" install
}

md5sums="" #generate with 'abuild checksum'
md5sums="1ceef3209cca88be8f1bd9de99735954  uClibc++-0.2.2.tar.bz2
3f84b1d45b32585d7050be486e4b20fe  uclibc++config"

# Maintainer: Leonardo Arena <rnalrd@alpinelinux.org>
pkgname=ddrescue
pkgver=1.16
pkgrel=0
pkgdesc="Data recovery tool for block devices with errors"
url="http://www.gnu.org/s/ddrescue/ddrescue.html"
arch="all"
license="GPL3+"
depends=""
depends_dev=""
makedepends="$depends_dev"
install=""
subpackages="$pkgname-doc"
source="http://ftp.gnu.org/gnu/$pkgname/$pkgname-$pkgver.tar.gz"

_builddir="$srcdir"/$pkgname-$pkgver
prepare() {
	cd "$_builddir"
	return 0
}

build() {
	cd "$_builddir"
	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		|| return 1
	make || return 1
	make check || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
}

md5sums="57b67407e882c6418531d48a2f20d16b  ddrescue-1.16.tar.gz"
sha256sums="76b3f2e5fb0306d24f2632c3e168cccb73dc0a348e3a7089cd9230748ff23de6  ddrescue-1.16.tar.gz"
sha512sums="c775ac34701b63ab7efd0a56cecf5c8b198874239e48383142db0ccb83c193c7101335374dc89efaa815b466258181f458a3589ea4abb230804b553fb42b345d  ddrescue-1.16.tar.gz"

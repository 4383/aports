# Contributor: Robert Boisvert <rdbprog@gmail.com>
# Maintainer: Robert Boisvert <rdbprog@gmail.com>
pkgname=lua-sql-odbc
pkgver=2.1.1
lpkgver=2_1_1
pkgrel=1
pkgdesc="ODBC driver for LuaSQL"
url="http://www.keplerproject.org/luasql/"
arch="all"
license="MIT"
depends=""
makedepends="lua-dev unixodbc-dev"
install=
subpackages=
source="https://github.com/keplerproject/luasql/archive/v$lpkgver.tar.gz
	widechars.patch
	config.patch"

build() {
	cd "$srcdir/luasql-$lpkgver"
	make || return 1
}

prepare() {
	cd "$srcdir/luasql-$lpkgver"
	for i in $source; do
		case $i in
		*.patch)
			msg "Applying $i"
			patch -p1 -i "$srcdir"/$i || return 1
			;;
		esac
	done
}

package() {
	cd "$srcdir/luasql-$lpkgver"
	install -D src/odbc.so "$pkgdir"/usr/lib/lua/5.1/luasql/odbc.so
}
md5sums="aa3a5c8503287e8c6b1845c3b796a3b0  v2_1_1.tar.gz
a706dfeb8cdfcca209b90755e8104545  widechars.patch
ebb6b3b612e607503598ce61d107e4de  config.patch"
sha256sums="98a0b970424aded98a2afe086b4727e133d5fe95dba8e32ea9de18849b00e10f  v2_1_1.tar.gz
89aed953834f9b6ed9998baac8454d7761f317d61513b532c17d0262c401a446  widechars.patch
0c402d858d804fed986dc4fd2f0400012ae66ca14496521c1bda67106293292d  config.patch"
sha512sums="377b707ed291867177b5fc2dec2404ad000d004cff0443d9b4128b78c6e45d3c5492875fd6f1ecf037db253631d691c310a6a2220bd0042a0322335fc58d0f4b  v2_1_1.tar.gz
b31fa46b99d06d6069c03679b7cef08412eee6d5e4606b02e02b98cb97e03c0b884d65390c1e80cf5a36fa41b3afba9cbbc441284ec3a1e725e3de7bc824908e  widechars.patch
58dd76b7bca68cd0f8b541e524ebdab7036b4ac6e2bbc1eae0e69cae9ee9fed09ff7d3d839fd1b7e9eee21e22f6d0e4f9d04acf088295f96e15171968d51cee6  config.patch"

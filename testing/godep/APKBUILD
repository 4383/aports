# Contributor: Carlo Landmeter <clandmeter@gmail.com>
# Maintainer:
pkgname=godep
pkgver=0_git20140821
pkgrel=0
pkgdesc="Dependency tool for go"
url="http://github.com/tools/godep"
arch="all"
license="BSD"
depends=""
depends_dev=""
makedepends="$depends_dev git go mercurial"
install=""
subpackages=""
source="http://dev.alpinelinux.org/archive/$pkgname/$pkgname-$pkgver.tar.gz"
giturl="git://github.com/tools/$pkgname.git"
disturl="dev.alpinelinux.org:/archive/$pkgname/"


_builddir=$srcdir/$pkgname-$pkgver

prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
        export GOPATH="${srcdir}"
        go get code.google.com/p/go.tools/go/vcs || return 1
        go get github.com/kr/fs || return 1
}

build() {
	cd "$_builddir"
	GOPATH="${srcdir}" go build
}

package() {
	cd "$_builddir"
	install -Dm755 "${pkgname}-${pkgver}" "${pkgdir}/usr/bin/godep"
}

md5sums="f9a077ebb970a66164827c55ea8164c1  godep-0_git20140821.tar.gz"
sha256sums="737ce9a8b79bf139633f191fa16cc641c8116dab37e339c2d01045e6eb787e81  godep-0_git20140821.tar.gz"
sha512sums="4dbd2e70211f45051621fceb96cf45d07d285f5d5394c8f3ecc53acb82d35f87610bec5ae7d212f3e82550a924b64fa4408fba0afa41eb4fb8f1f7232e8346a1  godep-0_git20140821.tar.gz"

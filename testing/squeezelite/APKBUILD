# Contributor: Carlo Landmeter <clandmeter@gmail.com>
# Maintainer:
pkgname=squeezelite
pkgver=1.8
pkgrel=0
pkgdesc="lightweight headless squeezebox emulator"
url="https://code.google.com/p/squeezelite"
arch="all"
license="GPLv3"
depends=""
depends_dev="alsa-lib-dev faad2-dev flac-dev libmad-dev soxr-dev
	libvorbis-dev mpg123-dev"
makedepends="$depends_dev"
install=""
subpackages=""
source="$pkgname-$pkgver.tar.gz::https://squeezelite.googlecode.com/archive/v1.8.tar.gz
	0001-only-run-glibc-specific-hacks-on-glibc.patch
	0001-respect-LDFLAGS.patch"

_builddir="$srcdir/$pkgname-v$pkgver"

prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	OPTS="-DLINKALL -DRESAMPLE -DDSD" make || return 1 
}

package() {
	cd "$_builddir"
	install -m755 -D $pkgname \
		$pkgdir/usr/bin/$pkgname || return 1
}

md5sums="35e3fa189019e41ba156286ea332794f  squeezelite-1.8.tar.gz
14bc562281e8c5e8faf947d3f9f65cf0  0001-only-run-glibc-specific-hacks-on-glibc.patch
06dbeeeb3941f64ba29925a8ada76597  0001-respect-LDFLAGS.patch"
sha256sums="8d0d5434b594243b753d2f65c886202f1290efeef83fb31c2872db83f1102cd1  squeezelite-1.8.tar.gz
d0929efb834d80d5f6616607d4b883bf75094c37a687d05a1cbdaeb6db68e79d  0001-only-run-glibc-specific-hacks-on-glibc.patch
6bc4ac51359dce464e3489fa5823cb009bad2253365f999fcda979be236b5d8e  0001-respect-LDFLAGS.patch"
sha512sums="26ad54a6520955f55222b69a2f2fcb34dccca5f0846a5b001456fbe17e0817331343728f0df6a677932a7b52428649b78f10f7f6e057798732b1477211dbd1af  squeezelite-1.8.tar.gz
2146c7878f693cddb6b6cbce496946a38f7b3454b67789010a001942def5eacf7af79afb9745859c3ee047706beebec988fc50405eeceb59e0b743be59495786  0001-only-run-glibc-specific-hacks-on-glibc.patch
5aeb611275df9b09c562fef9c85392b829c48d498f8c683bafae215d9ca81fbe54c7d68c737930c2f9d7d7017b981057cd55d786af909c252a975206083efaff  0001-respect-LDFLAGS.patch"

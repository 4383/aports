# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=attr
pkgver=2.4.43
_ver=2.4.43-1
pkgrel=0
pkgdesc="Extended attribute support library for ACL support"
url="http://oss.sgi.com/projects/xfs/"
license="LGPL"
depends=
makedepends="libtool autoconf automake bash gzip"
subpackage="$pkgname-dev $pkgname-doc"
source="ftp://oss.sgi.com/projects/xfs/cmd_tars/${pkgname}_$_ver.tar.gz"

build() {
	cd "$srcdir"/attr-$pkgver
	sed -i -e '/HAVE_ZIPPED_MANPAGES/s:=.*:=false:' \
		include/builddefs.in

	autoconf || return 1

	unset PLATFORM #184564
	export OPTIMIZER="${CFLAGS}"
	export DEBUG=-DNDEBUG

	./configure \
		--prefix=/ \
		--exec-prefix=/ \
		--sbindir=/bin \
		--bindir=/usr/bin \
		--libdir=/lib \
		--libexecdir=/usr/lib \
		--enable-lib64=yes \
		--includedir=/usr/include \
		--mandir=/usr/share/man \
		--datadir=/usr/share \
		--disable-gettext || return 1
	make LIBTOOL="libtool --tag=CC" || return 1
}

package() {
	cd "$srcdir"/attr-$pkgver
	make DIST_ROOT="$pkgdir" install install-lib install-dev
	# provided by man-pages
	rm -fr "$pkgdir"/usr/share/man/man2
}
md5sums="91583a14bcbd637adaa9b07ea49c5d4b  attr_2.4.43-1.tar.gz"

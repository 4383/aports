# Contributor: grharry
# Maintainer: 

# TODO: fix init.d script

pkgname=coova-chilli
pkgver=1.2.2
pkgrel=0
pkgdesc="CoovaChilli is an open source access controller for wireless LAN"
url="http://www.coova.org/"
license="GPL"
depends=
makedepends="perl openssl-dev autoconf automake libtool"
install= 
subpackages="$pkgname-doc $pkgname-dev"
source="http://ap.coova.org/chilli/coova-chilli-$pkgver.tar.gz
	coova-chilli-ssl.patch"

_builddir="$srcdir/$pkgname-$pkgver"

prepare() {
	cd $_builddir
	patch -p1 -i ../coova-chilli-ssl.patch || return 1
	aclocal && autoconf && automake && libtoolize || return 1
}

build() {
	cd $_builddir
	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--localstatedir=/var/run \
		--libdir=/usr/lib \
		--sysconfdir=/etc \
		--with-openssl
	make -j1  || return 1
}

package() {
	cd $_builddir
	make DESTDIR="$pkgdir" install
}

md5sums="44042e26c3b3c6e64a9a8769328b437d  coova-chilli-1.2.2.tar.gz
4135e6e19bafdad777b8ca7388ff4101  coova-chilli-ssl.patch"

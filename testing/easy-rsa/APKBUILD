# Maintainer: Natanael Copa
pkgname=easy-rsa
pkgver=2.2.0
pkgrel=0
pkgdesc="Simple shell based CA utility"
url="https://github.com/OpenVPN/easy-rsa"
arch="noarch"
license="GPLv2"
depends="openssl"
depends_dev=""
makedepends="$depends_dev autoconf automake"
install=""
subpackages="$pkgname-doc"
source="saveas-https://github.com/OpenVPN/easy-rsa/archive/v$pkgver.tar.gz/$pkgname-$pkgver.tar.gz"

_builddir="$srcdir"/easy-rsa-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
	aclocal && autoconf && automake --add-missing
}

build() {
	cd "$_builddir"
	./configure --prefix=/usr
	make
}

package() {
	cd "$_builddir"
	mkdir -p "$pkgdir"/usr/share/easy-rsa
	make install DESTDIR="$pkgdir"
}

md5sums="bb0478283f7f786a594a469257b85b71  easy-rsa-2.2.0.tar.gz"
sha256sums="132363669dd61f3057761261d7196b6918adcf467e683d8a9dd1acec8a5f04f7  easy-rsa-2.2.0.tar.gz"
sha512sums="6017e75a8beab9f9b042fb7de7ea4cbb728b55c3167cfc40d5b811c122732c75df34f22b4fd7a6bc2c5cca2124ca35dcc3e58d86cf462fc13fac9c22084eec39  easy-rsa-2.2.0.tar.gz"

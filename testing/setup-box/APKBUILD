# Contributor: Alan Lacerda <alacerda@alpinelinux.org>
# Maintainer: Alan Lacerda <alacerda@alpinelinux.org>
pkgname=setup-box
pkgver=0.1.0
pkgrel=1
pkgdesc="A tool to setup a variety of Alpine Linux Environments"
url="http://git.alpinelinux.org/cgit/alacerda/setup-box/"
arch="noarch"
license="MIT"
depends="jq"
depends_dev=""
makedepends="$depends_dev"
install=""
subpackages=""
source="http://dev.alpinelinux.org/archive/$pkgname/$pkgname-$pkgver.tar.bz2"

_builddir="$srcdir/$pkgname-$pkgver"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	mkdir -p "$pkgdir"/etc/setup-box/json
	mkdir "$pkgdir"/sbin
	install -m 755 setup-box "$pkgdir"/sbin/$pkgname
	cp json/* "$pkgdir"/etc/setup-box/json
	sed -e 's:@CONFIG_DIR@:/etc/setup-box:g' -i "$pkgdir"/sbin/$pkgname
	sed -e 's:@JSON_DIR@:/etc/setup-box/json:g' -i "$pkgdir"/sbin/$pkgname
	sed -e 's:@DEPS@:jq:g' -i "$pkgdir"/sbin/$pkgname
	sed -e 's:@VERSION@:v0.1.0:g' -i "$pkgdir"/sbin/$pkgname
}

md5sums="d79b4c30ab60185c8edee7357059812c  setup-box-0.1.0.tar.bz2"
sha256sums="b610cf1db9136339f5d695e2dcc0fadd71ea059af8e35ef45e120a9291b7d67b  setup-box-0.1.0.tar.bz2"
sha512sums="af3e08ddb3d2187cde43e28042fc9130a21e0cfd6fb3d2e2b983f49cab7ca3d2d64f591f3adb336194c2c7d52581b7037fe46ec86e4635b6595de09e5a2fa83e  setup-box-0.1.0.tar.bz2"

# Contributor: 
# Maintainer: 
pkgname=lua-xctrl
pkgver=2010.10.22
_x=${pkgver%%.*}
_y=${pkgver%.*}
_y=${_y#*.}
_z=${pkgver##*.}
_ver=${_x}-${_y}-${_z}
pkgrel=0
pkgdesc="Lua module that allows you to query and manipulate various aspects of an X11 window manager"
url="http://jkp.t35.com/lua/"
license="GPL-2"
depends=
makedepends="lua-dev libx11-dev libxmu-dev libiconv-dev"
install=
subpackages="$pkgname-doc"
source="http://jkp.t35.com/files/xctrl-$_ver.tar.gz"

_builddir="$srcdir"/xctrl-$_ver
_lua_libdir=/usr/lib/lua/5.1
prepare() {
	cd "$_builddir"
}

build() {
	cd "$_builddir"
	export EXTRA_CFLAGS="-fPIC"
	export EXTRA_LDFLAGS="-liconv"
	make || return 1
}

package() {
	cd "$_builddir"
	install -d "$pkgdir"/$_lua_libdir "$pkgdir"/usr/share/doc/$pkgname
	install src/xctrl.so "$pkgdir"/$_lua_libdir/xctrl.so
	install doc/lwmctrl.html "$pkgdir"/usr/share/doc/$pkgname/lwmctrl.html
}

md5sums="8a234fb4fc143407a4a7788882665e49  xctrl-2010-10-22.tar.gz"

# Contributor: Isaac Dunham <ibid.ag@gmail.com>
# Maintainer: Isaac Dunham <ibid.ag@gmail.com>
pkgname=xiphos
pkgver=4.0.3
pkgrel=0
_pkgex="-20150806"
pkgdesc="Gnome application for Bible study"
url="https://sourceforge.net/projects/gnomesword"
arch="all"
license="GPL2"
depends=""
makedepends="webkitgtk-dev sword-dev gconf-dev libgsf-dev intltool gettext-dev
	rarian-dev desktop-file-utils gnome-doc-utils util-linux-dev
	linux-headers biblesync-dev"
install=""
subpackages="$pkgname-doc $pkgname-lang"
source="http://downloads.sourceforge.net/gnomesword/xiphos-$pkgver$_pkgex.tar.gz"

_builddir="$srcdir"/xiphos-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./waf configure --prefix=/usr --enable-webkit-editor --gtk=3 && \
	./waf build || return 1
}

package() {
	cd "$_builddir"
	DESTDIR="$pkgdir" ./waf install || return 1

}

md5sums="90862930461bdb13893a2af23467e542  xiphos-4.0.3-20150806.tar.gz"
sha256sums="1bc76b09ee729ad446f0dcfa0b0394997c54c2b79f1c046e16aad1a6d5857bf6  xiphos-4.0.3-20150806.tar.gz"
sha512sums="d32ed1121c07eda65e851fce8766ccbff67ffff07277a5cd696ecc57fc0598db492bdfed40094d340b6ac0d8efe697d7d82ad03f8b5ba23ae2634f88cd287d9b  xiphos-4.0.3-20150806.tar.gz"

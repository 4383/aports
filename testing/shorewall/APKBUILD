# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=shorewall
pkgver=4.5.18
pkgrel=0
pkgdesc="Core libraries for Shorewall"
url="http://www.shorewall.net/"
arch="noarch"
license="GPL-2"
depends="shorewall-core perl iptables iproute2"
# coreutils for install -T
makedepends="coreutils"
replaces=""
subpackages="$pkgname-doc"
source="http://www1.shorewall.net/pub/shorewall/${pkgver%.*}/shorewall-$pkgver/$pkgname-$pkgver.tar.bz2
	shorewall.initd
	"

_builddir="$srcdir/$pkgname-$pkgver"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./configure MANDIR=/usr/share/man SBINDIR=/usr/sbin || return 1
}

package() {
	cd "$_builddir"
	DESTDIR="$pkgdir" ./install.sh || return 1
	rm -f "$pkgdir"/etc/init.d/shorewall
	install -m755 "$srcdir"/shorewall.initd "$pkgdir"/etc/init.d/shorewall
}

md5sums="c32a1a14349e9c2c6df32880c08d8d42  shorewall-4.5.18.tar.bz2
a59c0ec3f299f6a383d33aacbdc83e44  shorewall.initd"
sha256sums="81bbcb2cc24d0b54769fb153cb472d78e6eed9cdc9f005f1dd70ef2ae9efe131  shorewall-4.5.18.tar.bz2
ee8cff251a24cc5f9b31e835682f6fc7d9f01625e93c2f9d8c82c859dad09e8e  shorewall.initd"
sha512sums="69857ba9181989a0d0b8ce691e637b313b59d4f5643784e62a801f8d74add0605452011e19e5344aaca97a329fe66980627181e69d9c0fc0625ff23afb192f78  shorewall-4.5.18.tar.bz2
365819451ee3a412c321eea4d3011c548295f00f9dd2cbb996c84a61be77eae859d568077677f1acad64af2a642028e2ef577a3757239703153b3293232afade  shorewall.initd"

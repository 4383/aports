# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=shorewall
pkgver=4.5.21
pkgrel=0
pkgdesc="An iptables front end for firewall configuration"
url="http://www.shorewall.net/"
arch="noarch"
license="GPL-2"
depends="shorewall-core perl iptables iproute2"
# coreutils for install -T
makedepends="coreutils bash"
replaces=""
subpackages="$pkgname-doc"
source="http://www1.shorewall.net/pub/shorewall/${pkgver%.*}/shorewall-$pkgver/$pkgname-$pkgver.tar.bz2
	shorewall.initd
	"

_builddir="$srcdir/$pkgname-$pkgver"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./configure MANDIR=/usr/share/man SBINDIR=/usr/sbin || return 1
}

package() {
	cd "$_builddir"
	DESTDIR="$pkgdir" ./install.sh || return 1
	rm -f "$pkgdir"/etc/init.d/shorewall
	install -m755 "$srcdir"/shorewall.initd "$pkgdir"/etc/init.d/shorewall
}

md5sums="41773c809975b6bfbc652d674c7f26cb  shorewall-4.5.21.tar.bz2
ac29ec1138be791eeed8437d1573c5c3  shorewall.initd"
sha256sums="76bf9e24ec2ae3fb7ffe4f536861ca7f85fc9f2bb57fba2f0a553102e7085bcb  shorewall-4.5.21.tar.bz2
917469b5283d3a8b98628436d1ab789d05c91a0ae8b51c302e3d3a2287432770  shorewall.initd"
sha512sums="64945c02f964ff93006883a2d65c3800381191e2f2b00611abef68549397abd2a28310b6daab1f5ae36da0c1c2b661d2e778abb08906ec72f24b802faf44d329  shorewall-4.5.21.tar.bz2
603aaed777930e4a37bc45e2cb5893b7d1919ead02658cfba1a6f09f57661c1de0e4dadcf0f51d59bb95feaffc335c4ec66eb3d61576139962fad49eefc3452b  shorewall.initd"

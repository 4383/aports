# Maintainer: Danilo BÃ¼rger <danilo@feastr.de>

pkgname=tini
pkgver=0.8.0
pkgrel=0
pkgdesc="A tiny but valid init for containers"
url="https://github.com/krallin/tini"
arch="all"
license="MIT"
depends=""
depends_dev=""
makedepends="$depends_dev cmake"
install=""
subpackages=""
source="$pkgname-$pkgver.tar.gz::https://github.com/krallin/tini/archive/v$pkgver.tar.gz"

_builddir="$srcdir"/$pkgname-$pkgver

build() {
    cd "$_builddir"
    export CFLAGS="-DPR_SET_CHILD_SUBREAPER=36 -DPR_GET_CHILD_SUBREAPER=37"
    cmake . || return 1
    make || return 1
}

package() {
    cd "$_builddir"
    install -D -m755 tini "$pkgdir"/usr/bin/tini || return 1
}

md5sums="9d8fab8fe911ceb5f9c595840879e7b3  tini-0.8.0.tar.gz"
sha256sums="06c4df7175bb2f7eb34026c8991c2b6c2b318c473b9f1362d290f453039fd36a  tini-0.8.0.tar.gz"
sha512sums="b2040841ed0522a60150d93d1cdf589b0dfd9704a17e7bd4a891c6dfda2544703447591fc75d518303d2ecfd622821be0cda72212a628e187eb2f4bbb3f8173e  tini-0.8.0.tar.gz"

# Maintainer: Bart≈Çomiej Piotrowski <nospam@bpiotrowski.pl>

pkgname=rtorrent
pkgver=0.8.9
pkgrel=1
pkgdesc='Ncurses BitTorrent client based on libTorrent'
url='http://libtorrent.rakshasa.no/'
license='GPL'
arch='all'
makedepends='libsigc++-dev libtorrent-dev curl-dev xmlrpc-c-dev'
subpackages="$pkgname-doc"
source="http://libtorrent.rakshasa.no/downloads/${pkgname}-${pkgver}.tar.gz"

build() {
	cd "${srcdir}/${pkgname}-${pkgver}"

	export LDFLAGS="${LDFLAGS} -lpthread"
	./configure \
		--prefix=/usr \
		--enable-debug \
		--with-xmlrpc-c \
		|| return 1

	make || return 1
}

package() {
	cd "${srcdir}/${pkgname}-${pkgver}"
	make DESTDIR="${pkgdir}" install
}

doc() {
    mkdir -p "$subpkgdir" || return 1

    cd "${srcdir}/${pkgname}-${pkgver}"
    install -D doc/faq.xml "${subpkgdir}"/usr/share/doc/rtorrent/faq.xml || return 1
    install -D doc/rtorrent.1 "${subpkgdir}"/usr/share/man/man1/rtorrent.1 || return 1
    install -D doc/rtorrent.rc "${subpkgdir}"/usr/share/doc/rtorrent/rtorrent.rc || return 1
}

md5sums="629247636cb1210663b52dadbd040a6c  rtorrent-0.8.9.tar.gz"

# Contributor: Natanael Copa <ncopa@alpinelinux.org>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=bsm-simple-themes
pkgver=1.3
_ver=${pkgver/./}
pkgrel=1
pkgdesc="BSM Simple GTK Themes"
url="http://gnome-look.org/content/show.php/?content=121685"
arch="noarch"
license="GPL"
depends="gtk-engines-clearlooks faenza-icon-theme"
makedepends=""
install=""
subpackages="$pkgname-xfwm4 $pkgname-metacity"
source="http://gnome-look.org/CONTENT/content-files/121685-BSM%20Simple%20$_ver.tar.gz
	bsm-simple-panel.patch"

_builddir="$srcdir"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	# fix permissions
	find . -type d -exec chmod 755 '{}' \;
	find . -type f -exec chmod 644 '{}' \;
	mkdir -p "$pkgdir"/usr/share/themes
	for i in *; do
		[ -L "$i" ] && continue
		cp -ra "$i" "$pkgdir"/usr/share/themes/ || return 1
	done
}

xfwm4() {
	pkgdesc="BSM Simple GTK Themes - xfwm4"
	install_if="$pkgname=$pkgver-r$pkgrel xfwm4"
	cd "$pkgdir"
	find -name 'xfwm4' -type d | while read dir; do
		mkdir -p "$subpkgdir/${dir%/*}"
		mv "$dir" "$subpkgdir/${dir%*}"
	done
}

metacity() {
	pkgdesc="BSM Simple GTK Themes - metacity"
	install_if="$pkgname=$pkgver-r$pkgrel metacity"
	cd "$pkgdir"
	find -name 'metacity-?' -type d | while read dir; do
		mkdir -p "$subpkgdir/${dir%/*}"
		mv "$dir" "$subpkgdir/${dir%*}"
	done
}

md5sums="26ba7fd532b8811e77a041ce8bacf79f  121685-BSM%20Simple%2013.tar.gz
397bb9e05136048d64f5c4e629434245  bsm-simple-panel.patch"

# Maintainer: Stuart Cardall <developer@it-offshore.co.uk>
# Contributor: Bart≈Çomiej Piotrowski <bpiotrowski@alpinelinux.org>

pkgname=spacefm
pkgver=1.0.0
pkgrel=0
pkgdesc='Multi-panel tabbed file manager (GTK2 version)'
arch=all
url='http://ignorantguru.github.com/spacefm/'
license='GPL3'
depends='bash'
makedepends='intltool gettext-dev gtk+2.0-dev gtk+3.0-dev udev-dev ffmpegthumbnailer-dev linux-headers'
subpackages="$pkgname-lang $pkgname-doc $pkgname-gtk3 $pkgname-gtk3-lang:lang3 $pkgname-gtk3-doc:doc3"
source="saveas-https://github.com/IgnorantGuru/spacefm/archive/$pkgver.tar.gz/$pkgname-$pkgver.tar.gz"

build() {
	cd "$srcdir"/$pkgname-$pkgver
	./configure --prefix=/usr \
		--with-gtk2\
		-disable-pixmaps || return 1
	make || return 1
}

gtk3() {
	cd "$srcdir"/$pkgname-$pkgver
	pkgdesc="Multi-panel tabbed file manager (GTK3 version)"
	replaces="spacefm"
	mkdir "$subpkgdir"
	make clean || return 1
	./configure --prefix=/usr \
		--with-gtk3\
		-disable-pixmaps || return 1
        make || return 1
	make -j1 DESTDIR="$subpkgdir" install || return 1
}

lang3() {
	arch="noarch"
	mkdir -p "$subpkgdir/usr/share"
	mv "${pkgdir%*spacefm}$pkgname-gtk3/usr/share/locale" "$subpkgdir/usr/share/"
}

doc3() {
	arch="noarch"
	mkdir -p "$subpkgdir/usr/share"
        mv "${pkgdir%*spacefm}$pkgname-gtk3/usr/share/doc" "$subpkgdir/usr/share/"
}

package() {
	cd "$srcdir"/$pkgname-$pkgver
	make -j1 DESTDIR="$pkgdir" install || return 1
}

md5sums="0aa34602f2b2a41b57e60ec735b60053  spacefm-1.0.0.tar.gz"
sha256sums="7460df267ba846d4c9d31f26d76b08508068e0aa39a3c0f6e8e6c962286fc6a3  spacefm-1.0.0.tar.gz"
sha512sums="e3ce68291baca59ea48b254b163d0db1a7324f11eb9dc0c1a4c42bd3b197dc8dcd458ffebe00fad94662e8e51217af43211b1b6e5d091cdb0a39d0020d46fbac  spacefm-1.0.0.tar.gz"

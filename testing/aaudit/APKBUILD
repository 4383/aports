# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=aaudit
pkgver=0.3
pkgrel=0
pkgdesc="Alpine Auditor"
url="http://alpinelinux.org"
arch="noarch"
license="GPL"
depends=""
makedepends=""
install=""
subpackages="$pkgname-server"
replaces=""
client_bin="aaudit"
server_bin="aaudit-repo-create aaudit-repo-update aaudit-shell"
server_lua="aaudit.lua"
source="$client_bin $server_lua $server_bin aaudit-server.conf"

build() {
	return 0
}

package() {
	mkdir -p "$pkgdir"/usr/bin
	cp $client_bin "$pkgdir"/usr/bin
}

server() {
	depends="lua5.2 lua5.2-posix git"

	mkdir -p "$subpkgdir"/etc/aaudit \
		"$subpkgdir"/usr/libexec/aaudit \
		"$subpkgdir"/usr/share/lua/5.2/
	cp aaudit-server.conf "$subpkgdir"/etc/aaudit
	cp $server_lua "$subpkgdir"/usr/share/lua/5.2/
	cp $server_bin "$subpkgdir"/usr/libexec/aaudit
}

md5sums="e8ea430114aab3f07704060605670e0b  aaudit
c7733c44b464e6e8efe73826d075af17  aaudit.lua
b11fe0d8285a00a135f8ac9af0206449  aaudit-repo-create
b900f83afedc4fb1dae2f74c9380fb72  aaudit-repo-update
0958044c64d1b5c475939687a5620a41  aaudit-shell
274e2126de7f30170ad6d6acc1bb9ef1  aaudit-server.conf"
sha256sums="093ded6192adc7ee81ec1e435bac4652355950c30c573cbd0d2f9ab1307f1ade  aaudit
c4e64cd76a23a6e10f944f88904ec7bc511be90af0659526745086fb732530f7  aaudit.lua
f01ecd5b99cadbc591d8472f6010d34ad3136085aa35c93d7da56b29a251f6c1  aaudit-repo-create
2c108a129411373be55a4e4add7ca5c005e05f1ca48be813e9903f7ef84f1e7e  aaudit-repo-update
8a24abf3ff360f74afbf408d38ad5336a17f59bf0ec9ff553cae4fe0a4bfc376  aaudit-shell
23e75c1c935d2cd516c489c0c6835178e864595daef45975da54897296aebcf6  aaudit-server.conf"
sha512sums="b52acc614c4437ed54f348daeb887aca965b62b4e45bbd1f95b731f5e03b360277476b513254e05306387cdea1f196a86b4d9cf5bbc76916707164b45364521d  aaudit
9d64ba1904639aca31f34aa384cdfce7ddefd17959dfb08904811015343e36959904707ff667879e0fa5587f199ff4dac0213a42d484f983801914dc61ae2899  aaudit.lua
a8c875eb726e267d6fb56f41cb5c39c45e6f8af8a7a55059bcaff8a0fe8498dac2c90bb21c88e37c34658c574bf2afa8f6ef24e725f602ee1153ba04d9cc84d5  aaudit-repo-create
e59320cbc6bd7a07687a261399b7df4ef00e349240bee64539a9dfd925b05fb6c679f0f8efb42d1429a7c1d6b918d429a6acb0bc3d4d7f6ef059f9562b748abf  aaudit-repo-update
492f342115dfe1b622601d11edeb2e5bc87512412645c9f242ce5fe870e6c6a5ee333aa8e3dcb7f9b7f72ebce8b8cb88d6446af39255485c0bd3786ab2c81982  aaudit-shell
b370c408c242cb4d4c349ca2208e69cdc44c750990c8aacb62e2d8b018cdb87e25c5955fe144352f0fd5c41ff0329ed1118fb3a977aa40e13ddb6b115bf4dd2a  aaudit-server.conf"

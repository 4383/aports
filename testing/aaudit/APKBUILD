# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=aaudit
pkgver=0.5
pkgrel=0
pkgdesc="Alpine Auditor"
url="http://alpinelinux.org"
arch="noarch"
license="GPL"
depends="lua5.2 lua5.2-posix lua5.2-cjson lua5.2-pc"
makedepends=""
install=""
subpackages="$pkgname-server"
replaces=""
source="aaudit-common.lua
	aaudit-server.lua
	aaudit
	aaudit-shell
	aaudit-update-keys
	aaudit.json
	aaudit-server.json
	"
_luaver="5.2"

build() {
	return 0
}

package() {
	mkdir -p "$pkgdir"/etc/aaudit \
		"$pkgdir"/usr/bin \
		"$pkgdir"/usr/share/lua/$_luaver/aaudit
	cp aaudit.json "$pkgdir"/etc/aaudit
	cp aaudit-common.lua "$pkgdir"/usr/share/lua/$_luaver/aaudit/common.lua
	cp aaudit "$pkgdir"/usr/bin
}

server() {
	depends="aaudit git lua5.2 lua5.2-posix lua5.2-cjson lua5.2-zlib"

	mkdir -p "$subpkgdir"/etc/aaudit \
		"$subpkgdir"/usr/libexec/aaudit \
		"$subpkgdir"/usr/bin \
		"$subpkgdir"/usr/share/lua/$_luaver/aaudit
	cp aaudit-server.json "$subpkgdir"/etc/aaudit
	cp aaudit-server.lua  "$subpkgdir"/usr/share/lua/$_luaver/aaudit/server.lua
	cp aaudit-update-keys "$subpkgdir"/usr/bin
	cp aaudit-shell       "$subpkgdir"/usr/libexec/aaudit
}

md5sums="b81b0707b297a69dacbc1606324de029  aaudit-common.lua
2dfb114024f0f7aa46400a6c81d1d9cc  aaudit-server.lua
9b48cc51f9f16989af4290107b2b866d  aaudit
f5de73f12b6df1a751c89f19c92871be  aaudit-shell
feef077f56f40002ca11846512d347af  aaudit-update-keys
e14ded329626ca1d6dd48e5bef0bc7e2  aaudit.json
f2c15c547701ec71aa4d0c1d0f7b70b1  aaudit-server.json"
sha256sums="ee1998e730356c2de0ff9d5e27d9e0277e3c1f051777146b7c5b820437edfd7f  aaudit-common.lua
55f70bb0eb60b33580a6f68f57f0a8b52fef4f2bf4c4851af7a9b96c60f4841a  aaudit-server.lua
160a4e2893dfb264a7844d911d7c2781dda4624f2357f3e7950338f8d2ca9c2a  aaudit
659c755cfca95a76da78f4d28d0ab9a32d55bea0077be7420ceaf9d45c518354  aaudit-shell
660dcf86f02a9d0e3ff47cb359e0291a0921d03215e368552a2878d2d691a9cc  aaudit-update-keys
f61efebc04756c8bfb7cb955b7af5db6a3c5dabdd005f690db812c7e77567cf5  aaudit.json
d477ca7714ff43818f8deef3f60d69d118ea899c57b6109cdf4c6c22009cc07c  aaudit-server.json"
sha512sums="aaa378fd710d17cb3663954648e97dd5128406cc6f37e9834075046aed1912dcc9e448b6c96502350b8d3496e00b7803cae671a4be2c12c584a84dc0b6e843e9  aaudit-common.lua
72fb60c37a54b34feff48d1658ecc341937c9fb9148dafd71e19347c6e1cd2daf4f59dfb443490b14f82f543847a56b04c877eb545dc9ee6b4af310a94e1008d  aaudit-server.lua
1c9a78d1d2557353982ae5edbad7fefb2983ba06ff139352d2106dbba00f675cc50050ad5dd7a62153b8c8c8a6ec953872cb5c0289fa999656ade8f8004a3f5e  aaudit
18499771d7d425f9305209c562eb8e62ef41910e88b08219baf010cdb472d49087080feb67384c4826c53bddcc0ce92c0c23c78df22dc40c64f1b17bf0ad05ec  aaudit-shell
aec728a9a1e4c92baeb94a9d95e1785ea166652a157571fe2e848e71c1246635ecb99512e92435e1314c620b1fa8e4f37400350bed78bd375db4a63828c500f0  aaudit-update-keys
e769f0f77fe54ba1ab35efc80cc6426e34a2ee1d053ac9e7cc5aa316cfcef0c9658d2f0e2c47f7ae282bb9cc07107065fcc13034b2f9125c182378b7c73b7d99  aaudit.json
69f8da6b6057dfb5ab0f36f8b27db3a275cd24e4d45a0e95cf4a79d955c0ebfc88861a0a50d5b6da542587cbe8feca1842c966026f0bf445edea316202d49ee5  aaudit-server.json"

# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=aaudit
pkgver=0.4
pkgrel=0
pkgdesc="Alpine Auditor"
url="http://alpinelinux.org"
arch="noarch"
license="GPL"
depends="lua5.2 lua5.2-posix lua5.2-cjson"
makedepends=""
install=""
subpackages="$pkgname-server"
replaces=""
source="aaudit-common.lua
	aaudit-server.lua
	aaudit
	aaudit-shell
	aaudit-update-keys
	aaudit.json
	aaudit-server.json
	"
_luaver="5.2"

build() {
	return 0
}

package() {
	mkdir -p "$pkgdir"/etc/aaudit \
		"$pkgdir"/usr/bin \
		"$pkgdir"/usr/share/lua/$_luaver/aaudit
	cp aaudit.json "$pkgdir"/etc/aaudit
	cp aaudit-common.lua "$pkgdir"/usr/share/lua/$_luaver/aaudit/common.lua
	cp aaudit "$pkgdir"/usr/bin
}

server() {
	depends="aaudit git lua5.2 lua5.2-posix lua5.2-cjson"

	mkdir -p "$subpkgdir"/etc/aaudit \
		"$subpkgdir"/usr/libexec/aaudit \
		"$subpkgdir"/usr/bin \
		"$subpkgdir"/usr/share/lua/$_luaver/aaudit
	cp aaudit-server.json "$subpkgdir"/etc/aaudit
	cp aaudit-server.lua  "$subpkgdir"/usr/share/lua/$_luaver/aaudit/server.lua
	cp aaudit-update-keys "$subpkgdir"/usr/bin
	cp aaudit-shell       "$subpkgdir"/usr/libexec/aaudit
}

md5sums="b81b0707b297a69dacbc1606324de029  aaudit-common.lua
4ad8c883f09133a1b9357f7ac156040c  aaudit-server.lua
b24162b7fa31161eab71485b1077f8ea  aaudit
07c54e8cb44f195456be7a18b15a0be1  aaudit-shell
feef077f56f40002ca11846512d347af  aaudit-update-keys
e14ded329626ca1d6dd48e5bef0bc7e2  aaudit.json
dc9a54c08ea299ad268301266f3da989  aaudit-server.json"
sha256sums="ee1998e730356c2de0ff9d5e27d9e0277e3c1f051777146b7c5b820437edfd7f  aaudit-common.lua
3a9384089b0cb73c151b67eaedd66a244b48c0c2a86f5fe0ccadda6e0cbe8863  aaudit-server.lua
198b92b5a0eb8e13c3fad87f3afffda1e749243c785e72b54db190413a513595  aaudit
a99ab6908d780f07b756f5d2416924250b61e88c92ea0aa91af88a05dfc9edff  aaudit-shell
660dcf86f02a9d0e3ff47cb359e0291a0921d03215e368552a2878d2d691a9cc  aaudit-update-keys
f61efebc04756c8bfb7cb955b7af5db6a3c5dabdd005f690db812c7e77567cf5  aaudit.json
878fa7c12ddd28d679703cdf7ab31f69473609d16da9604545f78132cc59d562  aaudit-server.json"
sha512sums="aaa378fd710d17cb3663954648e97dd5128406cc6f37e9834075046aed1912dcc9e448b6c96502350b8d3496e00b7803cae671a4be2c12c584a84dc0b6e843e9  aaudit-common.lua
fa74091c9f8f2614f68d828560734b92f16b592b40e9552464ef84dc54f2600f7df91e9ba6159c3a91d54f8d4160078ac022e585633a87edc0cbc6e280a29be9  aaudit-server.lua
b15515979003382527842cf3fd0c150fb1ff96009518e7cd71c42ab0cf091cee000384d2b8b71c6cc8c4c93ee64cb70bef726d98b3e2b87fff9db7afbc83dc57  aaudit
974a4e733a61c07719ae75bc1ffc39f01d5adf7bc7f813aa358201bd18711eafeaa42705d9b8d4a869cdb27687091c8998b7eafd1d10a778a429d0efa787bda0  aaudit-shell
aec728a9a1e4c92baeb94a9d95e1785ea166652a157571fe2e848e71c1246635ecb99512e92435e1314c620b1fa8e4f37400350bed78bd375db4a63828c500f0  aaudit-update-keys
e769f0f77fe54ba1ab35efc80cc6426e34a2ee1d053ac9e7cc5aa316cfcef0c9658d2f0e2c47f7ae282bb9cc07107065fcc13034b2f9125c182378b7c73b7d99  aaudit.json
dcc099fe53603a09de225a888242ce329cdb51af3cd0a88dea23cb56d794eb2a442dcdf93b3db18158f8745d5d33de5c82d106f99b1c616fd4936512dfae75d8  aaudit-server.json"

# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=aports-build
pkgver=0.1
pkgrel=0
pkgdesc="MQTT based build-on-git-push scripts for Alpine Linux"
url="http://alpinelinux.org"
arch="noarch"
license="GPL2"
depends="mosquitto-utils alpine-sdk mqtt-exec"
depends_dev=""
makedepends="$depends_dev mosquitto-dev"
install="$pkgname.pre-install"
subpackages=""

source="aports-build aports-build.initd aports-build.confd"

_builddir=
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	install -Dm755 "$srcdir"/aports-build \
		"$pkgdir"/usr/bin/aports-build || return 1
	install -Dm755 "$srcdir"/aports-build.initd \
		"$pkgdir"/etc/init.d/aports-build || return 1
	install -Dm644 "$srcdir"/aports-build.confd \
		"$pkgdir"/etc/conf.d/aports-build || return 1
}

md5sums="5d0a7c69d166c7012f2a5c2a24e402ce  aports-build
40ff7be2ad647d22c4c8ebfe1fec8b1b  aports-build.initd
cdc49e0ef145de72131972a575f20e7b  aports-build.confd"
sha256sums="547b150e7e07c2d64a5648bbc6944a6e7c9123dc72a2c3e3bb392662cb4af010  aports-build
e6b228ccc0dcdf7f172ebd3777c5791b96f86a8c96a4df95df2dd3c9051b91fe  aports-build.initd
519744cdb4be83e5da1c22d4aa93c7ef97d66e03565e84b710bc21c94b82047e  aports-build.confd"
sha512sums="d71d392b46f1009b262c68af5b2d926bab25f1570690cce064a9e16d544de67eefb73a33799d2d65054c250da4eff786f7a7272af3f325ea1bfc776b7c92393e  aports-build
af5cd8e2647f3b9aa03020d5cea996a750b48b2b3a4d208f5ef683538aba3ecada677b9a0071385c85ec66803b8ed055b1d58853ccfe198c1c5beaad99d97d86  aports-build.initd
fbe8ed4b1fbfc979de62302873e99c67bab751a7fcd921c3b23815f535cedb34c717e82b3c223f88e06498a573cbd147a73db7bf5adbb5e1947ac75fcb8edcb4  aports-build.confd"

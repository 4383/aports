--- ./mozglue/misc/StackWalk.cpp.orig
+++ ./mozglue/misc/StackWalk.cpp
@@ -42,7 +42,7 @@
 #endif
 
 #if (defined(linux) && \
-     ((defined(__GNUC__) && (defined(__i386) || defined(PPC))) || \
+     ((defined(__GLIBC__) && (defined(__i386) || defined(PPC))) || \
       defined(HAVE__UNWIND_BACKTRACE)))
 #define MOZ_STACKWALK_SUPPORTS_LINUX 1
 #else

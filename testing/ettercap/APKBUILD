# Contributor: Leonardo Arena <rnalrd@alpinelinux.org>
# Maintainer:
pkgname=ettercap
pkgver=0.7.6
pkgrel=0
pkgdesc="Comprehensive suite for man in the middle attacks"
url="http://ettercap.sourceforge.net/"
arch="all"
license="GPL2+"
depends=
depends_dev=
makedepends="$depends_dev autoconf automake bison cmake curl-dev flex
	ghostscript groff libnet-dev libpcap-dev ncurses-dev openssl-dev"
install=
subpackages="$pkgname-doc"
source="http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz"

_builddir="$srcdir"/$pkgname-$pkgver
prepare() {
	cd "$_builddir"
	mkdir build && cd build
}

build() {
	cd "$_builddir"/build
	cmake \
	 -D ENABLE_GTK=OFF \
	 -D CMAKE_INSTALL_PREFIX=/usr \
	 -D INSTALL_PREFIX=/usr \
	 -D CMAKE_BUILD_TYPE=RELEASE \
	 ../
	#./configure --prefix=/usr \
	#	--sysconfdir=/etc \
	#	--mandir=/usr/share/man \
	#	--infodir=/usr/share/info \
	#	--disable-gtk \
	#	--enable-plugins \
	#	--enable-https
	make || return 1
}

package() {
	cd "$_builddir"/build
	make DESTDIR="$pkgdir" install || return 1
}

md5sums="7c5f5e1fd4002afdfd13765ef92866e1  ettercap-0.7.6.tar.gz"
sha256sums="c9bfcac179964ba449138652655dee0e1db01104ec8937a8064c83ee1b727f27  ettercap-0.7.6.tar.gz"
sha512sums="1e147278e86341fcf887457e029250fd675b6eb577dccbbbeed5e9b478d4b7ba1fbe5deb1ea39d602809bb48de15fc37e82643680a210a2ad6ea510cea4b68c4  ettercap-0.7.6.tar.gz"

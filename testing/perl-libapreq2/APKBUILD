# Contributor: Francesco Colista <francesco.colista@gmail.com>
# Maintainer: Francesco Colista <francesco.colista@gmail.com>
pkgname=perl-libapreq2
_pkgreal=libapreq2
pkgver=2.13
pkgrel=0
pkgdesc="Perl module for libapreq2"
url="http://search.cpan.org/dist/libapreq2/"
arch="all"
license="GPL PerlArtistic"
cpandepends=""
cpanmakedepends=""
depends="$cpandepends"
subpackages="$pkgname-dev"
makedepends="perl-extutils-xsbuilder libtool apache2-mod-perl-dev expat-dev apr-dev"
source="http://search.cpan.org/CPAN/authors/id/I/IS/ISAAC/$_pkgreal-$pkgver.tar.gz"
_builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
        local i
        cd "$_builddir"
        for i in $source; do
                case $i in
                *.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
                esac
        done
}

build() {
        cd $_builddir
		./configure \
		--with-apache2-apxs=/usr/bin/apxs \
		--with-apache2-httpd=/usr/sbin/httpd  
        make || return 1
}

package() {
        cd $_builddir
        make DESTDIR="$pkgdir" INSTALLDIRS="vendor" install
	find "$pkgdir" -name mod_apreq2.la -delete
	find "$pkgdir" -name libapreq2.la -delete
	find "$pkgdir" -name perllocal.pod -delete
	find "$pkgdir" -name .packlist -delete
}

md5sums="c11fb0861aa84dcc6cd0f0798b045eee  libapreq2-2.13.tar.gz"
sha256sums="5731e6833b32d88e4a5c690e45ddf20fcf969ce3da666c5627d775e92da0cf6e  libapreq2-2.13.tar.gz"
sha512sums="54553cb90c0d3f6fb34ff19364c5804976c4aff1bae551ae051fdd06f41695770f1e285c40e03dbd93ae738adc332f38f1a1994167598364071feaec833fdf05  libapreq2-2.13.tar.gz"

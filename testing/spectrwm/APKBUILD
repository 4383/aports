# Contributor: Gabriel Ruse <garuse@gmail.com>
# Maintainer: Gabriel Ruse <garuse@gmail.com>
pkgname=spectrwm
pkgver=2.7.2
pkgrel=0
pkgdesc="A small dynamic tilling window manager for X11"
url="https://github.com/conformal/spectrwm/wiki"
arch="all"
license="ICS"
depends="dmenu"
depends_dev=""
makedepends="$depends_dev bsd-compat-headers libxcursor-dev libxft-dev 
	libxt-dev libxrandr-dev libxcb-dev xcb-util-cursor-dev 
	xcb-util-keysyms-dev xcb-util-wm-dev libxkbcommon-dev"
install="$pkgname.post-install"
subpackages="$pkgname-doc"
source="https://github.com/conformal/spectrwm/archive/SPECTRWM_2_7_2.zip"

_builddir="$srcdir/${pkgname}-$(echo ${pkgname}_${pkgver}|tr a-z. A-Z_)/linux"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	make || return 1
}

package() {
	cd "$_builddir"
	make PREFIX=/usr DESTDIR="$pkgdir/" install || return 1

	mkdir -p "$pkgdir/usr/share/doc/$pkgname"
	install -d "$pkgdir/usr/share/man/man1"
	install -m644 ../*.1 "$pkgdir"/usr/share/man/man1/ || return 1
	install -m644 ../*.conf "$pkgdir"/usr/share/doc/"$pkgname" || return 1
	install -m644 ../baraction.sh ../initscreen.sh ../screenshot.sh \
		"$pkgdir"/usr/share/doc/"$pkgname" || return 1
}

md5sums="d5f5a73278b384e08e6ffebbaa858a94  SPECTRWM_2_7_2.zip"
sha256sums="273db87f4ad9b6da44c3cd237836452dfff0c862d307cd53490ddff7dd7e8468  SPECTRWM_2_7_2.zip"
sha512sums="0c42eba060aa520c16fb0474a8922a62f9ad74815ce204030e97355bcf8f4b0a05c7ff33f2f5f2ab50186834b66c553e1403c7e1d86a8f8d9e8fe4c051ab84d3  SPECTRWM_2_7_2.zip"

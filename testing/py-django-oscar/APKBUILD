# Contributor: Kaarle Ritvanen <kaarle.ritvanen@datakunkku.fi>
# Maintainer:
pkgname=py-django-oscar
pkgver=1.1
pkgrel=1
pkgdesc="Domain-driven e-commerce for Django"
url=http://oscarcommerce.com/
arch=noarch
license=BSD
depends="py-babel py-django py-django-compressor py-django-extra-views
         py-django-haystack py-django-sorl-thumbnail py-django-tables2
         py-django-treebeard py-django-widget-tweaks py-factory-boy py-mock
         py-phonenumbers py-pillow py-purl py-unidecode"
makedepends=py-setuptools
source="https://pypi.python.org/packages/source/d/django-oscar/django-oscar-$pkgver.tar.gz
	0001-make-deepcopy-work-for-Product-instances.patch
	0002-make-deepcopy-work-for-partner-strategy-instances.patch"

_builddir=$srcdir/django-oscar-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./setup.py build
}

package() {
	cd "$_builddir"
	./setup.py install --root "$pkgdir"
}

md5sums="290bc1708c3ddb61f9ee55be9a90d7c1  django-oscar-1.1.tar.gz
04bacab94b2e25af5061a50145407589  0001-make-deepcopy-work-for-Product-instances.patch
5c0149e659d2b37e89f53c4c8a6c064a  0002-make-deepcopy-work-for-partner-strategy-instances.patch"
sha256sums="33b18e7854fde53d5ef2b0f8128974a31ae3049adc3a313002e0674ba1a1c4f1  django-oscar-1.1.tar.gz
11495df8e7fa9b346c1394e7613f9526ba33aee1e29ec52470980f3c7abc699e  0001-make-deepcopy-work-for-Product-instances.patch
b101bce0a3319a589bec0329d386dbe86fdb3058d46f4b4705f46db09cbd24cf  0002-make-deepcopy-work-for-partner-strategy-instances.patch"
sha512sums="73e630389a3beea4a0555bd05f3ee301be79adb6e10e1c84ee105a2c11c683be22791f44468cddcd48b5000f355e345ba6eb7c0d9cabb0c3c4fafb94a02cdf5b  django-oscar-1.1.tar.gz
3f5293e32278c852ae2c5888bd2c127374d3445cfa557a26487c9ba4eb9f2380b9752e63c8f9875f8224e577c13cc68594566f7989142d0f7a67cb14f86b8723  0001-make-deepcopy-work-for-Product-instances.patch
475c65f8fd3bf1c35b1ba1d5922f376cfc2b9a5444f102329fce46cc86e6b302eb909b490f70df7c87e89d7804b0844fcc44493b4ad6344123530d8a9be16868  0002-make-deepcopy-work-for-partner-strategy-instances.patch"

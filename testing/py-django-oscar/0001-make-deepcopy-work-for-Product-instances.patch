From b2d85ed3d04881e2806e39c4df64db53dfbdea80 Mon Sep 17 00:00:00 2001
From: Kaarle Ritvanen <kaarle.ritvanen@datakunkku.fi>
Date: Sun, 28 Jun 2015 10:37:41 +0300
Subject: [PATCH 1/2] make deepcopy work for Product instances

required for django-widget-tweaks 1.4 compatibility
---
 src/oscar/apps/catalogue/abstract_models.py | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/src/oscar/apps/catalogue/abstract_models.py b/src/oscar/apps/catalogue/abstract_models.py
index 331b270..3d02eb5 100644
--- a/src/oscar/apps/catalogue/abstract_models.py
+++ b/src/oscar/apps/catalogue/abstract_models.py
@@ -720,7 +720,10 @@ class ProductAttributesContainer(object):
         self.initialised = False
 
     def __getattr__(self, name):
-        if not name.startswith('_') and not self.initialised:
+        if name.startswith('_'):
+            raise AttributeError(
+                _('Invalid attribute: %(attr)s') % {'attr': name})
+        if not self.initialised:
             values = self.get_values().select_related('attribute')
             for v in values:
                 setattr(self, v.attribute.code, v.value)
-- 
2.1.0


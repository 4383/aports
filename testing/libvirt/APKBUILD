# Maintainer: Leonardo Arena <rnalrd@gmail.com>
pkgname=libvirt
pkgver=0.8.5
pkgrel=0
pkgdesc="A virtualization API for several hypervisor and container systems"
url="http://libvirt.org/"
arch="x86 x86_64"
license="LGPL"
depends="python"
makedepends="device-mapper libgpg-error-dev libxml2-dev libtasn1-dev 
        lvm2-dev gnutls-dev perl zlib-dev"
install=
subpackages="$pkgname-dev $pkgname-doc"
source="http://libvirt.org/sources/$pkgname-$pkgver.tar.gz
	libvirt.confd
	libvirt.initd"

_builddir="$srcdir"/$pkgname-$pkgver

#prepare() {
#	cd "$_builddir"
#	# apply patches here
#}

build() {
	cd "$_builddir"
	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--libexec=/usr/lib/"$pkgname"
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install
	install -D -m755 $srcdir/$pkgname.initd $pkgdir/etc/init.d/libvirtd
	install -D -m755 $srcdir/$pkgname.confd $pkgdir/etc/conf.d/libvirtd
}

md5sums="92a96b3e534209a6103fa7a4bee9fbc1  libvirt-0.8.5.tar.gz
1c84a7baeafe0a7f4e9d7ae5180311b7  libvirt.confd
3d32c12642cb9a84baf019c7b0971755  libvirt.initd"

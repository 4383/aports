# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
_luaver=5.2
pkgname="lua-md5"
_name="md5"
pkgver=1.2
pkgrel=1
pkgdesc="Basic cryptographic facilities for Lua $_luaver"
url="http://www.keplerproject.org/md5/"
arch="all"
license="MIT"
depends=""
makedepends="lua$_luaver-dev"
source="lua-md5-$pkgver.tar.gz::https://github.com/keplerproject/md5/archive/v$pkgver.tar.gz"

_builddir="$srcdir"/md5-$pkgver
prepare() {
	cd "$_builddir"
	sed -i -e "s:^PREFIX=.*:PREFIX=/usr:" \
		-e "s/5.1/5.2/" \
		config || return 1
	rm src/*.o
}

build() {
	cd "$_builddir"
	make CFLAGS="$CFLAGS $(pkg-config --cflags lua$_luaver)" || return 1
}

package() {
	cd "$_builddir"
	make PREFIX="$pkgdir"/usr install
}

md5sums="c166f8a983401802a86655a8c733441e  lua-md5-1.2.tar.gz"
sha256sums="3c016da2cf0cfeb5dfdcf3bea82b64935c4faa6eec32ae164c48d870b4583ffa  lua-md5-1.2.tar.gz"
sha512sums="1d0925351b4b774581f78147b7dd44df649eec2bc8397db991149feaf1f16c8f26d4b0fce6d8463be656115cebf605339ba8da851bc50d1ae1da8033d4ed564d  lua-md5-1.2.tar.gz"

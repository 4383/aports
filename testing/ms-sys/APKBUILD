# Contributor: Fabian Affolter <fabian@affolter-engineering.ch>
# Maintainer: Fabian Affolter <fabian@affolter-engineering.ch>
pkgname=ms-sys
pkgver=2.4.0
pkgrel=0
pkgdesc="A tool for creating Microsoft compatible boot records"
url="http://ms-sys.sourceforge.net/"
arch="all"
license="GPL2+"
depends=""
depends_dev=""
install=""
subpackages="$pkgname-doc"
source="http://downloads.sourceforge.net/ms-sys/ms-sys-$pkgver.tar.gz
	nls.patch"

_builddir="$srcdir"/ms-sys-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	make PREFIX=/usr EXTRA_CFLAGS="-DNO_LIBINTL_OR_GETTEXT" \
		|| return 1
}

package() {
	cd "$_builddir"
	make PREFIX=/usr MANDIR=/usr/share/man DESTDIR="$pkgdir" install \
		|| return 1
	rm -rf "$pkgdir"/usr/lib/*.la "$pkgdir"/usr/share/locale
}

md5sums="6742dd1a058b1ce32cb991853d9d6bec  ms-sys-2.4.0.tar.gz
18e492b682b13f0f5be11b580bfa7788  nls.patch"
sha256sums="afcfefb52350f632bbd4671c3f97df09e42a60d0de3e56d42682450c7ebf689e  ms-sys-2.4.0.tar.gz
4248b28fed190bd2e99f5a1b98408493a3e19fb1980c6380db39157f1e38bd2d  nls.patch"
sha512sums="17e2496d2e4815180b9f33fa0f206953fb3484e01c115a2e67d110fb04d421be7e694a434d991a7518579eadb9dce4e907dbd849dbaf6fb506758c425faa14ec  ms-sys-2.4.0.tar.gz
0d479c095b896779144fb5b145bfb4a0f13a7c1ddb79bd616b73912a973108c5c5697e5f53f39f6ebbe1c842f180ca984135b94baa55ffe5957c81c3657edef5  nls.patch"

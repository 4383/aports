# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=crackmapexec
_pkgname=CrackMapExec
pkgver=3.1.3
pkgrel=1
pkgdesc="A swiss army knife for pentesting Windows/Active Directory environments"
url="https://github.com/byt3bl33d3r/CrackMapExec"
arch="noarch"
license="custom"
depends="python2 py-asn1 py-impacket py-netaddr py2-crypto 
	py2-openssl py-msgpack py-requests py2-termcolor py-gevent"
makedepends="python2-dev py-setuptools"
install=""
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/byt3bl33d3r/$_pkgname/archive/v$pkgver.tar.gz"
builddir="$srcdir/$_pkgname-$pkgver"

build() {
	cd "$builddir"
	python2 setup.py build || return 1
}

package() {
	cd "$builddir"
	python2 setup.py install --prefix=/usr --root="$pkgdir" || return 1
	install -Dm0644 LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
}

md5sums="b1f58213e8082a4223d2a5f5f35ac4cf  crackmapexec-3.1.3.tar.gz"
sha256sums="8019f0ddd08b7468220b6950f4a33463844c1576ad7a00d9a815af6e21a3301c  crackmapexec-3.1.3.tar.gz"
sha512sums="26410e404e177fb4881e8ce61cde560f470c1beb01ef68010cb08824aebf0b28ccc20daad5730cadc5eef92bbc9a69da71c962049eb35fbea1ad4f0b6134855e  crackmapexec-3.1.3.tar.gz"

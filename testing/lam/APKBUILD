# Maintainer: Leonardo Arena <rnalrd@alpinelinux.org>
pkgname="lam"
_realname="ldap-account-manager"
pkgver="4.2"
pkgrel=0
pkgdesc="PHP webfrontend for managing various account types in an LDAP directory in an abstract way"
url="https://www.ldap-account-manager.org"
arch="noarch"
license="GPL2"
depends="php php-ldap php-gettext php-json php-xml php-mcrypt php-zip"
depends_dev=
makedepends="$depends_dev"
install="$pkgname.post-install $pkgname.post-upgrade"
subpackages="$pkgname-doc"
source="http://downloads.sourceforge.net/$pkgname/$_realname-$pkgver.tar.gz
	lam-change-config-file-location.patch
	"


_builddir="$srcdir"/$_realname-$pkgver

prepare() {
	cd "$_builddir"
	patch -p1 < ../lam-change-config-file-location.patch || exit 1
}

build() {
	return 0
}

package() {
	cd "$_builddir"
	mkdir -p "$pkgdir"/etc/lam
	mkdir -p "$pkgdir"/usr/share/webapps/lam
	mkdir -p "$pkgdir"/usr/share/doc/lam
	mv config/* "$pkgdir"/etc/lam
	mv "$pkgdir"/etc/lam/config.cfg_sample "$pkgdir"/etc/lam/config.cfg
	mv docs/* "$pkgdir"/usr/share/doc/lam
	for file in COPYING VERSION HISTORY  README
	do
		mv $file "$pkgdir"/usr/share/doc/lam
	done
	cp -r * "$pkgdir"/usr/share/webapps/lam
}

md5sums="7a840a98c9aec2a9c21796f0491a6f21  ldap-account-manager-4.2.tar.gz
38394df494fbeb764368640b6d20fabd  lam-change-config-file-location.patch"
sha256sums="992d05c3f05befdb2f36513e4674d67d1408a9249982a8526df4e710fc5c71e5  ldap-account-manager-4.2.tar.gz
ff47a3a4fa0f0eda8d1ee5ddbcd5d58d3a47eee10c924c478217c4d52ce3bceb  lam-change-config-file-location.patch"
sha512sums="b0599578e58e801879128b511bcb0acd4c71a53d5134a13cf3397730042cc7d42adbdc6affa9be3dfdd20bc42ccfc27edc0ca64ec10cd80dfa91f5916af52ba8  ldap-account-manager-4.2.tar.gz
aa501ce1f60cc9a4a8c5b73d316cde647a9b1275c1e5f62f166beb999450ebaeefa9f8e3e31d2f1ae51c2de322e12c4c63743a522466c026f019b217b8ddb75e  lam-change-config-file-location.patch"

# Contributor:
# Maintainer:
pkgname=chntpw
pkgver=110511
pkgrel=0
pkgdesc="Change passwords in Windows SAM files"
url="http://pogostick.net/~pnh/ntpasswd/"
arch="all"
license="GPLv2"
depends=""
depends_dev=""
makedepends="$depends_dev openssl-dev"
install=""
subpackages=""
source="http://pogostick.net/~pnh/ntpasswd/chntpw-source-$pkgver.zip"

_builddir="$srcdir"/chntpw-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	make CC="$CC" CFLAGS="$CFLAGS -DUSEOPENSSL" LIBS="-lcrypto" \
		chntpw cpnt reged || return 1
}

package() {
	cd "$_builddir"
	install -d "$pkgdir"/usr/bin
	install chntpw cpnt reged "$pkgdir"/usr/bin/
}

md5sums="a3fb358d1adec589cd6bc8dedf68896c  chntpw-source-110511.zip"

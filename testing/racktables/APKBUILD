# Contributor: Leonardo Arena <rnalrd@alpinelinux.org>
# Maintainer:
pkgname=racktables
_realname=RackTables
pkgver=0.20.5
pkgrel=1
pkgdesc="Server room asset management"
url="http://racktables.org"
arch="noarch"
license="GPL"
depends="php php-bcmath php-gd php-mysql php-pdo_mysql php-json"
depends_dev=
makedepends="$depends_dev"
install="$pkgname.post-install"
subpackages="$pkgname-doc"
source="http://downloads.sourceforge.net/project/$pkgname/$_realname-${pkgver}.tar.gz
	index-racktables.php
	"


_builddir="$srcdir"/$_realname-$pkgver

prepare() {
	cd "$_builddir"
	# apply patches here
	return 0
}

build() {
	cd "$_builddir"
	#make DESTDIR="$pkgdir"
	return 0
}

package() {
	cd "$_builddir"
	export prefix="/usr/share/webapps"
	export datadir="${prefix}"
	export docdir="/usr/share/doc/RackTables"
	make DESTDIR="${pkgdir}" install
	make DESTDIR="${pkgdir}" install-docs
	mkdir -p "$pkgdir"/etc/racktables
	touch "$pkgdir"/etc/racktables/secret.php
	install -D -m644 "$srcdir"/index-racktables.php \
	"$pkgdir"/usr/share/webapps/RackTables/wwwroot/index-racktables.php
}

md5sums="635d1e86dc175340c5cbda95aa55167d  RackTables-0.20.5.tar.gz
e12445ea9d2c1b563774294e8b0dc3b9  index-racktables.php"
sha256sums="4d90c08ab8451eccaa3c925dd935a449c92874c996519b5b5e0775ad92627d77  RackTables-0.20.5.tar.gz
85049288336171bd6e462d1440325065eec9dcbf2983cf6ade22d87d83b7cc99  index-racktables.php"
sha512sums="6da6df0fd48149dc8d5a1a9892bc9c301ff7604b185e672ed3a52ed54c6ce2da6c968fad46bacfe0763eae11f58f5978521f7638de38403a00bd523202c336ce  RackTables-0.20.5.tar.gz
f21cc03f2fe2b519d5f6a294267686578985ac3c5bf1aaa7c89cf9c8a21de9831db4116708c046a41f0aaaea3f0eb3677e0b0af67477ac2329d04295d9b18e14  index-racktables.php"

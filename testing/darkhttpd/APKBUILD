# Contributor: Alan Messias Cordeiro <alancordeiro@gmail.com>
# Maintainer: Alan Messias Cordeiro <alancordeiro@gmail.com>
pkgname=darkhttpd
pkgver=1.9
pkgrel=1
pkgdesc="A simple, single-threaded, static content webserver"
url="http://unix4lyfe.org/darkhttpd/"
arch="all"
license="BSD"
depends=""
depends_dev=""
makedepends="$depends_dev"
install=""
subpackages=""
source="http://unix4lyfe.org/darkhttpd/darkhttpd-$pkgver.tar.bz2
	$pkgname.initd"

_builddir="$srcdir/$pkgname-$pkgver"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	make || return 1
}

package() {
	# install binary
        cd "$_builddir"
	install -Dm755 $pkgname "$pkgdir"/usr/bin/$pkgname || return 1
	install -d "$pkgdir"/var/www/localhost/htdocs || return 1

	# install init.d
        install -Dm755 "$srcdir"/$pkgname.initd "$pkgdir"/etc/init.d/$pkgname || return 1
}

md5sums="156f239af542028c3fb5c2248aa0db8d  darkhttpd-1.9.tar.bz2
cf157b9c79663870d5ad3fb7a43ad9d3  darkhttpd.initd"
sha256sums="33ef622069dc167bcf85e46482388f2d6555e25796f64a6c5b215d939f2b41c8  darkhttpd-1.9.tar.bz2
3b8482966d2f5f9fb1e422864af458d0ce5a59a0b08950930cfc1059e21eae0a  darkhttpd.initd"
sha512sums="dba843a5cdd1825666f1a4f2ae578e694c69f6f3d4e72586ab6cb96ef35e5581295ccbdff80bb8f58aba91f4c3342fe213604cb8eac5cbbd49d34bc8a0d795e4  darkhttpd-1.9.tar.bz2
c8956e2a7e85df03a449caac94a5de661fb8051a01ffc8d36d456175c299c5ef9633b5a31247bb11ba5f218438b66f845fce007df33ef8ff60e6582df2c3d161  darkhttpd.initd"

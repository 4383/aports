# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=flashcache-utils
pkgver=2.1
pkgrel=0
pkgdesc="Userspace utilities for flashcache"
url="https://github.com/facebook/flashcache"
arch="all"
license="GPL"
depends=""
depends_dev=""
makedepends="$depends_dev"
install=""
subpackages=""
source="flashcache-$pkgver.tar.gz::https://github.com/facebook/flashcache/archive/$pkgver.tar.gz"

_builddir="$srcdir"/flashcache-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"/src
	make -C utils
}

package() {
	cd "$_builddir"/src/utils
	make install DESTDIR="$pkgdir" || return 1
}

md5sums="b05b48124e4a542122a9e7874c54fafe  flashcache-2.1.tar.gz"
sha256sums="e8d251411fd703383d46e10a80a0ad8b8b52cdf1b172e58001779085c25fb798  flashcache-2.1.tar.gz"
sha512sums="b65f2f0a2170b312ca5e7720d2206574f25d2f6bac3ae3531ba171b0e979a1f42045dad24ee8c8eb8c9d884982d0e6708b3d9dd5cba1fa40247d2adb5c8d89a0  flashcache-2.1.tar.gz"

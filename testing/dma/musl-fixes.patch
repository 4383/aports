diff -upr dma-0.11.orig/dfcompat.c dma-0.11/dfcompat.c
--- dma-0.11.orig/dfcompat.c	2016-02-29 04:26:15.181591094 +0100
+++ dma-0.11/dfcompat.c	2016-02-29 04:29:34.367403004 +0100
@@ -105,7 +105,7 @@ reallocf(void *ptr, size_t size)
 
 #ifndef HAVE_GETPROGNAME
 
-#ifdef __GLIBC__
+#ifdef __linux__
 
 #include <errno.h>
 
diff -upr dma-0.11.orig/dma.h dma-0.11/dma.h
--- dma-0.11.orig/dma.h	2016-02-29 04:26:15.181591094 +0100
+++ dma-0.11/dma.h	2016-02-29 04:26:53.534759844 +0100
@@ -38,7 +38,7 @@
 #define DMA_H
 
 #include <sys/types.h>
-#include <sys/queue.h>
+#include <bsd/sys/queue.h>
 #include <sys/socket.h>
 #include <arpa/nameser.h>
 #include <arpa/inet.h>
diff -upr dma-0.11.orig/dns.c dma-0.11/dns.c
--- dma-0.11.orig/dns.c	2016-02-29 04:26:15.181591094 +0100
+++ dma-0.11/dns.c	2016-02-29 04:34:32.039446395 +0100
@@ -42,8 +42,10 @@
 #include <resolv.h>
 #include <string.h>
 #include <stdlib.h>
+#include <math.h>
 
 #include "dma.h"
+#define roundup(x, y)  ((((x) + ((y) - 1)) / (y)) * (y))
 
 static int
 sort_pref(const void *a, const void *b)

--- ./nslink.c.orig
+++ ./nslink.c
@@ -2864,7 +2864,7 @@
 
         info = nrp_table[line];
 
-        DebugOpen("ttySI%d (count=%d) enter\n", line, info->port.count);
+        DebugOpen("ttySI%d (count=%d) enter\n", line, info->port.count.counter);
 
         if (!info->si) {
                 DebugOpenErr("ttySI%d info->si==NULL: return -ENODEV\n", line);
@@ -2880,9 +2880,9 @@
         ret = tty_port_open(&info->port, tty, filp);
 
         if (ret && ret != -ERESTARTSYS)
-                DebugOpenErr("ttySI%d (count=%d) return %d\n", line, info->port.count,ret);
+                DebugOpenErr("ttySI%d (count=%d) return %d\n", line, info->port.count.counter,ret);
         else
-                DebugOpen("ttySI%d (count=%d) return %d\n", line, info->port.count,ret);
+                DebugOpen("ttySI%d (count=%d) return %d\n", line, info->port.count.counter,ret);
         return ret;
 }
 
@@ -2925,9 +2925,9 @@
 static void nrp_close(struct tty_struct *tty, struct file *filp)
 {
         struct nr_port *info = (struct nr_port *) tty->driver_data;
-        DebugOpen("ttySI%d (count=%d) enter\n", info->line, info->port.count);
+        DebugOpen("ttySI%d (count=%d) enter\n", info->line, info->port.count.counter);
         tty_port_close(&info->port, tty, filp);
-        DebugOpen("ttySI%d (count=%d) return\n", info->line, info->port.count);
+        DebugOpen("ttySI%d (count=%d) return\n", info->line, info->port.count.counter);
 }
 
 static void nrp_set_termios(struct tty_struct *tty, struct ktermios *old_termios)
@@ -4786,7 +4786,7 @@
                 info = nrp_table[i + si->base_port];
                 if (!info)
                         continue;
-                if (info->port.count) {
+                if (info->port.count.counter) {
                         DebugOpenErr("Attempt to free_si_box() with port open\n");
                         return -EBUSY;
                 }
@@ -5008,7 +5008,7 @@
         for (i=0; i<NumElements(nrp_table); ++i) {
                 struct nr_port *info = nrp_table[i];
                 if (info) {
-                        seq_printf(m,"%3d %4d   %02x %6d   ", i, info->port.count, info->rsmode, info->baud_rate);
+                        seq_printf(m,"%3d %4d   %02x %6d   ", i, info->port.count.counter, info->rsmode, info->baud_rate);
 
                         // Ctrl ...
                         seq_printf(m, (info->control_settings & SC_DATABITS_7) ? "7" : "8");

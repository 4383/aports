# Contributor: Stuart Cardall <developer@it-offshore.co.uk>
# Maintainer: Stuart Cardall <developer@it-offshore.co.uk>
pkgname=libsodium
pkgver=0.7.0
pkgrel=0
pkgdesc="P(ortable|ackageable) NaCl-based crypto library"
url="https://github.com/jedisct1/libsodium"
arch="all"
license="custom:ISC"
subpackages="$pkgname-dev"
source="https://github.com/jedisct1/$pkgname/releases/download/$pkgver/$pkgname-$pkgver.tar.gz"

_builddir="$srcdir"/$pkgname-$pkgver

build() {
        cd "$_builddir"
	./configure \
                --build=$CBUILD \
                --host=$CHOST \
                --prefix=/usr \
                || return 1
        make || return 1
}

check() {
	cd "$pkgname-$pkgver"
	make check
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	rm "$pkgdir"/usr/lib/*.la
}

md5sums="b9029bf810c4b5a8acc3afec1286a36a  libsodium-0.7.0.tar.gz"
sha256sums="4ccaffd1a15be67786e28a61b602492a97eb5bcb83455ed53c02fa038b8e9168  libsodium-0.7.0.tar.gz"
sha512sums="3b1a976ac83e2a740cc462f0589abcfe85604357e601f976b3d7f9d2aec7fca4705871f0fb937d6f9321102a5cc80b0cee6ec9c7864ce9d2c4735e20885b39ff  libsodium-0.7.0.tar.gz"

# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=ddclient
pkgver=3.8.3
pkgrel=0
pkgdesc="Update dynamic DNS entries for accounts on many dynamic DNS services, with IPv6 patch"
url="https://ddclient.sourceforge.net"
arch="noarch"
license="GPL2"
depends="perl-io-socket-ssl perl-digest-sha1 perl-getopt-long net-tools"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/wimpunk/$pkgname/archive/v$pkgver.tar.gz
ddclient-ipv6.patch"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	return 0
}

package() {
	cd "$builddir"
	install -Dm755 $pkgname "$pkgdir"/usr/sbin/$pkgname
	install -Dm600 sample-etc_$pkgname.conf "$pkgdir"/etc/$pkgname/$pkgname.conf
	install -Dm755 sample-etc_rc.d_init.d_ddclient.alpine "$pkgdir"/etc/init.d/$pkgname
	install -d "$pkgdir"/var/cache/$pkgname
}

doc() {
	pkgdesc="Docuemntation and Sample files for $pkgname"
	cd "$builddir"
	install -Dm644 README.ssl "$subpkgdir"/usr/share/doc/$pkgname/README.ssl
	install -Dm644 COPYING "$subpkgdir"/usr/share/licenses/$pkgname/COPYING
	install -Dm644 sample-etc_cron.d_$pkgname "$subpkgdir"/usr/share/doc/$pkgname/sample-etc_cron.d_$pkgname
	install -Dm644 sample-etc_dhclient-exit-hooks "$subpkgdir"/usr/share/doc/$pkgname/sample-etc_dhclient-exit-hooks
}

md5sums="a14973dd829180ef2cba96ff327b6fe0  ddclient-3.8.3.tar.gz
103f8ccab734f84a1220e9d2afc23457  ddclient-ipv6.patch"
sha256sums="a7a39ff7c5092564a7d22f86cfcb747bad30b8c4d8bef30b518eded1f91cba43  ddclient-3.8.3.tar.gz
311ebaac97022c17ab2d4776d0d023df49da67a58a8c370c262cdec72c74b8f4  ddclient-ipv6.patch"
sha512sums="df305c9f54559de089edc9fd1c19b36181048ded0a28fe7f6c2a15f624c692385232391943d85159dd1a60c0cd15484ef43340dd6884b6de44d421df720bc3c7  ddclient-3.8.3.tar.gz
c20d97f3164560e794fc82cb8099c0248279377f43e123aaec30ef6f66e7fe8660f559b42110449487d5063ffa1605520d56cb9f511347ff6787ad781fab1698  ddclient-ipv6.patch"

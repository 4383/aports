# Contributor: Natanael Copa <ncopa@alpinelinux.org>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
_luaver=5.2
pkgname=lua${_luaver}-stringy
pkgver=0.4
pkgrel=0
pkgdesc="Lua string utility library"
url="https://code.google.com/p/bpbio/downloads/list"
arch="all"
license="MIT"
depends=""
makedepends="lua${_luaver}-dev"
install=""
subpackages=""
source="lua-stringy-$pkgver.tar.gz::https://github.com/ncopa/lua-stringy/archive/v$pkgver.tar.gz"

_builddir="$srcdir"/lua-stringy-$pkgver/stringy
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	make CC="$CC" CFLAGS="$CFLAGS" LDFLAGS="$LDFLAGS" \
		LUA_PC="lua$_luaver" LUA="lua$_luaver" || return 1
}

package() {
	local _lualibdir=/usr/lib/lua/$_luaver
	cd "$_builddir"
	mkdir -p "$pkgdir"/$_lualibdir
	cp stringy.so "$pkgdir"/$_lualibdir/
}

md5sums="1c10c3c3bc800f0fb2920257ea884d1e  lua-stringy-0.4.tar.gz"
sha256sums="f953b83c9f4310aae206cb8938d89b2d659020322d2ad0778649ba707052b58b  lua-stringy-0.4.tar.gz"
sha512sums="d2607cd71d9b03bb4a8c91637a36eecebd6279c49ff8c7fdd58c0244ee1c4ccd9e26140aee9886886c7176c58f953300ebef1a2fe1a9f96bedf7e1d1c11135dd  lua-stringy-0.4.tar.gz"

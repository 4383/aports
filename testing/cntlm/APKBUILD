# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=cntlm
pkgver=0.92.3
pkgrel=1
pkgdesc="NTLM Session Response / NTLMv2 authenticating HTTP proxy"
url="http://cntlm.sourceforge.net/"
arch="all"
license="GPLv2+"
depends=""
makedepends=""
install=""
subpackages="$pkgname-doc"
source="http://downloads.sourceforge.net/project/cntlm/cntlm/cntlm%20$pkgver/cntlm-$pkgver.tar.gz
	cntlm.initd
	"
_builddir="$srcdir"/cntlm-$pkgver

prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--localstatedir=/var \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1

	install -m755 -D "$srcdir"/$pkgname.initd "$pkgdir"/etc/init.d/$pkgname
}

md5sums="0d7fcfbfbef0546306b896be246caa88  cntlm-0.92.3.tar.gz
a8614b3bcd10b8f24429a6676b787360  cntlm.initd"
sha256sums="9c3ad10924d43f7248df9ecd33cbc033afbd7ea8d9545de0d68a2782fed76298  cntlm-0.92.3.tar.gz
8023516c6f5352ece48d6241d654c51bc94e873845978184036e27340674979e  cntlm.initd"
sha512sums="64f97524f1c807dd3bad3f6c1cffb9d3315c720b086336b7379c8c6380c7c483a9c810b40e7e5ea463387476cd718a8e5fcbc1c7103d7128dfc72a8607e6fd39  cntlm-0.92.3.tar.gz
89982047495c9c62f14e2da5c076ca07942a62e9f87c0d455065c8f702412693ebdfd4e45eeb317a9a7285c4133080b0e7854607ea0daa99ff2420ec15216f97  cntlm.initd"

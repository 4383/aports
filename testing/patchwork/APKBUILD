# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=patchwork
pkgver=0_git20150420
pkgrel=0
pkgdesc="Web-based patch tracking system "
url="http://jk.ozlabs.org/projects/patchwork/"
arch="noarch"
license="GPL"
depends="py-django1.5 py-psycopg2 py-django-registration git"
depends_dev=""
makedepends="$depends_dev"
install=""
subpackages=""
source="http://dev.alpinelinux.org/archive/$pkgname/$pkgname-$pkgver.tar.gz"
giturl="git://ozlabs.org/home/jk/git/patchwork"
disturl="dev.alpinelinux.org:/archive/$pkgname/"
_builddir="$srcdir"/$pkgname-$pkgver

build() {
	cd "$_builddir"
	return 0
}

package() {
	cd "$_builddir"
	mkdir -p "$pkgdir"/etc/$pkgname
	mkdir -p "$pkgdir"/usr/share/webapps/$pkgname
	for file in apps docs htdocs lib templates tools; do
		cp -r $file "$pkgdir"/usr/share/webapps/$pkgname
	done
	cp apps/settings.py "$pkgdir"/etc/$pkgname/local_settings.py
	ln -s /etc/patchwork/local_settings.py "$pkgdir"/usr/share/webapps/patchwork/apps/local_settings.py
}

md5sums="d327c8ca2f219f597855afadaa520c1d  patchwork-0_git20150420.tar.gz"
sha256sums="769f6839f4e25321ecedaf8e7561e1a5e71e2fdb942c33aefb0798f651ed0914  patchwork-0_git20150420.tar.gz"
sha512sums="5e0f93afa3d9afbb97a7e44e355f0f6fae87e77ea8a7d960637984f8f33751a0acd937efc583e6ec6405ca3ff7eb86d100b8ae66e565961afac572fd72587a25  patchwork-0_git20150420.tar.gz"

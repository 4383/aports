# Contributor: Francesco Colista <francesco.colista@gmail.com>
# Maintainer: Francesco Colista <francesco.colista@gmail.com>
pkgname=mosh
pkgver=1.2.3
pkgrel=0
pkgdesc="mobile shell (mosh) surviving disconnects with local echo and line editing"
url="http://mosh.mit.edu"
arch="all"
license="GPL3"
depends=""
depends_dev="ncurses-dev zlib-dev openssl-dev perl perl-io-tty protobuf-dev openssh"
makedepends="$depends_dev"
install=""
subpackages="$pkgname-doc"
source="https://github.com/downloads/keithw/$pkgname/$pkgname-$pkgver.tar.gz"
_builddir="$srcdir"/$pkgname-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./configure --prefix=/usr \
		--sysconfdir=/etc
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install
}

md5sums="39c20391c84e639fcb51581c56cee762  mosh-1.2.3.tar.gz"

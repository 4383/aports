# Contributor: Łukasz Jendrysik <scadu@yandex.com>
# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=youtube-dl
pkgver=2014.12.12.1
pkgrel=0
pkgdesc="A small command-line program to download videos from YouTube."
url="http://rg3.github.io/youtube/dl/"
arch="noarch"
license="Public Domain"
depends="python>=2.5 py-setuptools ffmpeg"
subpackages=""
source="http://youtube-dl.org/downloads/$pkgver/$pkgname-$pkgver.tar.gz"

_builddir="$srcdir"/youtube-dl
prepare() {
	cd "$_builddir"
	sed -i 's|etc/bash_completion.d|share/bash-completion/completions|' setup.py || return 1
	sed -i 's|etc/fish/completions|share/fish/completions|' setup.py || return 1
}

package() {
	cd "$_builddir"
	  python setup.py install --root="$pkgdir/" --optimize=1 || return 1
	  mv "$pkgdir/usr/share/bash-completion/completions/youtube-dl.bash-completion" \
	"$pkgdir/usr/share/bash-completion/completions/youtube-dl"
install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE" || return 1
}

md5sums="47544f22833aa19facb98be77729d56f  youtube-dl-2014.12.12.1.tar.gz"
sha256sums="125875255ced92cc079d6b29ea9e97dc2907a8ed866c3e631b413838e3ac1de6  youtube-dl-2014.12.12.1.tar.gz"
sha512sums="15935712244dcd6ef37632e42fa23d52d8c7a9d2875380fd61f47603aa6e596fe6888dab99f0ba073071648eca48d5e4fd91cc61dc938a0fd4704694e106e2e2  youtube-dl-2014.12.12.1.tar.gz"

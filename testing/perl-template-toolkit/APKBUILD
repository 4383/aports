# Automatically generated by apkbuild-cpan, template 1
# Contributor: Francesco Colista <francesco.colista@gmail.com>
# Maintainer: Francesco Colista <francesco.colista@gmail.com>
pkgname=perl-template-toolkit
_pkgreal=Template-Toolkit
pkgver=2.24
pkgrel=1
pkgdesc="comprehensive template processing system"
url="http://search.cpan.org/dist/Template-Toolkit/"
arch="all"
license="GPL PerlArtistic"
cpandepends="perl-appconfig"
cpanmakedepends="   "
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/A/AB/ABW/$_pkgreal-$pkgver.tar.gz
	split_pattern.patch"

_builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	make && make test
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="c25fdab1beebf8818c2e624bc9f9d212  Template-Toolkit-2.24.tar.gz
ba157cb82e67488bf562ca9456efa346  split_pattern.patch"
sha256sums="38834aa8c249f7b7fb8b7238f086a08947ea7d472d78f1f5e2b9f3dbf49d01c8  Template-Toolkit-2.24.tar.gz
2a93ce763aa3bc2dcfcf0d5b69c2b20ad1aec5c6e44084fbf59625006f9d4250  split_pattern.patch"
sha512sums="3ea88b0d308070b6b30dd48af4f97ab285e9d67d32b6a59c17c374c620a26287eac267e1b8d901b7dacb6922ca052e3aaec561025967acf5b342200706978739  Template-Toolkit-2.24.tar.gz
d95c9e674fd1c56991fb715908eb206da53c9573e17b7a30d5b69e63cad95824726548f0da900d08a68fecd9722416fa0124f715635a0f953f1340412045f8bd  split_pattern.patch"

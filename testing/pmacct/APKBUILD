# Maintainer: Leonardo Arena <rnalrd@gmail.com>
pkgname=pmacct
pkgver=0.12.0
pkgrel=0
pkgdesc="Measure, account, classify, aggregate and export IPv4 and IPv6 traffic"
url="http://www.pmacct.net/"
license="GPL"
depends=
makedepends="libpcap-dev"
install=
subpackages=""
source="http://www.pmacct.net/$pkgname-$pkgver.tar.gz
	pmacct.initd
	pmacct.confd"

_builddir="$srcdir"/$pkgname-$pkgver

prepare() {
	cd "$_builddir"
	# apply patches here
}

build() {
	cd "$_builddir"
	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--enable-pgsql \
		--enable-64bit \
		--enable-threads \
		--enable-ulog
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install

	install -m755 -D "$srcdir"/$pkgname.initd "$pkgdir"/etc/init.d/$pkgname
	install -m644 -D "$srcdir"/$pkgname.confd "$pkgdir"/etc/conf.d/$pkgname
}

md5sums="564c3db9fdeaeb44e3bb3d958937c18c  pmacct-0.12.0.tar.gz
c2427b6a32a4eb649a075a977f5b2c42  pmacct.initd
394bf0687572261e90eecd70c33c8ede  pmacct.confd"

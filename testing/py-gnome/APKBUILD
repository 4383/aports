# Contributor: 
# Maintainer: Leonardo Arena <rnalrd@alpinelinux.org>
pkgname=py-gnome
_realname=gnome-python
pkgver=2.28.1
_basever=2.28
pkgrel=0
pkgdesc="Python interface to GNOME libraries"
url="http://pygtk.org"
arch="all"
license="LGPL"
depends=""
depends_dev="gtk+-dev libgnome-dev py-gobject-dev py-gtk-dev python-dev"
makedepends="$depends_dev"
install=""
subpackages="$pkgname-dev $pkgname-bonobo $pkgname-libgnome $pkgname-gconf\
	$pkgname-gnomevfs"
source="http://ftp.gnome.org/pub/gnome/sources/$_realname/$_basever/$_realname-$pkgver.tar.bz2"

_builddir="$srcdir"/$_realname-$pkgver

prepare() {
	cd "$_builddir"
}

build() {
	cd "$_builddir"
        ./configure --prefix=/usr \
                --sysconfdir=/etc \
                --mandir=/usr/share/man \
                --infodir=/usr/share/info
        make || return 1
}

package() {
	cd "$_builddir"
        make DESTDIR="$pkgdir" install-pkgconfigDATA || return 1
        find $pkgdir -iname *.la -delete
}

gconf() {
	pkgdesc="Python bindings for interfacing with GConf"
	cd "$_builddir"
	make -C gconf DESTDIR=$subpkgdir install || return 1
}

bonobo() {
        pkgdesc="Python bindings for interfacing with Bonobo"
        cd "$_builddir"
        make -C bonobo DESTDIR=$subpkgdir install || return 1
}

libgnome() {
	pkgdesc="Python bindings for libgnome"
	cd "$_builddir"
	make -C gnome DESTDIR=$subpkgdir install || return 1
}

# Temporarily disabled as it does not build
#gnomecanvas() {
#	pkgdesc="Python bindings for the GNOME Canvas"
#	cd "$_builddir"
#	make -C gnomecanvas DESTDIR=$subpkgdir install || return 1
#}

gnomevfs() {
	pkgdesc="Python bindings for interacting with gnome-vfs"
	cd "$_builddir"
	make -C gnomevfs DESTDIR=$subpkgdir install || return 1
}

md5sums="a17ad952813ed86f520de8e07194a2bf  gnome-python-2.28.1.tar.bz2"

# Contributor: Sören Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer: Sören Tempel <soeren+alpine@soeren-tempel.net>
pkgname=cloc
pkgver=1.74
pkgrel=0
pkgdesc="Count lines of code"
url="https://github.com/AlDanial/cloc"
arch="noarch"
license="GPL2"
depends="perl perl-algorithm-diff perl-regexp-common"
makedepends=""
subpackages="$pkgname-doc"
source="https://github.com/AlDanial/$pkgname/releases/download/$pkgver/$pkgname-$pkgver.tar.gz
	disable-submodule-tests.patch"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	make -C "$builddir"/Unix
}

check() {
	make -C "$builddir"/Unix test
}

package() {
	cd "$builddir"/Unix
	make DESTDIR="$pkgdir" install

	mkdir -p "$pkgdir"/usr/share/doc/$pkgname/
	install -Dm644 NEWS README AUTHORS \
		"$pkgdir"/usr/share/doc/$pkgname/
}

sha512sums="456ff10c50673326e0b80d2e0b5965fba19c5c868e880108647d5182e048e62bdd734ce485386a561163d8dab81551101cbc5dcc13088400fe0a14ad500e1cbf  cloc-1.74.tar.gz
0da21579aee7b073dcff93767289e2ae50dbde50fdfd4b5dc36264cc0aa52be1f42b80f18378e264eef5a0c81eb447013343247781bc571f78c226a5c28e93c2  disable-submodule-tests.patch"

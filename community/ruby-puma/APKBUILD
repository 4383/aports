# Contributor: Carlo Landmeter <clandmeter@gmail.com>
# Maintainer:
pkgname=ruby-puma
_gemname=puma
pkgver=3.2.0
pkgrel=1
pkgdesc="Puma is a simple, fast, threaded, and highly concurrent HTTP 1.1 server"
url="http://puma.io/"
arch="all"
license="BSD"
depends="ruby"
depends_dev=""
makedepends="$depends_dev ruby-dev"
install=""
subpackages=""
source="http://gems.rubyforge.org/gems/$_gemname-$pkgver.gem"

build() {
	return 0
}

package() {
        local _gemdir="$(ruby -rubygems -e'puts Gem.default_dir')"
        local _geminstdir=$_gemdir/gems/$_gemname-$pkgver
        mkdir -p "$pkgdir" || return 1

        gem install --local --install-dir "$pkgdir"/$_gemdir \
                --ignore-dependencies --verbose --no-rdoc --no-ri \
                "$srcdir"/$_gemname-$pkgver.gem || return 1
        rm -rf "$pkgdir"/$_gemdir/cache \
                "$pkgdir"/$_geminstdir/ext \
                "$pkgdir"/$_geminstdir/.require_paths
	mkdir -p "$pkgdir"/usr/bin
	ln -s $_gemdir/bin/puma "$pkgdir"/usr/bin/ || return 1
	ln -s $_gemdir/bin/pumactl "$pkgdir"/usr/bin/ || return 1
}
md5sums="e1c66fa8d134bef5cfd680612238d725  puma-3.2.0.gem"
sha256sums="eca7283e0558c3c6229b169c181973cfe4568a97955bacdeb2de793962b3ebae  puma-3.2.0.gem"
sha512sums="58452a5460295795bb8200a907c87dbad7f173695fddc7d155a492f274a83d353d79d007eb9e88b73249bef1fe3737f006bf10ad2f4266b3dee28a7e8c86dbb8  puma-3.2.0.gem"

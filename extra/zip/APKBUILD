# Maintainer: Carlo Landmeter <clandmeter at gmail.com>
pkgname=zip
pkgver=3.0
pkgrel=0
pkgdesc="Creates PKZIP-compatible .zip files"
url="http://www.info-zip.org/pub/infozip/Zip.html"
license="AS IS"
depends="uclibc"
makedepends=""
source="ftp://ftp.info-${pkgname}.org/pub/info${pkgname}/src/${pkgname}30.zip
10-zip-3.0-build.patch
20-zip-3.0-exec-stack.patch
30-zip-3.0-pic.patch"
subpackages="$pkgname-doc"

build () 
{ 
	cd "${srcdir}/${pkgname}30"
        for i in ../*.patch; do
		msg "Applying $i"
		patch -p0 < $i || return 1
	done
	make -f unix/Makefile LOCAL_ZIP="${CFLAGS} ${CPPFLAGS}" prefix=/usr generic || return 1
	make -f unix/Makefile prefix=${pkgdir}/usr MANDIR=${pkgdir}/usr/share/man install
}

md5sums="e88492c8abd68fa9cfba72bc08757dba  zip30.zip
397f4e5e8e1df5ea87b576b6214ec07c  10-zip-3.0-build.patch
aad98faa5fb4e608d6d898aba1a8ab27  20-zip-3.0-exec-stack.patch
da61b00db253904323321b0e1ddd5301  30-zip-3.0-pic.patch"

# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=newt
pkgver=0.52.8
pkgrel=0
pkgdesc="Redhat's Newt windowing toolkit development files"
url="http://www.redhat.com/"
license="LGPL-2"
depends="uclibc slang popt ncurses"
makedepends="slang-dev popt-dev python-dev ncurses-dev"
subpackages="$pkgname-dev $pkgname-doc"
source="http://distfiles.gentoo.org/distfiles/$pkgname-$pkgver.tar.gz
	$pkgname-0.52.7-notcl.patch
	"

build() {
	cd "$srcdir"/$pkgname-$pkgver
	for i in ../*.patch; do
		msg "Applying $i..."
		patch -p1 < $i || return 1
	done

	sed -i -e 's:-lslang:-lslang -lncurses:g' \
		-e 's:instroot:DESTDIR:g' Makefile.in || return 1

	./configure --prefix=/usr \
		--without-gpm \
		--without-tcl \
		--disable-nls
	make -j1 RPM_OPT_FLAGS="$CFLAGS" || return 1
	# TODO: fix the make install target to not try install po files
	make -j1 DESTDIR="$pkgdir" prefix="/usr" RPM_OPT_FLAGS="ERROR" install \
		||  true
}
md5sums="0daef93590e9b6fd3419c871e75f9fa7  newt-0.52.8.tar.gz
6780156f3b66a3f05efe1ee821617031  newt-0.52.7-notcl.patch"

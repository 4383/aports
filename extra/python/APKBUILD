# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=python
pkgver=2.6.1
pkgrel=1
pkgdesc="A high-level scripting language"
url="http://www.python.org"
license="custom"
subpackages="$pkgname-dev $pkgname-doc"
depends="db expat openssl zlib ncurses"
makedepends="db-dev expat-dev openssl-dev zlib-dev ncurses-dev"
source="http://www.$pkgname.org/ftp/$pkgname/$pkgver/Python-$pkgver.tar.bz2
	$pkgname-2.6-internal-expat.patch
	"

build() {
	cd "$srcdir/Python-$pkgver"
	for i in ../*.patch; do
		msg "Apply $i"
		patch -p1 < $i || return 1
	done

	./configure --prefix=/usr \
		--enable-shared \
		--with-threads \
		--enable-unicode \
		--disable-gdbm

	make || return 1
	make DESTDIR="$pkgdir" install
	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}
md5sums="e81c2f0953aa60f8062c05a4673f2be0  Python-2.6.1.tar.bz2
9d64df5e0a6aed149a792c7bff16e3d9  python-2.6-internal-expat.patch"

# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=subversion
pkgver=1.6.2
pkgrel=0
pkgdesc="Replacement for CVS, another versioning system (svn)"
url="http://subversion.tigris.org/"
license="apache bsd"
depends=
makedepends="apr-dev apr-util-dev expat-dev neon-dev openssl-dev zlib-dev
	e2fsprogs-dev sqlite-dev"
install="$pkgname.pre-install"
subpackages="$pkgname-dev $pkgname-doc"
source="http://svn.collab.net/tarballs/$pkgname-$pkgver.tar.gz
	svnserve.confd
	svnserve.initd
	$install
	"

build() {
	cd "$srcdir/$pkgname-$pkgver"

	./configure --prefix=/usr \
		--disable-nls \
		--without-apxs \
		--disable-javahl \
		--without-jdk 

	make external-all || return 1
	make local-all || return 1
	make -j1 DESTDIR="$pkgdir" install || return 1

	install -Dm755 "$srcdir"/svnserve.initd "$pkgdir"/etc/init.d/svnserve
	install -Dm644 "$srcdir"/svnserve.confd "$pkgdir"/etc/conf.d/svnserve
}
md5sums="93f128306b11e1a1c64ff51338777952  subversion-1.6.2.tar.gz
d084a7558053784886bc858b94fa9186  svnserve.confd
06cf9328f63a935654971052a2c3594a  svnserve.initd
bfd0d890c07830f1a6010891dd25fa5c  subversion.pre-install"

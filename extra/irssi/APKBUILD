# Maintainer: Carlo Landmeter <clandmeter at gmail.com>
pkgname=irssi
pkgver=0.8.13_rc1
_pkgver=0.8.13-rc1
pkgrel=0
pkgdesc="A modular textUI IRC client with IPv6 support"
url="http://irssi.org/"
license='GPL'
depends="glib ncurses openssl"
makedepends="glib-dev openssl-dev ncurses-dev perl-dev pkgconfig"
source="http://irssi.org/files/irssi-${_pkgver}.tar.bz2"
subpackages="$pkgname-doc $pkgname-dev $pkgname-perl"

build() {
	cd "$srcdir/$pkgname-${_pkgver}"

	./configure --prefix=/usr \
	--sysconfdir=/etc \
	--mandir=/usr/share/man \
	--with-perl=module
	make || return 1
	make DESTDIR="$pkgdir" install
}

perl() {
	depends="$pkgname perl"
	mkdir -p "$subpkgdir"/usr/share/irssi
	mv "$pkgdir"/usr/share/irssi/scripts "$subpkgdir"/usr/share/irssi/
	mkdir -p "$subpkgdir"/usr/lib/irssi
	mv "$pkgdir"/usr/lib/irssi/modules "$subpkgdir"/usr/lib/irssi/
	mv "$pkgdir"/usr/lib/perl5 "$subpkgdir"/usr/lib/
}

md5sums="b7543c08d6709b148a1907e2a3fb6f10  irssi-0.8.13-rc1.tar.bz2"

# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=ca-certificates
pkgver=20080809
pkgrel=1
pkgdesc="Common CA certificates PEM files"
url="http://packages.debian.org/sid/ca-certificates"
license="MPL GPL"
depends="run-parts openssl"
install=ca-certificates.post-install
source="http://ftp.no.debian.org/debian/pool/main/c/$pkgname/${pkgname}_${pkgver}_all.deb
	$pkgname-20080514-warn-on-bad-symlinks.patch
	$install
	"

build () {
	cd "$srcdir"
	ar x "$srcdir"/${pkgname}_${pkgver}_all.deb || return 1
	tar -zxf ./data.tar.gz
	patch -p0 < "$srcdir"/$pkgname-20080514-warn-on-bad-symlinks.patch \
		|| return 1

	mkdir -p "$pkgdir"
	cp -Ra usr etc "$pkgdir"/
	(
	echo "# Automatically generated by ${pkgname}-${pkgver}-${pkgrel}"
	echo "# $(date -u)"
	echo "# Do not edit."
	cd "$pkgdir"/usr/share/ca-certificates
	find . -name '*.crt' | sort | cut -b3-
	) > "$pkgdir"/etc/ca-certificates.conf
}
md5sums="3c44f9c232c2335da26d969c716af44d  ca-certificates_20080809_all.deb
fda24bd37c6cd55b9dd2ea7ef7b59778  ca-certificates-20080514-warn-on-bad-symlinks.patch
83a92f371137ac9f046c94452bf17058  ca-certificates.post-install"

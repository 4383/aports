#Contributor: Leonardo Arena <rnalrd@gmail.com>
pkgname=ssmtp
pkgver=2.62
pkgrel=0
pkgdesc="Extremely simple MTA to get mail off the system to a mail hub"
subpackages="$pkgname-doc"
arch=""
url="http://packages.debian.org/source/lenny/ssmtp"
license="GPL-2"
depends="uclibc"
makedepends="openssl-dev"
install=
source="http://ftp.debian.org/debian/pool/main/s/$pkgname/${pkgname}_${pkgver}.orig.tar.gz
        CVE-2008-3962.patch
        generate_config.patch"

build() {
	cd "$srcdir/$pkgname"
	patch generate_config ../../generate_config.patch
	sed -i -e 's:$(CC) -o:$(CC) @LDFLAGS@ -o:' Makefile.in
	patch -p1 ssmtp.c ../../CVE-2008-3962.patch

	./configure --prefix=/usr \
	--mandir=/usr/share/man \
	--sysconfdir=/etc \
	--enable-ssl
	make || return 1
	make prefix="$pkgdir"/usr etcdir="$pkgdir"/etc mandir="$pkgdir"/usr/share/man install
}
md5sums="257ac04e62ab7e3616e220333a1140cb  ssmtp_2.62.orig.tar.gz
18f0686f1b8888d187f06dcff3b6212a  CVE-2008-3962.patch
c70c395fe71589ca8b10b666455d5071  generate_config.patch"

# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=db
pkgver=4.7.25
pkgrel=0
pkgdesc="The Berkeley DB embedded database system"
url="http://www.oracle.com/technology/software/products/berkeley-db/index.html"
license="custom"
depends="uclibc"
makedepends=""
subpackages="$pkgname-dev $pkgname-doc"
source="http://download-uk.oracle.com/berkeley-$pkgname/$pkgname-$pkgver.tar.gz"

build () {
	cd "$srcdir/$pkgname-$pkgver"/build_unix

	../dist/configure --prefix=/usr \
		--enable-compat185 \
		--enable-shared \
		--enable-static \
		--disable-cxx

	make LIBSO_LIBS=-lpthread || return 1
	make DESTDIR="$pkgdir" install

	mkdir -p "$pkgdir"/usr/share/doc
	mv "$pkgdir"/usr/docs "$pkgdir"/usr/share/doc/$pkgname

	install -m644 -D "$srcdir"/$pkgname-$pkgver/LICENSE \
		"$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}
md5sums="ec2b87e833779681a0c3a814aa71359e  db-4.7.25.tar.gz"

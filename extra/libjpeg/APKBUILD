# Contributor: Carlo Landmeter <clandmeter at gmail>
# Maintainer: Carlo Landmeter <clandmeter at gmail>
pkgname=libjpeg
pkgver=6b
pkgrel=1
pkgdesc="Library of JPEG support functions"
url="http://www.ijg.org/"
license="custom"
depends=""
makedepends="libtool"
install=
subpackages="$pkgname-doc $pkgname-dev"
source="ftp://ftp.uu.net/graphics/jpeg/jpegsrc.v${pkgver}.tar.gz"

build() {
	cd "$srcdir/jpeg-$pkgver"

	cp /usr/share/libtool/config/config.guess ./
	cp /usr/share/libtool/config/config.sub ./
	sed -i "s|./libtool|libtool|" configure
	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--enable-shared \
		--enable-static
	make || return 1
	for i in bin lib include share/man/man1; do
		mkdir -p "$pkgdir"/usr/"$i"
	done
	make prefix="$pkgdir"/usr mandir="$pkgdir"/usr/share/man/man1 install
	install -Dm644 jpegint.h "$pkgdir"/usr/include/jpegint.h
}

md5sums="dbd5f3b47ed13132f04c685d608a7547  jpegsrc.v6b.tar.gz"

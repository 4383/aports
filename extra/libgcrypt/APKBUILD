# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=libgcrypt
pkgver=1.4.3
pkgrel=0
pkgdesc="general purpose crypto library based on the code used in GnuPG"
url="http://www.gnupg.org"
license="LGPL"
depends="libgpg-error"
makedepends="libgpg-error-dev texinfo"
subpackages="$pkgname-dev $pkgname-doc"
source="ftp://ftp.franken.de/pub/crypt/mirror/ftp.gnupg.org/gcrypt/$pkgname/$pkgname-$pkgver.tar.bz2
	nocxx.patch"

build () {
	cd "$srcdir"/$pkgname-$pkgver

	msg "Punting useless cpp checks..."
	patch configure < "$srcdir"/nocxx.patch || return 1

	./configure --prefix=/usr \
		--disable-padlock-support \
		--disable-static

	make || return 1
	make -j1 DESTDIR="$pkgdir" install || return 1
	rm -f ${pkgdir}/usr/share/info/dir
}
md5sums="46e50e811ed51f1e0e8dd677dded967d  libgcrypt-1.4.3.tar.bz2
28513788ba4d556ccd538867dc6205ab  nocxx.patch"

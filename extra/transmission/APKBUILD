# Maintainer:Carlo Landmeter
pkgname=transmission
pkgver=1.34
pkgel=0
pkgdesc="Fast, easy, and fee BitToent client (CLI tools daemon and webinterface)"
url="http://www.tansmissionbt.com"
install=transmission.install
license="MIT"
depends="curl"
makedepends="openssl-dev pkgconfig curl-dev"
source="http://download.m0k.org/transmission/files/transmission-$pkgver.tar.bz2
	transmission-1.34-configure-no-nls.patch
	transmission-daemon.initd
	transmission-daemon.confd
	transmission.install
	"
subpackages="$pkgname-doc"

build() {
        cd $srcdir/$pkgname-$pkgver

	for i in ../*.patch; do
		msg "Applying ${i##*/}"
		patch -p1 -i $i || return 1
	done

        ./configure --prefix=/usr \
		--mandir=/usr/share/man \
		--disable-gtk \
		--disable-nls
        make || return 1
        make prefix="$pkgdir"/usr mandir="$pkgdir"/usr/share/man install
        install -D -m755 "$srcdir"/transmission-daemon.initd "$pkgdir"/etc/init.d/transmission-daemon
        install -D -m644 "$srcdir"/transmission-daemon.confd "$pkgdir"/etc/conf.d/transmission-daemon
}
md5sums="c4ef93639bcb895c1b3d279b2f4e27b3  transmission-1.34.tar.bz2
44b65993bb089851976386853e4128df  transmission-1.34-configure-no-nls.patch
b3b921242bdc3b33a8ac05fc30653b6c  transmission-daemon.initd
89478a70fcd93463e1dd8d751da994da  transmission-daemon.confd
4e338c4f7c902e132707b9e87b9bf1b5  transmission.install"

From ed2a35d70b78232562aeb1ba0158fe785916c96b Mon Sep 17 00:00:00 2001
From: Christian Dywan <christian@twotoasts.de>
Date: Sun, 29 Mar 2009 22:14:43 +0000
Subject: Don't expressly use libkatze in extensions to avoid -fPIC problem

---
diff --git a/extensions/wscript_build b/extensions/wscript_build
index 8ce7027..1ea845d 100644
--- a/extensions/wscript_build
+++ b/extensions/wscript_build
@@ -26,5 +26,4 @@ for extension in extensions:
     obj.includes = '..'
     obj.source = source
     obj.uselib = 'UNIQUE LIBSOUP GIO GTK SQLITE WEBKIT LIBXML'
-    obj.uselib_local = 'katze'
     obj.install_path = '${LIBDIR}/midori'
diff --git a/katze/wscript_build b/katze/wscript_build
index 27a24fc..52c282d 100644
--- a/katze/wscript_build
+++ b/katze/wscript_build
@@ -12,6 +12,3 @@ obj.find_sources_in_dirs ('.')
 obj.add_marshal_file ('marshal.list', 'katze_cclosure_marshal')
 obj.uselib = 'M GMODULE LIBSOUP GTK LIBXML'
 obj.install_path = None
-
-if platform.architecture ()[0] == '64bit':
-    obj.env.append_value ('CCFLAGS', '-fPIC')
diff --git a/midori/wscript_build b/midori/wscript_build
index 91f5302..87eba0e 100644
--- a/midori/wscript_build
+++ b/midori/wscript_build
@@ -14,9 +14,6 @@ obj.uselib = 'UNIQUE LIBSOUP LIBIDN GIO GTK SQLITE WEBKIT LIBXML HILDON'
 obj.uselib_local = 'katze'
 obj.install_path = None
 
-if platform.architecture ()[0] == '64bit':
-    obj.env.append_value ('CCFLAGS', '-fPIC')
-
 obj = bld.new_task_gen ('cc', 'staticlib')
 obj.name = 'panels'
 obj.target = 'panels'
@@ -26,9 +23,6 @@ obj.uselib = 'UNIQUE LIBSOUP GMODULE GTHREAD GIO GTK SQLITE WEBKIT LIBXML'
 obj.uselib_local = 'midori'
 obj.install_path = None
 
-if platform.architecture ()[0] == '64bit':
-    obj.env.append_value ('CCFLAGS', '-fPIC')
-
 obj = bld.new_task_gen ('cc', 'program')
 obj.target = 'midori'
 obj.includes = '. .. ../panels'
--
cgit v0.8.2-1-g6063

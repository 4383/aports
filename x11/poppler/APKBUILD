# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=poppler
pkgver=0.12.0
pkgrel=0
pkgdesc="PDF rendering library based on xpdf 3.0"
url="http://poppler.freedesktop.org/"
license="GPL"
subpackages="$pkgname-dev $pkgname-doc $pkgname-glib"
makedepends="jpeg-dev cairo-dev gtk+-dev libxml2-dev fontconfig-dev pkgconfig
	glib-dev"
depends=
depends_dev="glib-dev gtk+-dev cairo-dev"
source="http://$pkgname.freedesktop.org/$pkgname-$pkgver.tar.gz"

build() {
	cd "$srcdir"/$pkgname-$pkgver
	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--localstatedir=/var \
		--disable-static \
		--enable-cairo-output \
		--enable-xpdf-headers \
		--enable-libjpeg \
		--enable-zlib \
		--disable-poppler-qt4 \
		--enable-poppler-glib \
		--disable-poppler-qt \
		|| return 1
	make || return 1
	make DESTDIR="$pkgdir" install || return 1
}

glib() {
	pkgdesc="Glib bindings for poppler"
	mkdir -p "$subpkgdir"/usr/lib
	mv "$pkgdir"/usr/lib/libpoppler-glib* "$subpkgdir"/usr/lib/
}

md5sums="399b25d9d71ad22bc9a2a9281769c49c  poppler-0.12.0.tar.gz"

# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=slim
pkgver=1.3.1
pkgrel=0
pkgdesc="Desktop-independent graphical login manager for X11"
url="http://slim.berlios.de/"
license="GPL-2"
subpackages="$pkgname-doc"
makedepends="libxmu-dev libpng-dev jpeg-dev libxft-dev"
depends=""
install=
source="http://download.berlios.de/$pkgname/$pkgname-$pkgver.tar.gz
	$pkgname.logrotate
	$pkgname-restart.patch"

build () 
{ 
	cd "$srcdir/slim-$pkgver"
	patch -Np1 -i "$srcdir/slim-restart.patch" || return 1
	make CXX="${CXX:-g++}" CC="${CC:-gcc}" || return 1
	make DESTDIR="$pkgdir" MANDIR=/usr/share/man install || return 1

	install -D -m644 "$srcdir/slim.logrotate" "$pkgdir/etc/logrotate.d/slim" || return 1
	sed -i 's|#xserver_arguments.*|xserver_arguments   -nolisten tcp vt07|' "$pkgdir/etc/slim.conf" || return 1
	sed -i 's|/var/run/slim.lock|/var/lock/slim.lock|' "$pkgdir/etc/slim.conf" || return 1

}
md5sums="727d0acb24c0fbf0751134c37a9c895f  slim-1.3.1.tar.gz
43da096480bf72c3ccec8ad8400f34f0  slim.logrotate
648d871fe7d2a97b7d7b928019e2feee  slim-restart.patch"

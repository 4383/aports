# Contributor: Natanael Copa <ncopa@alpinelinux.org>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=parole
pkgver=0.2.0
pkgrel=0
pkgdesc="Media player for the Xfce desktop"
url="http://goodies.xfce.org/projects/applications/parole/"
license="GPL"
depends=""
makedepends="libxfcegui4-dev libxfce4util-dev intltool gstreamer-dev bash
	gst-plugins-base-dev libsm-dev taglib-dev libnotify-dev"
install=
subpackages="$pkgname-dev"
source="http://archive.xfce.org/src/apps/parole/${pkgver%.*}/parole-$pkgver.tar.bz2
	npapi.h
	npfunctions.h
	npruntime.h
	nptypes.h
	configure.patch
	midori.patch"

prepare() {
	cd "$srcdir"/$pkgname-$pkgver
	patch -p1 -i "$srcdir"/midori.patch || return 1
	patch -p1 -i "$srcdir"/configure.patch || return 1
	cp "$srcdir"/*.h browser-plugin/
}

build() {
	cd "$srcdir"/$pkgname-$pkgver
	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--enable-browser-plugin \
		--infodir=/usr/share/info
	make || return 1
}

package() {
	cd "$srcdir"/$pkgname-$pkgver
	make DESTDIR="$pkgdir" install
}

md5sums="af1e911de73423304cab419d328e1da6  parole-0.2.0.tar.bz2
26aaa0de7b2d33ca2023fa7d7e7e0510  npapi.h
d265ced34f155a83aecbef2c4417c16b  npfunctions.h
f2ca6665838a8e4dcc188e74851a2c80  npruntime.h
ce12eadb54508e0598f31dd38b36f6ec  nptypes.h
f3342ef9ff03d1eb866a3e1fad5a7041  configure.patch
05be03e6e16e745ce9fcfc38992c6c14  midori.patch"

# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=imlib2
pkgver=1.4.2
pkgrel=0
pkgdesc="Library that does image file loading and saving as well as rendering, manipulation, arbitrary polygon support"
url="http://sourceforge.net/projects/enlightenment/"
license="BSD"
subpackages="$pkgname-dev $pkgname-doc"
depends="uclibc libx11 libxext freetype giflib libid3tag libjpeg libpng tiff
	zlib"
makedepends="tiff-dev giflib-dev bzip2-dev freetype-dev libxext-dev
	libpng-dev libid3tag-dev libjpeg-dev libsm-dev zlib-dev"
source="http://downloads.sourceforge.net/enlightenment/$pkgname-$pkgver.tar.bz2
	bufferoverflow.patch"

build ()
{
	cd $srcdir/$pkgname-$pkgver
	patch -Np0 -i $srcdir/bufferoverflow.patch || return 1
	./configure --prefix=/usr \
		--sysconfdir=/etc/imlib2 \
		--x-libraries=/usr/lib \
		--disable-mmx \
		--disable-amd64 \
		|| return 1
	make || return 1
	make DESTDIR=$pkgdir install || return 1
	install -Dm644 COPYING $pkgdir/usr/share/licenses/$pkgname/COPYING
}
md5sums="9f15568e76ebda9092c571e0df261f54  imlib2-1.4.2.tar.bz2
76def1fe0ac2ac1686ff24d29979606f  bufferoverflow.patch"

# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=man-pages
pkgver=3.52
_posixver=2003-a
pkgrel=0
pkgdesc="Linux man pages"
url="http://www.kernel.org/doc/man-pages/"
arch="noarch"
license="GPL"
depends=
makedepends=""
options="!strip"
source="http://www.kernel.org/pub/linux/docs/man-pages/man-pages-$pkgver.tar.xz
	http://www.kernel.org/pub/linux/docs/$pkgname/$pkgname-posix/$pkgname-posix-${_posixver}.tar.bz2"

build() {
	cd "$srcdir"/$pkgname-$pkgver
	mkdir -p "$srcdir"/$pkgname-$pkgver/man0
	for sect in 0 1 3; do
		sed -i "/^\.so /s/man${sect}p/man$sect/" \
			"$srcdir"/$pkgname-posix-${_posixver}/man${sect}p/*
		mv "$srcdir"/$pkgname-posix-${_posixver}/man${sect}p/* \
			"$srcdir"/$pkgname-$pkgver/man$sect/
	done
}

package() {
	cd "$srcdir"/$pkgname-$pkgver
	make prefix="$pkgdir"/usr install || return 1
	# provided by libiconv-doc
	rm "$pkgdir"/usr/share/man/man3/iconv*

}
md5sums="dbf00e3a6fd1e23e27a4552bf4d16fed  man-pages-3.52.tar.xz
7c78aff03c0a6767ba483d34f19e4b09  man-pages-posix-2003-a.tar.bz2"
sha256sums="1d712f128024cf1ab89cd4a1ace973b8999ca40ff3f1502b20e7eb208791a0ca  man-pages-3.52.tar.xz
e355b1b7bbccd4cef6b4a38dccf090e4535e038c21a9985c19891f21173d49ea  man-pages-posix-2003-a.tar.bz2"
sha512sums="e8a01dc69c156eb9c63d3411bf4edc0c999f8dd87671b9003f9b4c05749c54ef7e4c46483435302e7ebd754a939e2841404a73a2517963b77cad2d85d878a820  man-pages-3.52.tar.xz
70d1e1e5ceb3095323bfe2c85bfd5661e25fd77469a4b18eb9806f327cb65a030c2ea51185577d6230aec1778185ee2d4385f677af3069d28ab07e9373857024  man-pages-posix-2003-a.tar.bz2"

--- a/configure.ac.orig	2008-05-29 16:18:56 +0000
+++ b/configure.ac	2008-05-30 09:10:48 +0000
@@ -52,7 +52,7 @@
 then
     AC_DEFINE([USE_SEM_OPEN], [], [Use sem_open() instead of sem_init()])
 else
-    AC_SEARCH_LIBS(sem_init, [rt], ,
+    AC_SEARCH_LIBS(sem_init, [rt pthread], ,
 	AC_MSG_ERROR([Can't compile without semaphores.])
     )
 fi
@@ -101,7 +101,7 @@
 AC_MSG_CHECKING([whether to disable dnsbl checking])
 AC_ARG_ENABLE(dnsbl,
     AC_HELP_STRING([--disable-dnsbl], [Disable dnsbl checking]),
-    [AC_MSG_RESULT([yes]) ; dnsbl="no"],
+    [AC_MSG_RESULT([yes]) ; dnsbl="$enableval"],
     [AC_MSG_RESULT([no]) ; dnsbl="yes"]
 )
 

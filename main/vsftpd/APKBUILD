# Contributor: Carlo Landmeter <clandmeter@gmail.com>
pkgname=vsftpd
pkgver=2.1.0
pkgrel=1
pkgdesc="Very secure ftpd"
url="http://vsftpd.beasts.org"
license="GPL"
depends="openssl"
makedepends="openssl-dev !libcap-dev"
subpackages="$pkgname-doc"
source="ftp://vsftpd.beasts.org/users/cevans/vsftpd-${pkgver}.tar.gz
vsftpd-enable-ssl.patch
vsftpd.initd
vsftpd.confd"

build() {
	cd "$srcdir/$pkgname-$pkgver"
	
	#Enable SSL support 
	patch -p0 -i "$srcdir"/vsftpd-enable-ssl.patch || return 1

	make || return 1
	
	install -m755 -D vsftpd "$pkgdir"/usr/sbin/vsftpd
	install -m644 -D vsftpd.8 "$pkgdir"/usr/share/man/man8/vsftpd.8
	install -m644 -D vsftpd.conf.5 "$pkgdir"/usr/share/man/man5/vsftpd.conf.5
	install -m644 -D vsftpd.conf "$pkgdir"/etc/vsftpd.conf
	install -m755 -D "$srcdir"/$pkgname.initd "$pkgdir"/etc/init.d/$pkgname
	install -m644 -D "$srcdir"/$pkgname.confd "$pkgdir"/etc/conf.d/$pkgname
	mkdir -p "$pkgdir"/usr/share/empty
}

md5sums="7890b54e7ffa6106ffbdfda53f47fa41  vsftpd-2.1.0.tar.gz
f3cbaf364cd3c46a2a03b00de9d7e184  vsftpd-enable-ssl.patch
7edf5990c9f5dda983e918c55c92078e  vsftpd.initd
431dfe7403323e247a88b97beade5d78  vsftpd.confd"

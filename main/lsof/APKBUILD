# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=lsof
pkgver=4.82
pkgrel=0
pkgdesc="LiSt Open Files"
url="http://people.freebsd.org/~abe/"
license="custom"
subpackages="$pkgname-doc"
depends=
makedepends=""
source="ftp://sunsite.ualberta.ca/pub/Mirror/$pkgname/${pkgname}_$pkgver.tar.bz2"

build ()
{
	cd "$srcdir"/${pkgname}_$pkgver
	tar -xf ${pkgname}_${pkgver}_src.tar
	cd ${pkgname}_${pkgver}_src
	sed -e "s|/\* #define\tHASSECURITY\t1 \*/|#define\tHASSECURITY\t1|" \
		-i dialects/linux/machine.h
	./Configure -n linux
	make || return 1
	install -D -m0755 -o root -g root lsof "$pkgdir"/usr/sbin/lsof
	install -D -m0644 -o root -g root lsof.8 \
		"$pkgdir"/usr/share/man/man8/lsof.8
}
md5sums="5518a0c16fc937523b3d1a946cf59e5b  lsof_4.82.tar.bz2"

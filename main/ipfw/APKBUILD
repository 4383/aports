# Contributor: William Pitcock <nenolod@dereferenced.org>
# Maintainer: William Pitcock <nenolod@dereferenced.org>
pkgname=ipfw
_realver=20130607
pkgver=3.0_git${_realver}
pkgrel=0
pkgdesc="BSD ipfw firewall and dummynet suite (linux-grsec modules)"
url="http://info.iet.unipi.it/~luigi/dummynet/"
arch="all"
license="BSD"
depends=""
makedepends=""
install=
source="http://info.iet.unipi.it/~luigi/doc/${_realver}-${pkgname}3.tgz"
subpackages=""

_builddir="$srcdir/ipfw3-2012"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	make ipfw
}

package() {
	cd "$_builddir"
	mkdir -p "$pkgdir/usr/sbin"
	install -D -m755 ipfw/ipfw "$pkgdir/usr/sbin/ipfw"
}

md5sums="004e65e6d545a89c4dcc3e741e287444  20130607-ipfw3.tgz"
sha256sums="7dc80437b137e629f8ef3a7889b24ffbd1c27274e9cce15fd1f3b2c8620c6d64  20130607-ipfw3.tgz"
sha512sums="6c4c2c7d4795094b9ff72212394e7dee44e5f9e09e97021b5ac9c3fad6de5a32b1d608ae9572da17f62cb37d076d89ab26859c61255d03d6bce22ca527f2c8ec  20130607-ipfw3.tgz"

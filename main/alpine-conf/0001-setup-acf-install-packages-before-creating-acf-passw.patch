From 26f7fb4ef3ccbcb7fedbcffd65751bc882073510 Mon Sep 17 00:00:00 2001
From: Natanael Copa <ncopa@alpinelinux.org>
Date: Wed, 2 May 2012 13:40:02 +0000
Subject: [PATCH] setup-acf: install packages before creating acf password

the acfpasswd utility needs to be installed first
---
 setup-acf.in |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/setup-acf.in b/setup-acf.in
index 91113c5..1ca8bf2 100644
--- a/setup-acf.in
+++ b/setup-acf.in
@@ -30,6 +30,9 @@ while [ $# -gt 0 ]; do
 	shift
 done
 
+# install packages 
+apk add mini_httpd $pkgs || exit 1
+
 if [ "$create_passwd" != "no" ]; then
 	mkdir -p /etc/acf
 	if [ -f /etc/acf/passwd ]; then
@@ -40,9 +43,6 @@ if [ "$create_passwd" != "no" ]; then
 	acfpasswd -s root
 fi
 
-# install packages 
-apk add mini_httpd $pkgs || exit 1
-
 # setup mini_httpd and start it
 if [ -d /var/www/localhost/htdocs ]; then
 	mv /var/www/localhost/htdocs /var/www/localhost/htdocs.old
-- 
1.7.10


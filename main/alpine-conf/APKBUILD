# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=alpine-conf
pkgver=2.14.0
pkgrel=6
pkgdesc="Alpine configuration management scripts"
url=http://git.alpinelinux.org/cgit/$pkgname
arch="all"
license="GPL2"
depends="openrc"
source="http://dev.alpinelinux.org/archive/alpine-conf/alpine-conf-$pkgver.tar.xz
	0001-setup-bootable-use-UUID-on-new-USBs.patch
	0001-setup-bootable-move-syslinux.cfg-to-boot-syslinux-if.patch
	0001-setup-disk-fix-partitioning-of-HP-raid-array-cciss.patch
	0001-setup-disk-add-magic-environment-variable-ERASE-DISKS.patch
	setup-bootable-kernel-name-change.patch
	"

_builddir="$srcdir"/$pkgname-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	make VERSION=$pkgver-r$pkgrel || return 1
}

package() {
	cd "$_builddir"
	make install PREFIX= DESTDIR="$pkgdir" || return 1
	for i in commit exclude include status update; do
		ln -s lbu "$pkgdir"/sbin/lbu_$i
	done
}

md5sums="94b82dd9d7a2c63aa6909238da3b44b3  alpine-conf-2.14.0.tar.xz
c0eeeebfb67b757c954a2f5100461a7b  0001-setup-bootable-use-UUID-on-new-USBs.patch
6568923677063d92939f85157baf0dc4  0001-setup-bootable-move-syslinux.cfg-to-boot-syslinux-if.patch
df0d66fd6dcd63f1648b0768ed23df34  0001-setup-disk-fix-partitioning-of-HP-raid-array-cciss.patch
1c975a60bf80bd7898645f3c4b44cc64  0001-setup-disk-add-magic-environment-variable-ERASE-DISKS.patch
1b1caed0229a2e496743ca83674e8042  setup-bootable-kernel-name-change.patch"
sha256sums="14dc81845b16ffcbb39af9d0c5aeffab68166eec154c822b7c1c9c0697823d5b  alpine-conf-2.14.0.tar.xz
754a59868f069c4eb2321034f00539ea02e734ede1a483b9c9ec5360c788f8c1  0001-setup-bootable-use-UUID-on-new-USBs.patch
a410da99de3ef31a7a8a537aeb0fcd0ab53027e6febd95e15c1accdc49c135ee  0001-setup-bootable-move-syslinux.cfg-to-boot-syslinux-if.patch
56988a30777e6a7ed0391236aa94d3812ab4b9ee89a7866ce62ab4eb620145f2  0001-setup-disk-fix-partitioning-of-HP-raid-array-cciss.patch
add4cf1bcc4f5344f88a8fa8492c5f994f3f699d36a4981ccecd14ae2345d0b1  0001-setup-disk-add-magic-environment-variable-ERASE-DISKS.patch
5d4051353125e01c38429b90b268422f52fb5007dee7cb2b6ed777773c26f7e2  setup-bootable-kernel-name-change.patch"
sha512sums="39aa74e676221475ce088d82b134563c3dd04a69e90919089d3876b6a4715f6df58aa156352a40d9f817414cbdb603350a3e9c15914fb254a24d8cef4acd6581  alpine-conf-2.14.0.tar.xz
3b2d2fb754421f7dd4c45c7212544c2f34587da9da10e777ee9de153dd77e70d016bf8b270d72dd6ee8299c99a17f2969bddef586afbdcac13b4d76c87bcc35e  0001-setup-bootable-use-UUID-on-new-USBs.patch
32bc771eba2b912623dd5b0c96571d0770afc370c354831353f2ebda5e396323f1cebfddc36d8ac3ee8028a1554a0163ecdaa9cca108097002282f838139f5b6  0001-setup-bootable-move-syslinux.cfg-to-boot-syslinux-if.patch
6188cfe76b6acd63c9c9906f590c025ea4d0d8b49c97c0c21dee93670fafda595668534b7fcbbe5095eae967d13fb742823fe1c69412f52341c18e3f5ea7901e  0001-setup-disk-fix-partitioning-of-HP-raid-array-cciss.patch
6d09092d9b7d74f1caec0a403aff8549da061bb20da51b7c1c3b52f176c26e8eeaeb15c7dec589ffa23fbcaaeb7b54a33e112ab3e0fc9d6b96557ba894a212b5  0001-setup-disk-add-magic-environment-variable-ERASE-DISKS.patch
41c4eedfe3a87ef6861c1cc4588097a2e511b4f78ea444bfd92e0b0ab1d2c786cbb1c2ab435478664e1e340c6e19895ce7865c68aea81c2b5a8cd5a65c501183  setup-bootable-kernel-name-change.patch"

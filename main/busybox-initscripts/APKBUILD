# Contributor: Natanael Copa <ncopa@alpinelinux.org>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=busybox-initscripts
pkgver=2.0
pkgrel=4
pkgdesc="Init scripts for busybox daemons"
url="http://git.alpinelinux.org/cgit/aports/tree/core/busybox-initscripts"
license="GPL-2"
depends="busybox"
makedepends=
install=$pkgname.post-install
subpackages=
source="cron.initd dnsd.initd httpd.initd inetd.initd klogd.initd 
	mdev-mount.initd mdev.initd rdate.initd syslog.initd watchdog.initd
	cron.confd klogd.confd rdate.confd syslog.confd watchdog.confd
	mdev.conf dvbdev ide_links usbdev usbdisk_link
	$install"

build() {
	local i
	cd "$srcdir"

	mkdir -p "$pkgdir"/etc/conf.d "$pkgdir"/etc/init.d "$pkgdir"/lib/mdev
	for i in *.initd; do
		install -m755 "$srcdir"/$i "$pkgdir"/etc/init.d/${i%.*} || return 1
	done
	for i in *.confd; do
		install -m644 "$srcdir"/$i "$pkgdir"/etc/conf.d/${i%.*} || return 1
	done
	install -m644 mdev.conf "$pkgdir"/etc
	install -m755 dvbdev ide_links usbdev usbdisk_link "$pkgdir"/lib/mdev/
}

md5sums="131e46b2853439f436bc377a5473273f  cron.initd
3af526f4de1a607f7932a15f7c8e8eb1  dnsd.initd
f7daf05f9984aa398fdbd3fe02e82678  httpd.initd
dad8e381142dfb42483de324aff4cf28  inetd.initd
a5f2bb75d70d238bd534ccc57b643e90  klogd.initd
12379687c0cfb5446e0cfc20bd6992bb  mdev-mount.initd
ef3e93fe17964dd600364b1340654b5b  mdev.initd
533288e7df1fdfc029b1048b8e6c770f  rdate.initd
b5b23dd06cea120bd8d850b54bca0b59  syslog.initd
254186e513ff9fb9ede6a2e92257b247  watchdog.initd
8ddb8d040c9c7a32c63039a2c80ff496  cron.confd
60bc14cc3163d76f41bcc93dc0f9984b  klogd.confd
22adbf155ffc4595206ded6daad07812  rdate.confd
77fb31a75511247bf4e3430565a276bc  syslog.confd
0bb55dde32f5e119111fa4938daaef3d  watchdog.confd
022b670c549e402573797cc72fa12032  mdev.conf
ad1556961294e4aa2abca6be52138b7c  dvbdev
5c8725b4cbdeda23b00f08124a0d20bf  ide_links
1acfd58dfd1cf324c90ca3a3be519510  usbdev
30b0c85956b6701caf55309a17e537f6  usbdisk_link
038db8453f57a36afaee2a4d883008e4  busybox-initscripts.post-install"

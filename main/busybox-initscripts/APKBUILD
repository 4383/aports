# Contributor: Natanael Copa <ncopa@alpinelinux.org>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=busybox-initscripts
pkgver=2.2
pkgrel=13
pkgdesc="Init scripts for busybox daemons"
url="http://git.alpinelinux.org/cgit/aports/tree/core/busybox-initscripts"
arch="noarch"
license="GPL-2"
depends="busybox"
makedepends=
install=$pkgname.post-install
subpackages=
replaces="alpine-baselayout"
source="acpid.initd cron.initd dnsd.initd httpd.initd inetd.initd klogd.initd 
	mdev-mount.initd mdev.initd rdate.initd syslog.initd watchdog.initd
	cron.confd klogd.confd rdate.confd syslog.confd watchdog.confd
	mdev.conf dvbdev ide_links usbdev usbdisk_link xvd_links
	default.script
	"

build() {
	return 0
}

package() {
	local i
	cd "$srcdir"

	mkdir -p "$pkgdir"/etc/conf.d "$pkgdir"/etc/init.d "$pkgdir"/lib/mdev\
		"$pkgdir"/etc/acpi/PWRF
	for i in *.initd; do
		install -m755 "$srcdir"/$i "$pkgdir"/etc/init.d/${i%.*} || return 1
	done
	for i in *.confd; do
		install -m644 "$srcdir"/$i "$pkgdir"/etc/conf.d/${i%.*} || return 1
	done
	install -m644 mdev.conf "$pkgdir"/etc
	install -m755 dvbdev ide_links usbdev usbdisk_link xvd_links "$pkgdir"/lib/mdev/

	# poweroff script for acpid
	cat >"$pkgdir"/etc/acpi/PWRF/00000080 <<EOF
#!/bin/sh
poweroff
EOF
	chmod +x "$pkgdir"/etc/acpi/PWRF/00000080

	# script for udhcpc
	install -Dm755 "$srcdir"/default.script \
		"$pkgdir"/usr/share/udhcpc/default.script || return 1
	
}

md5sums="8928e7df8723012df7350d40a2729b58  acpid.initd
4ff6e85fb231c9067f10d9dd446852da  cron.initd
dc825f26e9153f8f7d77162c66f7d876  dnsd.initd
a3397fe8946b7fff6a0a953d8968d5ae  httpd.initd
2bb9d1064d8b0dcceb4dac95bf8746ba  inetd.initd
8b7ced45d0880e3f1b6a1047520de035  klogd.initd
6de9bac27127a7e1dbcc86acbc920521  mdev-mount.initd
8ead1e5bb37f536ca736a1e0d0cd7522  mdev.initd
c01dc869cbdd68e86e64a35ccc1e885e  rdate.initd
b4b0db90a0e341a39baf55eacbda79c2  syslog.initd
aed11322e338cb98a22b11fe71200c58  watchdog.initd
8ddb8d040c9c7a32c63039a2c80ff496  cron.confd
60bc14cc3163d76f41bcc93dc0f9984b  klogd.confd
22adbf155ffc4595206ded6daad07812  rdate.confd
77fb31a75511247bf4e3430565a276bc  syslog.confd
0bb55dde32f5e119111fa4938daaef3d  watchdog.confd
e5bc732b0645aee005aef2d2fff54caf  mdev.conf
ad1556961294e4aa2abca6be52138b7c  dvbdev
5c8725b4cbdeda23b00f08124a0d20bf  ide_links
daf57f3d0372f825ddc05b00973e5afe  usbdev
30b0c85956b6701caf55309a17e537f6  usbdisk_link
826d85313ca7a4a0205d63bd58b7d01f  xvd_links
c6470658e54f040bb85cb1fc7b56f10c  default.script"
sha256sums="894bf4edd028433bcfa5863b225387a94db477e9b4319f1655dd74907366d245  acpid.initd
9e631207340e1879318ad377b9d74ad77978c5db8bcea1bb0a4871525d67a8e7  cron.initd
5e8f251a3698700bc3cc064dd3dc85f791c6a66d32d088e107de7ac71be70697  dnsd.initd
0f367092a4faebbfb06ba137ff9805678a5aa37743cebedd13846a9e39222d33  httpd.initd
efd49fa6aed1f4a7fcbdbc66bc9bfa07be88df500c95d6ee2758d9f45e2bfd3c  inetd.initd
248b8a2e6fed69454146a89bb1fa8a1927a09c1f6d28965f4b9dcc4ac20513b3  klogd.initd
2e926542fd4e0fb16e2655ddef0d0cd752178757eff4f19ad09714509e534951  mdev-mount.initd
9d3fefb7f1e76eefd61151013da014694a6f2f74b9594b7276633db636bdcc7f  mdev.initd
fe551ee6bf08b6e0e9eaea3c93edead6e0ed3aa7c9c1129ba3c503bebdbc7c25  rdate.initd
307dd78e4fc738e0a45e9d57cf895ae1e0d00f4a7a7a6f75cd0c6927ff7d348c  syslog.initd
8bbfdccb64fe94e3537b71ec2aab43b7050e8a099c4c779e00c5ee1e13dc3061  watchdog.initd
6b466c5b0e9cab7613aa56edf383e891c5c7e26ee00467e9f7913808be23a328  cron.confd
f6cd63d6e5f384dcb01a4906c9a0b6c5923794380235dfe0d79b48a686b03c5d  klogd.confd
791d49802395861a5f788dc7436c1260ec2cd3bdea0c790952ae1b2dd518e811  rdate.confd
8a2362d6b5b1ec1d754878726392119f2cc7416c748ee4f2ab134f731d6e6198  syslog.confd
77f6f9069afdbb477a7e822aa2c7265d64fd22fdd9338bb3beb0cee901d202ce  watchdog.confd
2d870d9ccb6b2719677bd1902125db80466e71bc1af246523e831cbff6099448  mdev.conf
ef091bb4c8943a99b9a97b556cdc15ddd20275f5afa8287e201419b08c4e71de  dvbdev
3fccc9ee437e3dcc8ac73bfe3713334a7156a112fe442e052fff4f26ff0f6a88  ide_links
dcb0c37590019bccb4c31a5372cbf7728eae6f1174d56bf0708d7504243a5fbb  usbdev
4957f6991e0cb988b263b5276b582f1757deecad19cddebe3c615b381df9f858  usbdisk_link
86ed99205050a5dcca8a27c7e8658df8c55dc85ed810db0d64b51f7c63aa140e  xvd_links
b9129dd73ffa93f9a5fa85469b9ba144cc4948b02de0bea45eee0469176cc8f8  default.script"
sha512sums="bbd5cb45af37114a1d106e1dad6839e98c62714f94e44e480e46f7c806c6d6c434e7852980139222493fb74760f2815bbdc4bc97a683d1f3345315991056c8fa  acpid.initd
44cacb40d7e732443a3bbc550b907858b404ddba928c7c30d22dfe672c36dd060b9ffa57b11584ece6a7fd5f01c056dd8b61862a2d4e0e7a47e4181784ee4af5  cron.initd
900ca3d192b3edade80b9b8b660bfe2897522ef6f36c342ea16d6f21e6d2acc609d66fc7c77133b03239f19bee2a6227851bc75279ebcab561d6784e947b6328  dnsd.initd
6d9e980f3d04e0c860fdbd61e8943a07e66b14220a015bed20de59b9be40849490457f17b7e28030263c6c8609a3a440c526b1083a87d3c739ded3b11f3f81cc  httpd.initd
e5856b6d83047a84f9332a0634de5f165e65878138298a1c737b9326be5a206d24f43227a88b5644f07bdfc7b0974b4d92881bb6236079e9c6ea267e031f8164  inetd.initd
0466c53d6cfc62603e1b0c9c5b6551076d3a33ac138a2064339db9ebec2adafb62c4d7ccfb414e6d97260d4abd42efe7d6bda7dafe9ce55e944b10b7cde3d2ef  klogd.initd
2d43f3d9fb48164b34daaa55e8f2936d6235dd14b1bb368b4bdc90bd870c595fce39accd981ecb23bacdaddf9fa2adbea4eb9ee7080e9dd2fff8e7636f5f9f16  mdev-mount.initd
2d19e8bb43c5378421934dd436ec36896883b6c35364358b3ee34f6f1fb07f3f49290e0cd32b3d3dc5b863a92a5c4dfe0942e6b62889171edde864fd0b84163c  mdev.initd
6297d604926b4f13155b8382d6713a820c48d97ce001f6571c1a66b3b96f0f5f6ec6eb684d99016d961b8f72ddd8300e30eebccb84b8064f7582aba88493a017  rdate.initd
5bd3634fe5d7a592369b164f126a56891477e22df6685ff204d1e56973fd182b209f74671378cbf6b78af9764e2788bd5bec9e7e58fbbe1314bb004c4fb445e7  syslog.initd
f4ddd0acdfff4aa1972e19e7181b363cb3d73e075acd6cc98d153d7748ab2d213a99c9be30f65c696f13bc72782cbb89ad584e3c837f10904bce295dfa79df35  watchdog.initd
49c4299eca93517f09c6af71dd6bf737fec4006dfbf72b696fc3ec3e39d61fdd63107cae1bd883b2539848d52e6f6b1ed494d0c871e92e50fc55669295f3585e  cron.confd
f9bf43b72142bbb4c0665c1268a3d91586ef8a057dfe64c53b6923815d2db1f669b8080a38311ad89cda0b783a8628700fc5414d834a21d8e48515760bb910f7  klogd.confd
3d6c4d358e226e0c0462f2003bcf0b6787f91a53f4d6b6db5bfe7748bb0dd392d7cc454058ea8a9b649e8dd2629963a5ad1257c36af04367caeb1923f954daf7  rdate.confd
330c6e6808dfdf05c75dcdec1048f17052f79b285e11513a64a97bf28fb60e023840966abe03a74fa146eb6b842c4e0e78df82918528e0b6e8f546f7f0a4e323  syslog.confd
359af0a4a1841dd6557eaf3e71d39f0d7a2687bad6a8fc6ef436eccf72a40f85c6400a3b7880c7f64d8e460b6af8a0ff3dd5ffc3a4b1aa8eb0d8f7eaf99ee3e4  watchdog.confd
61c1d6e764b3d43f307fbeb41ae0737cf4622e95b67c06999153a48b1a8703bd123b1baaa00591b25f2125374e000776531cf37518e870ced3977ea901826980  mdev.conf
ebd82f935da2ca89097234dd8a8f47e179a423652c151123a1f3343f3e1e7bfaba2b8800380e988d4e8f4294545d3a9ab6708ae2e77c5b108b5f091bbce8f94a  dvbdev
0142234d0bda86ad1e5f88f1da34669e5fda46a0fd52ce507bd49ce74d2b7c12c323e8db863bccb924e6d632b568db8b243361b217c5b2e1d92a25feb6e62dec  ide_links
b2dcf0ded9264334d79fbbb05dd12d649dc3119a060db5893f0e8aeca2141323961c3ba4c822a0ffb00dba848742d5cb374dc77e776b57cecde352a3e8e30f8a  usbdev
392c40d223bdff59a624bd67907c06cff9c1b5468c25c19e10dbc3cef3208275d93966e760f140d71a86cb36ec796ea08dbaa767b40c12e9326c3c72964b28a8  usbdisk_link
5db6fa8bbb2d891212187c598cd8703277b3fcb95b5dba6628f7128eb48cc7c1bf4c53885e9d870999c8c95d2fe9cd27609b523596dc553c31b6f72a452a0118  xvd_links
180fc60f235c89a377d7197fb085a2aa4b3ca1a8f559c89909e4cf08526205eb1de2256fd9e2b67093bbf202364500b638cc1aafeb57bf20fa4ce4ca3d5e965f  default.script"

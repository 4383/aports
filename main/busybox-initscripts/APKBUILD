# Contributor: Natanael Copa <ncopa@alpinelinux.org>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=busybox-initscripts
pkgver=2.2
pkgrel=12
pkgdesc="Init scripts for busybox daemons"
url="http://git.alpinelinux.org/cgit/aports/tree/core/busybox-initscripts"
arch="noarch"
license="GPL-2"
depends="busybox"
makedepends=
install=$pkgname.post-install
subpackages=
replaces="alpine-baselayout"
source="acpid.initd cron.initd dnsd.initd httpd.initd inetd.initd klogd.initd 
	mdev-mount.initd mdev.initd rdate.initd syslog.initd watchdog.initd
	cron.confd klogd.confd rdate.confd syslog.confd watchdog.confd
	mdev.conf dvbdev ide_links usbdev usbdisk_link xvd_links
	default.script
	"

build() {
	return 0
}

package() {
	local i
	cd "$srcdir"

	mkdir -p "$pkgdir"/etc/conf.d "$pkgdir"/etc/init.d "$pkgdir"/lib/mdev\
		"$pkgdir"/etc/acpi/PWRF
	for i in *.initd; do
		install -m755 "$srcdir"/$i "$pkgdir"/etc/init.d/${i%.*} || return 1
	done
	for i in *.confd; do
		install -m644 "$srcdir"/$i "$pkgdir"/etc/conf.d/${i%.*} || return 1
	done
	install -m644 mdev.conf "$pkgdir"/etc
	install -m755 dvbdev ide_links usbdev usbdisk_link xvd_links "$pkgdir"/lib/mdev/

	# poweroff script for acpid
	cat >"$pkgdir"/etc/acpi/PWRF/00000080 <<EOF
#!/bin/sh
poweroff
EOF
	chmod +x "$pkgdir"/etc/acpi/PWRF/00000080

	# script for udhcpc
	install -Dm755 "$srcdir"/default.script \
		"$pkgdir"/usr/share/udhcpc/default.script || return 1
	
}

md5sums="eba3eab9ace889088e01c6c9e80ae3db  acpid.initd
6db6c6d6a5e0169e54a0e0527d83dfff  cron.initd
dad20779adfb4b85b57b45c7c903a636  dnsd.initd
56d24c7bd4e5d442c7436b0819017ff3  httpd.initd
7504e0700dfa85f354d31af7a58663f9  inetd.initd
b0146b19b828051985377de1e4431a32  klogd.initd
6de9bac27127a7e1dbcc86acbc920521  mdev-mount.initd
8ead1e5bb37f536ca736a1e0d0cd7522  mdev.initd
c01dc869cbdd68e86e64a35ccc1e885e  rdate.initd
4ef91ad26f5b6e64b5bc545e35f18af1  syslog.initd
254186e513ff9fb9ede6a2e92257b247  watchdog.initd
8ddb8d040c9c7a32c63039a2c80ff496  cron.confd
60bc14cc3163d76f41bcc93dc0f9984b  klogd.confd
22adbf155ffc4595206ded6daad07812  rdate.confd
77fb31a75511247bf4e3430565a276bc  syslog.confd
0bb55dde32f5e119111fa4938daaef3d  watchdog.confd
e5bc732b0645aee005aef2d2fff54caf  mdev.conf
ad1556961294e4aa2abca6be52138b7c  dvbdev
5c8725b4cbdeda23b00f08124a0d20bf  ide_links
daf57f3d0372f825ddc05b00973e5afe  usbdev
30b0c85956b6701caf55309a17e537f6  usbdisk_link
826d85313ca7a4a0205d63bd58b7d01f  xvd_links
c6470658e54f040bb85cb1fc7b56f10c  default.script"
sha256sums="716a402240f57ff777c2fc9d5e88f1c22abce9034f041be0e100ab8c1ee7f2af  acpid.initd
6d36b8478f3775a3f670c00a5f63647108e60a4867c5e447d45c5f5e277b5be9  cron.initd
4d2522011884af8a00e4132ee5b483db47ca949f37b8d85679f3f9919ac51eec  dnsd.initd
92c1b2778702724fea6dd0a982acef933f8991381c60909bda9b416f8433580c  httpd.initd
eb67a75f410d093efab7fd535a0f312f76395edd86e6549d6f07248db91daa59  inetd.initd
dd99ebb1285065101bf96f0184d546961d76feaf4e968c530941a351b217d86a  klogd.initd
2e926542fd4e0fb16e2655ddef0d0cd752178757eff4f19ad09714509e534951  mdev-mount.initd
9d3fefb7f1e76eefd61151013da014694a6f2f74b9594b7276633db636bdcc7f  mdev.initd
fe551ee6bf08b6e0e9eaea3c93edead6e0ed3aa7c9c1129ba3c503bebdbc7c25  rdate.initd
21f260489132820111873db0a2ec9febae0d481a06ef6be1943449f0082fc9d0  syslog.initd
e3bb9f5135d8700d2aa8bb2ad9bb057ce5330793fc51f06c81d3267561b0f2ac  watchdog.initd
6b466c5b0e9cab7613aa56edf383e891c5c7e26ee00467e9f7913808be23a328  cron.confd
f6cd63d6e5f384dcb01a4906c9a0b6c5923794380235dfe0d79b48a686b03c5d  klogd.confd
791d49802395861a5f788dc7436c1260ec2cd3bdea0c790952ae1b2dd518e811  rdate.confd
8a2362d6b5b1ec1d754878726392119f2cc7416c748ee4f2ab134f731d6e6198  syslog.confd
77f6f9069afdbb477a7e822aa2c7265d64fd22fdd9338bb3beb0cee901d202ce  watchdog.confd
2d870d9ccb6b2719677bd1902125db80466e71bc1af246523e831cbff6099448  mdev.conf
ef091bb4c8943a99b9a97b556cdc15ddd20275f5afa8287e201419b08c4e71de  dvbdev
3fccc9ee437e3dcc8ac73bfe3713334a7156a112fe442e052fff4f26ff0f6a88  ide_links
dcb0c37590019bccb4c31a5372cbf7728eae6f1174d56bf0708d7504243a5fbb  usbdev
4957f6991e0cb988b263b5276b582f1757deecad19cddebe3c615b381df9f858  usbdisk_link
86ed99205050a5dcca8a27c7e8658df8c55dc85ed810db0d64b51f7c63aa140e  xvd_links
b9129dd73ffa93f9a5fa85469b9ba144cc4948b02de0bea45eee0469176cc8f8  default.script"
sha512sums="2897d71b825a7788aaaa6ad66a54bf33db6a9eadd216289ac2a45381ae37cd5f0542cf88a1c0c846b2fa6a228e18d9c51eeec01e0174b666424083a86d84fa9e  acpid.initd
4c687c65b72488e8860f050677da17b3610d7f6a81d1f73a33cef9d48b4b5f20ea0d7d7b2e1f030747a99331cdf731d42efe211d0ac2fdcd0833f9d7a9328321  cron.initd
8a4dc914780c179d926c64da262af4ae4133739bfd1734e0fe63067eaac7b1942c4fe5ca9c9e0f74481db8fcd12f75ab9e70cd1cfb6ebb36eeb6998bbbf6c602  dnsd.initd
d9a03af5dec8371492401024c7fa599268603fa6c9dd9e48ae7899c9f45f1afa537a48d667cfe6c0257c4e1dca7ad66be6093b0768dd5a843fd46c7891ec2265  httpd.initd
0f7984e3474e7c7d8de0d503b436a3c7679ec6e8f86c0a810ba9902703d9d68d2e210bf96da8d0ad603d12fb075d102b3f468b9050e6f03d7e0f5c577ed0f26e  inetd.initd
389838a84193152abf67ac110071dacd9ed59c6ecec8884196fa9d15e2887a69200eadcad003809043dfcdc2f045f534b092725b1b3adf0f215a7941d927003a  klogd.initd
2d43f3d9fb48164b34daaa55e8f2936d6235dd14b1bb368b4bdc90bd870c595fce39accd981ecb23bacdaddf9fa2adbea4eb9ee7080e9dd2fff8e7636f5f9f16  mdev-mount.initd
2d19e8bb43c5378421934dd436ec36896883b6c35364358b3ee34f6f1fb07f3f49290e0cd32b3d3dc5b863a92a5c4dfe0942e6b62889171edde864fd0b84163c  mdev.initd
6297d604926b4f13155b8382d6713a820c48d97ce001f6571c1a66b3b96f0f5f6ec6eb684d99016d961b8f72ddd8300e30eebccb84b8064f7582aba88493a017  rdate.initd
65b73243a325fbcebd8b1d0691b8834b985a5cb863739433e6ae726c03e4ffc9320d8e21a24901bf31507ff448bf320c9df1f839c0a2244208b10b1243c2b535  syslog.initd
6cca74e18a7465fed6e00fd2bcd6116cb6a02d8b1c3148323b6d07dcc2ff69af1306fe76afc93bd3b5694ba6631a7a40afa95bdcbdca43edac003859c9b56794  watchdog.initd
49c4299eca93517f09c6af71dd6bf737fec4006dfbf72b696fc3ec3e39d61fdd63107cae1bd883b2539848d52e6f6b1ed494d0c871e92e50fc55669295f3585e  cron.confd
f9bf43b72142bbb4c0665c1268a3d91586ef8a057dfe64c53b6923815d2db1f669b8080a38311ad89cda0b783a8628700fc5414d834a21d8e48515760bb910f7  klogd.confd
3d6c4d358e226e0c0462f2003bcf0b6787f91a53f4d6b6db5bfe7748bb0dd392d7cc454058ea8a9b649e8dd2629963a5ad1257c36af04367caeb1923f954daf7  rdate.confd
330c6e6808dfdf05c75dcdec1048f17052f79b285e11513a64a97bf28fb60e023840966abe03a74fa146eb6b842c4e0e78df82918528e0b6e8f546f7f0a4e323  syslog.confd
359af0a4a1841dd6557eaf3e71d39f0d7a2687bad6a8fc6ef436eccf72a40f85c6400a3b7880c7f64d8e460b6af8a0ff3dd5ffc3a4b1aa8eb0d8f7eaf99ee3e4  watchdog.confd
61c1d6e764b3d43f307fbeb41ae0737cf4622e95b67c06999153a48b1a8703bd123b1baaa00591b25f2125374e000776531cf37518e870ced3977ea901826980  mdev.conf
ebd82f935da2ca89097234dd8a8f47e179a423652c151123a1f3343f3e1e7bfaba2b8800380e988d4e8f4294545d3a9ab6708ae2e77c5b108b5f091bbce8f94a  dvbdev
0142234d0bda86ad1e5f88f1da34669e5fda46a0fd52ce507bd49ce74d2b7c12c323e8db863bccb924e6d632b568db8b243361b217c5b2e1d92a25feb6e62dec  ide_links
b2dcf0ded9264334d79fbbb05dd12d649dc3119a060db5893f0e8aeca2141323961c3ba4c822a0ffb00dba848742d5cb374dc77e776b57cecde352a3e8e30f8a  usbdev
392c40d223bdff59a624bd67907c06cff9c1b5468c25c19e10dbc3cef3208275d93966e760f140d71a86cb36ec796ea08dbaa767b40c12e9326c3c72964b28a8  usbdisk_link
5db6fa8bbb2d891212187c598cd8703277b3fcb95b5dba6628f7128eb48cc7c1bf4c53885e9d870999c8c95d2fe9cd27609b523596dc553c31b6f72a452a0118  xvd_links
180fc60f235c89a377d7197fb085a2aa4b3ca1a8f559c89909e4cf08526205eb1de2256fd9e2b67093bbf202364500b638cc1aafeb57bf20fa4ce4ca3d5e965f  default.script"

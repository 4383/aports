# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=aterm
pkgver=1.0.1
pkgrel=4
pkgdesc="An xterm replacement with transparency support"
url="http://aterm.sourceforge.net/"
arch="all"
license="GPL2+"
makedepends="libxext-dev libsm-dev libxt-dev"
depends=""
subpackages="$pkgname-doc"
source="http://downloads.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tar.bz2
	uclibc.patch"

_builddir="$srcdir"/$pkgname-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build () {
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--enable-transparency=yes \
		--enable-background-image \
		--enable-fading \
		--enable-menubar \
		--enable-graphics \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make install DESTDIR="$pkgdir" || return 1
	install -m644 -D "$_builddir"/doc/$pkgname.1 \
		"$pkgdir"/usr/share/man/man1/$pkgname.1  || return 1
}

md5sums="c2eede028e1011e0ec7035cf319c9b5a  aterm-1.0.1.tar.bz2
cd942d2639bd32fb9cbf06c94dcd536f  uclibc.patch"
sha256sums="a161c3b2d9c7149130a41963899993af21eae92e8e362f4b5b3c7c4cb16760ce  aterm-1.0.1.tar.bz2
b2fff2e8efcba6d7f5de4ce9b5bb13f3000778abd5bdb1a43bfb457705a6bc84  uclibc.patch"
sha512sums="05c78590bba55d892d9f7add384e4ae8d56197dbcd9caff2be4a52d5c162e767a464359ba806fc95961d8035575a2b4a962fc35cfa44f95025b477fa3e15e56b  aterm-1.0.1.tar.bz2
213771d95d6c481934c5420133a3a9834527de0530478b10fe0452d87eaefe0b772f5c2a72a2b9b5a8daf6aed4cf586e2b161960c4fca9a2906b70f5896cf254  uclibc.patch"

# Maintainer:Carlo Landmeter
pkgname=transmission
pkgver=2.04
pkgrel=0
pkgdesc="Lightweight GTK BitTorrent client"
url="http://www.tansmissionbt.com"
install="$pkgname.pre-install"
license="MIT"
depends=
makedepends="openssl-dev pkgconfig curl-dev gtk+-dev intltool libevent-dev
	libnotify-dev dbus-glib-dev"
source="http://download.m0k.org/transmission/files/transmission-$pkgver.tar.bz2
	transmission-daemon.initd
	transmission-daemon.confd
	"
subpackages="$pkgname-cli $pkgname-daemon $pkgname-doc"

build() {
        cd "$srcdir/$pkgname-$pkgver"

        ./configure --prefix=/usr \
		--mandir=/usr/share/man 
        make || return 1
}

package() {
        cd "$srcdir/$pkgname-$pkgver"
        make DESTDIR="$pkgdir" install
}

daemon() {
	pkgdesc="Lightweight BitTorrent client (daemon and webinterface)"
	install -d "$subpkgdir"/usr/share "$subpkgdir"/usr/bin
	mv "$pkgdir"/usr/bin/transmission-daemon "$subpkgdir"/usr/bin/
	mv "$pkgdir"/usr/share/transmission "$subpkgdir"/usr/share/
        install -D -m755 "$srcdir"/transmission-daemon.initd \
		"$pkgdir"/etc/init.d/transmission-daemon
        install -D -m644 "$srcdir"/transmission-daemon.confd \
		"$pkgdir"/etc/conf.d/transmission-daemon
}

cli() {
	pkgdesc="Lightweight BitTorrent client (cli  and remote)"
	install -d "$subpkgdir"/usr/bin
	mv "$pkgdir"/usr/bin/transmission-remote \
		"$pkgdir"/usr/bin/transmissioncli \
		"$subpkgdir"/usr/bin/
}

md5sums="84fe15eb7e000fdc369def513299358b  transmission-2.04.tar.bz2
f65b8ae46f8ac89b35844109b3aa0c18  transmission-daemon.initd
89478a70fcd93463e1dd8d751da994da  transmission-daemon.confd"

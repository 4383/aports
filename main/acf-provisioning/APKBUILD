# Contributor: Ted Trask <ttrask01@yahoo.com>
# Maintainer: Ted Trask <ttrask01@yahoo.com>
_luaversion=5.2
pkgname=acf-provisioning
pkgver=0.7.2
pkgrel=0
pkgdesc="ACF for provisioning templated configs to devices"
url="http://git.alpinelinux.org/cgit/acf-provisioning"
arch="noarch"
license="GPL-2"
depends="acf-core lua lua-sql-postgres postgresql-client lua-posixtz"
makedepends=""
install=""
subpackages=""
source="http://dev.alpinelinux.org/archive/$pkgname/$pkgname-$pkgver.tar.xz"

package() {
	cd "$srcdir"/$pkgname-$pkgver

	# fix shebang
	sed -i -e "1s:#!/usr/bin/haserl :#!/usr/bin/haserl-lua$_luaversion :" \
		cgi-bin/provisioning.cgi || return 1
	
	make DESTDIR="$pkgdir" install
}

md5sums="063c40a58f35439d03ffb7cdd1ca5596  acf-provisioning-0.7.2.tar.xz"
sha256sums="afb751fe6fec9b2bc5763885bcdd2163dd2eb1da77a9371f424df4e15a5f16c2  acf-provisioning-0.7.2.tar.xz"
sha512sums="eb39e5af01600bc9185b5a3274d2e6af6da5200aacbeaf5d4b513f7a1fdd8db742db24aa3640064f45ed76f8e73b17a1bdc2a0e66518ed5872aa0d59bfa07efe  acf-provisioning-0.7.2.tar.xz"

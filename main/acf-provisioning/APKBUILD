# Contributor: Ted Trask <ttrask01@yahoo.com>
# Maintainer: Ted Trask <ttrask01@yahoo.com>
_luaversion=5.2
pkgname=acf-provisioning
pkgver=0.8.5
pkgrel=0
pkgdesc="ACF for provisioning templated configs to devices"
url="http://git.alpinelinux.org/cgit/acf-provisioning"
arch="noarch"
license="GPL2"
depends="acf-core lua lua-sql-postgres postgresql-client lua-posixtz"
makedepends=""
install=""
subpackages=""
source="http://dev.alpinelinux.org/archive/$pkgname/$pkgname-$pkgver.tar.xz"

package() {
	cd "$srcdir"/$pkgname-$pkgver

	# fix shebang
	sed -i -e "1s:#!/usr/bin/haserl :#!/usr/bin/haserl-lua$_luaversion :" \
		cgi-bin/provisioning.cgi || return 1
	
	make DESTDIR="$pkgdir" install
}

md5sums="ac3ca406844f841016132ab5542e6e75  acf-provisioning-0.8.5.tar.xz"
sha256sums="beeaf9f47f94cfdd63dbe6a728e3464b9cd56c75dd59af15c5d44c160a8899f3  acf-provisioning-0.8.5.tar.xz"
sha512sums="95d45764cc2a6dbfc1d812260a63f026e96532d9d847431bb9651e772c3375d058c6801e34a63405163f386e20edcfcaa59c23a041f80ea1f6a5dd15fabc7f65  acf-provisioning-0.8.5.tar.xz"

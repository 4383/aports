# Contributor: Ted Trask <ttrask01@yahoo.com>
# Maintainer: Ted Trask <ttrask01@yahoo.com>
_luaversion=5.2
pkgname=acf-provisioning
pkgver=0.8.14
pkgrel=0
pkgdesc="ACF for provisioning templated configs to devices"
url="http://git.alpinelinux.org/cgit/acf-provisioning"
arch="noarch"
license="GPL2"
depends="acf-core lua lua-sql-postgres postgresql-client lua-posixtz lua-xml"
makedepends=""
install=""
subpackages=""
source="http://dev.alpinelinux.org/archive/$pkgname/$pkgname-$pkgver.tar.xz"

package() {
	cd "$srcdir"/$pkgname-$pkgver

	# fix shebang
	sed -i -e "1s:#!/usr/bin/haserl :#!/usr/bin/haserl-lua$_luaversion :" \
		cgi-bin/provisioning.cgi || return 1
	
	make DESTDIR="$pkgdir" install
}

md5sums="090a891e92873d01c75db7c8f2470c2a  acf-provisioning-0.8.14.tar.xz"
sha256sums="0c6d40ad481f5a33f437100a9e32178f591d7e307fbb93b8c0dd83a84ce74c8d  acf-provisioning-0.8.14.tar.xz"
sha512sums="83bb7c8afe6804fa02d980c9b9632bc80735247b9d50719fd2c34b6c358ae2ad784ed5eccff5330caf10e7757bb70ed59a0f788002e0e9a32dbf1a0463d897b5  acf-provisioning-0.8.14.tar.xz"

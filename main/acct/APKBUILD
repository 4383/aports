# Contributor: Carlo Landmeter <clandmeter@gmail.com>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=acct
pkgver=6.5.5
pkgrel=0
pkgdesc="The GNU Accounting Utilities"
url="http://www.gnu.org/software/acct/"
arch="all"
license="GPL"
depends=
makedepends=
install=
subpackages="$pkgname-doc"
source="http://ftp.gnu.org/gnu/acct/${pkgname}-${pkgver}.tar.gz"

prepare() {
	cd "$srcdir/$pkgname-$pkgver"
	update_config_sub || return 1
	# fix eglibc-2.16+ build issue
	sed -i -e '/gets is a/d' \
		lib/stdio.in.h || return 1
}

build() {
	cd "$srcdir/$pkgname-$pkgver"

	# seems like this makefile does not respect DESTDIR
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--mandir="$pkgdir"/usr/share/man \
		--infodir="$pkgdir"/usr/share/info \
		--enable-linux-multiformat \
		|| return 1

	make LDADD="-lm lib/libgnu.la"	|| return 1
}

package() {
	cd "$srcdir/$pkgname-$pkgver"
	make prefix="$pkgdir/usr" install
}

md5sums="554a9e9c6aa3482df07e80853eac0350  acct-6.5.5.tar.gz"

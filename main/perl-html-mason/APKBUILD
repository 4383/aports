# Automatically generated by apkbuild-cpan, template 1
# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=perl-html-mason
_pkgreal=HTML-Mason
pkgver=1.51
pkgrel=0
pkgdesc="High-performance, dynamic web site authoring system"
url="http://search.cpan.org/dist/HTML-Mason/"
arch="noarch"
license="GPL PerlArtistic"
cpandepends="perl-cache-cache perl-log-any perl-html-parser perl-class-container perl-params-validate perl-exception-class"
cpanmakedepends="perl-test-deep  perl-test-deep "
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/J/JS/JSWARTZ/$_pkgreal-$pkgver.tar.gz"

_builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	make && make test
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="bb7ee986b3b7b3ea54fb6b7e25c56e81  HTML-Mason-1.51.tar.gz"
sha256sums="44769105f49b939f9dd2d83c2c1969ce52a149b741340f0154c7b860ae8575c7  HTML-Mason-1.51.tar.gz"
sha512sums="c585f1fedfef4ecdd5a366f79687fe61f1942374a6acc2ca7f8238819b0e43617524b273f173ac52d7037d6459ce11c2bca5f36015c0f245a063653446b614c2  HTML-Mason-1.51.tar.gz"

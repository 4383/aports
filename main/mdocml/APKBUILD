# Maintainer:  Natanael Copa <ncopa@alpinelinux.org>
pkgname=mdocml
pkgver=1.12.2
pkgrel=0
pkgdesc="mdoc/man compiler"
url="http://mdocml.bsd.lv/"
arch="all"
license="BSD"
depends=
makedepends=
install=
subpackages="$pkgname-doc $pkgname-dev $pkgname-man"
source="http://mdocml.bsd.lv/snapshots/mdocml-$pkgver.tar.gz man.sh"

_builddir="$srcdir"/$pkgname-$pkgver

prepare() {
	cd "$_builddir"
}

build() {
	cd "$_builddir"
	make PREFIX=/usr DBBIN= || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" PREFIX=/usr MANDIR=/usr/share/man DBBIN= \
		EXAMPLEDIR=/usr/share/doc/mdocml/examples install
}

man() {
	arch="noarch"
	cd "$srcdir"
	depends="mdocml"
	install -Dm 755 man.sh "$subpkgdir"/usr/bin/man || return 1
}

md5sums="0d019c34be3f5a86a8904cf19e63c679  mdocml-1.12.2.tar.gz
400673bfa64efd1ef446ea4421e25115  man.sh"
sha256sums="c4f37afbf823636f63e3cd0673ae6c2ffc6017558e86bdcc02dc825c62daa9d7  mdocml-1.12.2.tar.gz
da725bffcbc0d6be37d18470aee2407a068134ba120b436c6c4fc8c9a37e8e5d  man.sh"
sha512sums="9945a1c321014ff4f9134e93bedd4f8238dbb9ebb69df9d3e71656f0c5283160706152cb406a7699a6f2eb791681a9156059941e8e70cd4843b23137c0ade080  mdocml-1.12.2.tar.gz
4461f703e83661d6b03ea94fa7dda1cb390579e3f1439450000b230d5a7d0e5c0c158364085ff40bf880fb46881d4e850774dd5471003c1383011bdff6088abe  man.sh"

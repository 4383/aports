# Maintainer:  Natanael Copa <ncopa@alpinelinux.org>
pkgname=mdocml
pkgver=1.13.2
pkgrel=0
pkgdesc="mdoc/man compiler"
url="http://mdocml.bsd.lv/"
arch="all"
license="BSD"
depends=
makedepends=
install=
subpackages="$pkgname-doc $pkgname-dev $pkgname-man"
source="http://mdocml.bsd.lv/snapshots/mdocml-$pkgver.tar.gz man.sh"

_builddir="$srcdir"/$pkgname-$pkgver

prepare() {
	cd "$_builddir"
	./configure || return 1
}

build() {
	cd "$_builddir"
	make || return 1
}

package() {
	cd "$_builddir"
	make \
		DESTDIR="$pkgdir" \
		PREFIX=/usr \
		MANDIR=/usr/share/man \
		BINDIR=/usr/bin \
		SBINDIR=/usr/sbin \
		LIBDIR=/usr/lib \
		INCLUDEDIR=/usr/include \
		EXAMPLEDIR=/usr/share/doc/mdocml/examples \
		base-install
}

man() {
	arch="noarch"
	cd "$srcdir"
	depends="mdocml"
	install -Dm 755 man.sh "$subpkgdir"/usr/bin/man || return 1
}

md5sums="831ba06ef06bccdf35346fc3310263a5  mdocml-1.13.2.tar.gz
cc5c665dc509243963f1b3a60f655b7f  man.sh"
sha256sums="9074755da96e8afbf9634d7ffa29c1decda2f642e13d9d844f26cd1e06d9716b  mdocml-1.13.2.tar.gz
03039dd8c79cf054200cfe328924078ecc103f87be94ecabf7f7e5ad9e3c48eb  man.sh"
sha512sums="7db73ff83be9acff50e8570de96591869c950dad8b350d119e57fcf39937a3272cf9d70397af2e21ec69877c5f81bc1c4e027910a4aef1033ff54b744904412c  mdocml-1.13.2.tar.gz
2d6bcde740d613ab225c2e35e53d6057bdc367ef85c75ccb99df587f51484e87c5fd958298be9d770241014eec4a2bd7be8084f00815fd64a999cb7752bdfb3f  man.sh"

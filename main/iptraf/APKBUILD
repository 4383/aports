# Contributor: Leonardo Arena <rnalrd@gmail.com>
# Maintainer: Leonardo Arena <rnalrd@gmail.com>
pkgname=iptraf
pkgver=3.0.0
pkgrel=0
pkgdesc="IP Network Monitoring Software"
url="http://iptraf.seoul.org"
license="GPL"
depends="uclibc ncurses"
makedepends="ncurses-dev"
install=
subpackages="$pkgname-doc"
source="ftp://iptraf.seul.org/pub/$pkgname/$pkgname-$pkgver.tar.gz"

build() {
	cd "$srcdir/$pkgname-$pkgver/src"

	sed -i -e s:/var/local/iptraf:/var/lib/iptraf: \
		-e s:/usr/local/bin:/usr/sbin: dirs.h
        make CFLAGS="$CFLAGS" DEBUG="" TARGET="/usr/sbin" \
		WORKDIR="/var/lib/iptraf" || return 1

	for sbin in iptraf rvnamed; do
		/bin/install -D -m755 $sbin $pkgdir/usr/sbin/$sbin
	done

        cd ../Documentation
	for man in *.8; do
		/bin/install -D -m644 $man $pkgdir/usr/share/man/man8/$man
	done
	
	for dir in lib log run; do
		/bin/mkdir -p $pkgdir/var/$dir/iptraf
	done
}

md5sums="377371c28ee3c21a76f7024920649ea8  iptraf-3.0.0.tar.gz"

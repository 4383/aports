# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=readline
pkgver=6.3
#_myver=${pkgver%.*}
#_patchver=${pkgver##*.}
#_suff=${_myver%.*}${_myver#*.}
_myver=$pkgver
pkgrel=0
pkgdesc="GNU readline library"
url="ftp://ftp.cwru.edu/pub/bash/"
arch="all"
license="GPL"
depends=
makedepends="ncurses-dev"
subpackages="$pkgname-dev $pkgname-doc"
source="http://ftp.gnu.org/gnu/readline/readline-${_myver}.tar.gz
	"

# generate url's to patches. note: no forks allowed!
#_i=1
#while [ $_i -le $_patchver ]; do
	#source="$source http://ftp.gnu.org/gnu/readline/readline-$_myver-patches/readline$_suff-00$_i"
	#_i=$(( $_i + 1))
#done

_builddir="$srcdir"/$pkgname-$_myver
prepare() {
	cd "$_builddir"
	update_config_sub || return 1
	#for i in "$srcdir"/readline$_suff-???; do
		#[ -r "$i" ] || continue
		#msg "Applying ${i##*/}"
		#patch -Np0 -i ${i} || return 1
	#done
}

build() {
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		|| return 1

	make SHLIB_LIBS=-lncurses || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1

}
md5sums="33c8fb279e981274f485fd91da77e94a  readline-6.3.tar.gz"
sha256sums="56ba6071b9462f980c5a72ab0023893b65ba6debb4eeb475d7a563dc65cafd43  readline-6.3.tar.gz"
sha512sums="f70efaf46d570b85c7637172b0ee2eb9a4aa73ba38a62bb45075e665929d9701b96fba0aea6c767fd9a2a0d39dfe8e70ab06da08f8524aee76a7c502f370a401  readline-6.3.tar.gz"

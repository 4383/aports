# Contributor: Fabian Affolter <fabian@affolter-engineering.ch>
# Maintainer: Fabian Affolter <fabian@affolter-engineering.ch>
pkgname=myrepos
pkgver=1.20130710
pkgrel=0
pkgdesc="A multiple repository management tool"
url="http://kitenet.net/~joey/code/mr/"
arch="noarch"
license="GPL2+"
depends="perl"
depends_dev=""
makedepends=""
replaces="mr"
install=""
subpackages="$pkgname-doc"
source="http://ftp.de.debian.org/debian/pool/main/m/$pkgname/${pkgname}_${pkgver}.tar.gz"

_builddir="$srcdir"/$pkgname
build() {
	cd "$_builddir"
	make || return 1
}

package() {
	cd "$_builddir"
	install -Dm755 $pkgname "$pkgdir"/usr/bin/$pkgname || return 1
	cd "$_builddir"/lib
	for file in git-fake-bare git-svn unison; do
		install -Dpm 0644 $file \
			"$pkgdir"/usr/share/$pkgname/$file  || return 1
	done
}

doc() {
	cd "$_builddir"
    mkdir -p "$subpkgdir"/usr/share/man || return 1
    mv "$_builddir"/*.1 "$subpkgdir"/usr/share/man/ || return 1
	# Sample configuration files
	for file in mrconfig mrconfig.complex; do
		install -Dpm 0644 $file \
			"$subpkgdir"/usr/share/doc/$pkgname/$file  || return 1
	done
}

md5sums="a5e16a7649a46e4cc9d298ff6810bba1  myrepos_1.20130710.tar.gz"
sha256sums="e87993bd619a028f7ccf82a2d9da386ed205c81566729ef14b3581f2c69224f8  myrepos_1.20130710.tar.gz"
sha512sums="6a4edab663dcc486ef706fae4a7217f3e388fa9db918f0b769657d81a335744d42d32510f49e94227c36348d654053b1a90bc8f5815cdf2deb5479d8c545fd3e  myrepos_1.20130710.tar.gz"

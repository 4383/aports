# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=f2fs-tools
pkgver=1.1.0
pkgrel=0
pkgdesc="Tools for Flash-Friendly File System (F2FS)"
url="http://sourceforge.net/projects/f2fs-tools/"
arch="all"
license="GPLv2+"
depends=""
depends_dev=""
makedepends="$depends_dev automake autoconf util-linux-dev"
install=""
subpackages="$pkgname-doc"
#source="http://git.kernel.org/cgit/linux/kernel/git/jaegeuk/f2fs-tools.git/snapshot/f2fs-tools-$pkgver.tar.gz"
source="http://dev.alpinelinux.org/archive/f2fs-tools/f2fs-tools-$pkgver.tar.gz"

_builddir="$srcdir"/f2fs-tools-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
	aclocal && autoconf && automake --add-missing
}

build() {
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make install DESTDIR="$pkgdir"
}

md5sums="f163f5cff30c3d2bb59a5b002b3141ea  f2fs-tools-1.1.0.tar.gz"
sha256sums="c8cfb6895a0b3775f0df00a776fd451558739289684dd43f1fd75f876fa62867  f2fs-tools-1.1.0.tar.gz"
sha512sums="1c6d750855f3d1df6cb309d9ec49a43da8127409c10708cd19951c210c112e30c9fd93a179e9f272847aaa5f6148ebddf8c56291928e56692d448266bf7dcb45  f2fs-tools-1.1.0.tar.gz"

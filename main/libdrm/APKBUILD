# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=libdrm
pkgver=2.4.29
pkgrel=0
pkgdesc="Userspace interface to kernel DRM services"
url="http://dri.freedesktop.org/"
arch="all"
license="custom"
depends=
makedepends="pkgconfig libpthread-stubs udev-dev libpciaccess-dev"
subpackages="$pkgname-dev"
source="http://dri.freedesktop.org/$pkgname/$pkgname-$pkgver.tar.bz2"

build() {
	cd "$srcdir"/$pkgname-$pkgver
	./configure --prefix=/usr \
		--enable-udev \
		--enable-nouveau-experimental-api || return 1
	make || return 1
}

package() {
	cd "$srcdir"/$pkgname-$pkgver
	make DESTDIR="$pkgdir" install || return 1
	rm "$pkgdir"/usr/lib/*.la || return 1
}

md5sums="96d5e3e9edd55f4b016fe3b5dd0a1953  libdrm-2.4.29.tar.bz2"

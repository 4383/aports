--- ./src/ui/theme.c.orig
+++ ./src/ui/theme.c
@@ -52,6 +52,7 @@
  * things. This is the parser used for that language.
  */
 
+#define _XOPEN_SOURCE
 #include <config.h>
 #include "theme.h"
 #include "theme-parser.h"
@@ -60,7 +61,6 @@
 #include <gtk/gtk.h>
 #include <string.h>
 #include <stdlib.h>
-#define __USE_XOPEN
 #include <math.h>
 
 #define GDK_COLOR_RGBA(color)                                           \
--- ./src/core/session.c.orig
+++ ./src/core/session.c
@@ -23,6 +23,7 @@
  * 02111-1307, USA.
  */
 
+#define _XOPEN_SOURCE
 #include <config.h>
 
 #include "session.h"

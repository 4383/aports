# Contributor: Carlo Landmeter <clandmeter@gmail.com>
# Maintainer:
pkgname=duply
pkgver=1.9.0
pkgrel=0
pkgdesc="Wrapper for duplicity"
url="http://duply.net"
arch="noarch"
license="GPLv2"
depends="duplicity bash"
depends_dev=""
makedepends="$depends_dev txt2man"
install=""
subpackages="$pkgname-doc"
source="http://downloads.sourceforge.net/ftplicity/${pkgname}_${pkgver}.tgz"

_builddir="$srcdir"/duply_${pkgver}

prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
}

package() {
	cd "$_builddir"
	install -Dm755 duply \
		"$pkgdir"/usr/bin/duply
	mkdir -p "$pkgdir"/usr/share/man/man1
	"$pkgdir"/usr/bin/duply txt2man > \
		"$pkgdir"/usr/share/man/man1/duply.1
	install -Dm644 gpl-2.0.txt \
		"$pkgdir"/usr/share/licenses/$pkgname/COPYING
}

md5sums="640d238f4b5ce73aeebbae5eabfc8761  duply_1.9.0.tgz"
sha256sums="28dd73f7987507a11abdec4f89698f059d7165e8519b9c26f542fec43060b492  duply_1.9.0.tgz"
sha512sums="fa78661992822fc4639bba1e3f86f1542366d07d7aa08b8bff1b5b18b3e3cba3f97b9344792db4cc3ca06881fdb215f934cecfea774d8394dc2451f23aa8e19a  duply_1.9.0.tgz"

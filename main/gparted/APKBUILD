# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=gparted
pkgver=0.26.0
pkgrel=1
pkgdesc="a graphical partition editor for creating, reorganizing, and deleting disk partitions"
url="http://gparted.sourceforge.net/"
arch="all"
license="GPL"
depends="e2fsprogs"
makedepends="gtkmm-dev parted-dev util-linux-dev"
install=
subpackages="$pkgname-doc $pkgname-lang"
source="http://downloads.sourceforge.net/project/gparted/gparted/gparted-$pkgver/gparted-$pkgver.tar.gz
	gparted.in-Use-reliable-way-of-detecting-gpartedbin-.patch"

_builddir="$srcdir"/$pkgname-$pkgver

prepare() {
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--disable-doc \
		--disable-scrollkeeper \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install
}

md5sums="4980fa2b7acf591c53d8c5aecd633306  gparted-0.26.0.tar.gz
6cafd3becb4253f4afac4c24115c28e5  gparted.in-Use-reliable-way-of-detecting-gpartedbin-.patch"
sha256sums="bcf339328c183e1d825d41267cf435b193f1312fc3b9ce207e6087e653e27fb4  gparted-0.26.0.tar.gz
8bbdec6c2ec213b05abe9f32da93950ce3fd836efe94d7266a299cb1b4bb194b  gparted.in-Use-reliable-way-of-detecting-gpartedbin-.patch"
sha512sums="1017e1f460dd24d08959f018e51d523ae461b29350a136eb3a6cca524a966ad235edee80063fe1b6a0e1a5445e2b30086efbc98d7b948f61e9ddf758c03fc049  gparted-0.26.0.tar.gz
565f65440fed9d603aaff4e08d4c319c62e61bb064f9edc5934f671b3a63df02aa505200c0224038db64a4275352a30913755a4ad030e71e7b5c372a9316c278  gparted.in-Use-reliable-way-of-detecting-gpartedbin-.patch"

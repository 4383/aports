# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=syslinux
pkgver=3.86
pkgrel=1
pkgdesc="a boot loader for the Linux operating system which operates off an MS-DOS/Windows FAT filesystem."
url="http://syslinux.org"
license="GPL"
makedepends="nasm perl"
depends="mtools"
source="http://www.kernel.org/pub/linux/utils/boot/syslinux/3.xx/$pkgname-$pkgver.tar.bz2
	$pkgname-3.86-nopie.patch
	"
subpackages="$pkgname-doc"

_builddir="$srcdir"/$pkgname-$pkgver
prepare() {
	cd "$_builddir"
	patch -p1 < ../$pkgname-3.86-nopie.patch || return 1
}

build() {
	cd "$_builddir"
	unset LDFLAGS
	make installer || return 1
}

package() {
	cd "$_builddir"
	make INSTALLROOT="$pkgdir" MANDIR=/usr/share/man local-install
}

md5sums="d6fb0231e82190b4932b2aa20274911a  syslinux-3.86.tar.bz2
5852d62ba0772cf967156a75451e6066  syslinux-3.86-nopie.patch"

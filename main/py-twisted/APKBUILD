# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=py-twisted
_pkgname=Twisted
pkgver=13.0.0
pkgrel=1
pkgdesc="Asynchronous networking framework written in Python."
url="http://twistedmatrix.com/"
arch="all"
license="MIT"
depends="py-crypto py-zope-interface"
makedepends="python-dev"
install=""
subpackages="$pkgname-doc"
source="http://twistedmatrix.com/Releases/Core/${pkgver%.*}/"$_pkgname"Core-$pkgver.tar.bz2"

_builddir="$srcdir"/"$_pkgname"Core-$pkgver
build() {
	cd "$_builddir"
	python setup.py build || return 1
}

package() {
	cd "$_builddir"
	python setup.py install --prefix=/usr --root="$pkgdir" || return 1
	install -D -m644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
	_mans="manhole.1 pyhtmlizer.1 tap2deb.1 tapconvert.1 trial.1 twistd.1"
    for _man in $_mans; do
		install -m644 -D "$_builddir"/doc/man/$_man \
			"$pkgdir"/usr/share/man/man1/$_man  || return 1
	done
}

md5sums="83c2ebed9577a68138eb32b4fdfc65a0  TwistedCore-13.0.0.tar.bz2"
sha256sums="989706fd39c8a28785bdecaa0145b81f7e159b9209d463b5885be7e5c34ff32f  TwistedCore-13.0.0.tar.bz2"
sha512sums="624d73d267742cb5b97bed2a39e78caeb01ee5fa871a0a2133455809b1d2a695f0d375c022ae21e91ef20f92fdee05a08a11db7b6b1e92ec810d3e097f929972  TwistedCore-13.0.0.tar.bz2"

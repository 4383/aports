# Contributor: Alan Messias Cordeiro <alancordeiro@gmail.com>
# Maintainer: Alan Messias Cordeiro <alancordeiro@gmail.com>
pkgname=darkhttpd
pkgver=1.10
pkgrel=0
pkgdesc="A simple, single-threaded, static content webserver"
url="http://unix4lyfe.org/darkhttpd/"
arch="all"
license="BSD"
depends=""
depends_dev=""
makedepends="$depends_dev"
install="$pkgname.pre-install"
subpackages=""
source="http://unix4lyfe.org/darkhttpd/darkhttpd-$pkgver.tar.bz2
	$pkgname.initd"

_builddir="$srcdir/$pkgname-$pkgver"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	make || return 1
}

package() {
	# install binary
        cd "$_builddir"
	install -Dm755 $pkgname "$pkgdir"/usr/bin/$pkgname || return 1
	install -d "$pkgdir"/var/www/localhost/htdocs \
		"$pkgdir"/var/log/darkhttpd || return 1

	# install init.d
        install -Dm755 "$srcdir"/$pkgname.initd "$pkgdir"/etc/init.d/$pkgname || return 1
}

md5sums="652968ca104e57235519cadd2d6fdda2  darkhttpd-1.10.tar.bz2
ca1ef549dd1a18d3e3614e6c466ba898  darkhttpd.initd"
sha256sums="b5a9bcfe6e65a3fc20f96e6badb5da7ba776a792f13fe90015fe9f63b3c2eb63  darkhttpd-1.10.tar.bz2
cb6e4ccda90337f660c19f011c0c474aa9fcd6f93b93e675cafd5cabbc7f99a5  darkhttpd.initd"
sha512sums="87cde803a562dabaecddda99748ced8fbc7b62cfa1d0b6e628d480ebdcf987454d48d32d1fdaeed2f4e9071e95e130e7bbdbe2394da30a41d64916428f8f608e  darkhttpd-1.10.tar.bz2
771d31ff90f78266f616b875366171f7b29bb91d7a2774bf4eb4c4d808ccd5348bae595433d27307a725072f96dd8a4827db5d2bc23669448a605c731dfde177  darkhttpd.initd"

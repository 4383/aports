# Maintainer: Bart≈Çomiej Piotrowski <bpiotrowski@alpinelinux.org>

pkgname=xtrabackup
pkgver=2.1.9
pkgrel=0
pkgdesc='MySQL non-blocking backup solution for InnoDB and XtraDB data'
arch=all
url='http://www.percona.com/software/percona-xtrabackup/'
license='GPL'
makedepends='bash bison cmake ncurses-dev libaio-dev libgcrypt-dev
             py-setuptools py-sphinx zlib-dev'
source="http://percona.com/redir/downloads/XtraBackup/XtraBackup-$pkgver/source/percona-xtrabackup-$pkgver.tar.gz"

build() {
  cd "$srcdir"/percona-xtrabackup-$pkgver
  AUTO_DOWNLOAD=yes utils/build.sh innodb55
}

package() {
  cd "$srcdir"/percona-xtrabackup-$pkgver

  install -D innobackupex "$pkgdir"/usr/bin/innobackupex
  install -D src/xtrabackup_innodb55 "$pkgdir"/usr/bin/xtrabackup
  install -D src/xbcrypt "$pkgdir"/usr/bin/xbcrypt
  install -D src/xtrabackup_innodb55 "$pkgdir"/usr/bin/xbstream
}

md5sums="d1d2a63b4b4712c76c5c058ea8a635af  percona-xtrabackup-2.1.9.tar.gz"
sha256sums="fc286537470d01b218104c35c77a9f9304efa2bd031cf464ee5fadda4caa74b7  percona-xtrabackup-2.1.9.tar.gz"
sha512sums="27374ab672394c9c9d722bdfc28834b24a4f73f39ae41aa890c445a117bf813dd5f812aafe76a5c5e4e524dc528fb3c42f593428dbbcc9f19cfa85efa8cfcf52  percona-xtrabackup-2.1.9.tar.gz"

# Contributor: Natanael Copa <ncopa@alpinelinux.org>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=hydrogen
pkgver=0.9.6
pkgrel=0
pkgdesc="Advanced drum machine for GNU/Linux"
url="http://www.hydrogen-music.org/"
arch="all"
license="GPL2+"
depends=""
makedepends="qt-dev alsa-lib-dev flac-dev libsndfile-dev cmake portaudio-dev
	libarchive-dev jack-dev"
install=""
subpackages="$pkgname-dev"
source="https://github.com/hydrogen-music/hydrogen/archive/$pkgver.tar.gz"

_builddir="$srcdir"/hydrogen-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	export QTDIR=/usr/lib
	cmake . -DCMAKE_INSTALL_PREFIX=/usr \
		-DWANT_CPPUNIT=OFF \
		-DWANT_LRDF=ON \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	export QTDIR=/usr/lib
	make install DESTDIR="$pkgdir" || return 1
}

md5sums="e4424926a88af82fb2048b3548723827  0.9.6.tar.gz"
sha256sums="bc4cf69662714f583a5922951f8a0f1ea5ee9de140a2b36320b7a212b042f2fc  0.9.6.tar.gz"
sha512sums="de1d418fba1b8f7f4499db5320cce05b86ce13faaa9310869c537bb196d1905fef038580a7e1c137949d0b301e4aeef4a60fcb57ceef6d6a320bb53e9a93b51f  0.9.6.tar.gz"

# Contributor: Michael Mason <ms13sp@gmail.com> 
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=fetchmail
pkgver=6.3.9
pkgrel=3
pkgdesc="A remote-mail retrieval and forwarding utility"
url="http://fetchmail.berlios.de/"
license="GPL"
depends=
makedepends="openssl-dev python"
install="fetchmail.pre-install fetchmail.post-install"
subpackages="$pkgname-doc fetchmailconf"
source="http://download.berlios.de/fetchmail/$pkgname-$pkgver.tar.bz2
	$install
	fetchmail.initd"
build() {
	cd "$srcdir/$pkgname-$pkgver"

	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--with-ssl \
		--disable-nls
	make || return 1
	make DESTDIR="$pkgdir" install
	install -Dm755 "$srcdir"/fetchmail.initd "$pkgdir"/etc/init.d/fetchmail
	install -d "$pkgdir"/var/lib/fetchmail "$pkgdir"/var/run/fetchmail
}

fetchmailconf() {
	depends="python"
	pkgdesc="A GUI for generating fetchmail configuration files"
	install=
	mkdir -p "$subpkgdir"/usr/bin
	cd "$pkgdir" 
	mv usr/bin/fetchmailconf "$subpkgdir"/usr/bin/
	mv usr/lib "$subpkgdir"/usr/
}

md5sums="72c20ad2b9629f1a109668b05a84d823  fetchmail-6.3.9.tar.bz2
5a2fc8e8b3115fe2b9bf23503fb8f0a4  fetchmail.pre-install
4b451d102e92926b6b6c1774f4260310  fetchmail.post-install
22e9ac1d8385db05da15e01fd5c831e4  fetchmail.initd"

# Contributor: Leonardo Arena <rnalrd@gmail.com>
# Maintainer: Natananael Copa <ncopa@alpinelinux.org>

pkgname=ssmtp
pkgver=2.63
pkgrel=0
pkgdesc="Extremely simple MTA to get mail off the system to a mail hub"
subpackages="$pkgname-doc"
arch=""
url="http://packages.debian.org/source/lenny/ssmtp"
license="GPL-2"
depends=
makedepends="openssl-dev"
install=
source="http://ftp.debian.org/debian/pool/main/s/$pkgname/${pkgname}_${pkgver}.orig.tar.gz
        generate_config.patch
	"

build() {
	cd "$srcdir"/$pkgname-$pkgver
	patch generate_config ../generate_config.patch || return 1
	sed -i -e 's:$(CC) -o:$(CC) @LDFLAGS@ -o:' Makefile.in

	./configure --prefix=/usr \
		--mandir=/usr/share/man \
		--sysconfdir=/etc \
		--enable-ssl
	make
}

package() {
	cd "$srcdir"/$pkgname-$pkgver
	make prefix="$pkgdir"/usr \
		etcdir="$pkgdir"/etc \
		mandir="$pkgdir"/usr/share/man \
		install
}
md5sums="8f3686f492374f4c5d7be4ea52ee2f7a  ssmtp_2.63.orig.tar.gz
c70c395fe71589ca8b10b666455d5071  generate_config.patch"

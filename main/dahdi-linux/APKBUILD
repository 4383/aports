# Contributor: Timo Teras <timo.teras@iki.fi>
# Maintainer: Timo Teras <timo.teras@iki.fi>

pkgname=dahdi-linux
pkgver=2.8.0.1
pkgrel=0
pkgdesc="Firmware for Digium Asterisk Hardware Device Interface drivers"
url="http://www.asterisk.org"
arch="noarch"
license="GPL"
depends=
makedepends=
install=
subpackages="$pkgname-dev"
source="http://downloads.digium.com/pub/telephony/dahdi-linux/releases/$pkgname-$pkgver.tar.gz
	wget-tar.patch"

# We online install the firmwares in this package since those are common for all
# kernel flavors. We also install the headers for the -dev package.
#
# The kernel drivers themselves are built from separate build recipe.
prepare() {
	cd "$srcdir"/$pkgname-$pkgver
	for i in $source; do
		case $i in
		*.patch|*.diff) patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	return 0
}

package() {
	cd "$srcdir"/$pkgname-$pkgver
	make -j1 DESTDIR="$pkgdir" HOTPLUG_FIRMWARE=yes \
		install-include install-firmware 
}

md5sums="fedb006fbf01219519184cce0302e34a  dahdi-linux-2.8.0.1.tar.gz
d72ac3aab69c427d69f657287c5d8475  wget-tar.patch"
sha256sums="7e726f065bc5564b66dc0a7249f996354ecb66f0a03154f5ab75b7cabefad682  dahdi-linux-2.8.0.1.tar.gz
badb18c563c8e58b26ff289e23dcfe0da8fcf3cfec566057208ebee3a8bc832e  wget-tar.patch"
sha512sums="d8282d5ebbd091075abfc4cde2c9f3011ebb75202d0d3095d14d245d07e55381bfb03ada48d5bc57f3e1ad3edb8161810676379adf5ab42483a4265b78f3a205  dahdi-linux-2.8.0.1.tar.gz
ee2e272f28cdc31b93f734e8be1aa3ad9d2b486a41939625c6ce660278dc2eb9f86b8778004513950da61f815abe63386df8db587d727099fc1d23e326b7f8c3  wget-tar.patch"

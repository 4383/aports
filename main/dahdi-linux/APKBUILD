# Contributor: Timo Teras <timo.teras@iki.fi>
# Maintainer: Timo Teras <timo.teras@iki.fi>

pkgname=dahdi-linux
pkgver=2.2.0.2
pkgrel=0
pkgdesc="Firmware for Digium Asterisk Hardware Device Interface drivers"
url="http://www.asterisk.org"
license="GPL"
depends=
# we need wget and tar because make install downloads firmware and uses fancy
# options for tar and wget.
makedepends="wget tar"
install=
subpackages="$pkgname-dev"
source="http://downloads.digium.com/pub/telephony/dahdi-linux/releases/$pkgname-$pkgver.tar.gz"

# We onlin install the firwares in this package since those are common for all
# kernel flavors. We also install the headers for the -dev package.
#
# The kernel drivers themselves are built from separate build recipe.

build() {
	cd "$srcdir"/$pkgname-$pkgver
	for i in ../*.patch ../*.diff; do
		[ -f "$i" ] || continue
		msg "Applying $i"
		patch -p1 < $i || return 1;
	done

	make DESTDIR="$pkgdir" HOTPLUG_FIRMWARE=yes \
		install-include install-firmware 
}

md5sums="1f932729ad28f2f028afcf2cc5ccf7ba  dahdi-linux-2.2.0.2.tar.gz"

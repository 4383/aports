# Contributor: William Pitcock <nenolod@dereferenced.org>
# Maintainer: William Pitcock <nenolod@dereferenced.org>
pkgname=compat-pvgrub
pkgver=1
pkgrel=0
pkgdesc="compatibility support for PV-GRUB 1.x"
url="http://www.alpinelinux.org/"
arch="noarch"
license="ISC"
depends=""
depends_dev=""
makedepends="$depends_dev"
triggers="compat-pvgrub.trigger=/boot"
install=""
subpackages=""
source="update-pvgrub"

_builddir="$srcdir"

package() {
	cd "$_builddir"

	mkdir -p "$pkgdir"/boot/grub "$pkgdir"/sbin
	touch "$pkgdir"/boot/grub/.keep-compat-pvgrub

	sed "/^version=/s/=.*/=$pkgver-r$pkgrel/" "$srcdir"/update-pvgrub \
		> "$pkgdir"/sbin/update-pvgrub
	chmod 755 "$pkgdir"/sbin/update-pvgrub
}

md5sums="19cc71a4929ebf83df27af57b167cd8e  update-pvgrub"
sha256sums="ede72f8a3f7091d8e03f15720c1bab0e7da3f6c5bea70811690c84269d50b824  update-pvgrub"
sha512sums="6b41f5d7280527164ebfa631c04240f6c05854cb31fb839a1e7e5375c5bdc5a608e7e20228dc83d31534c21558c8157a437fb537b6c194f2d220b59a0438c017  update-pvgrub"

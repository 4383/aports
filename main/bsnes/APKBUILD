# Contributor: William Pitcock <nenolod@dereferenced.org>
# Maintainer: William Pitcock <nenolod@dereferenced.org>
pkgname=bsnes
pkgver=0.78
_x=${pkgver%.*}
_y=${pkgver#*.}
_pkgver="v${_x}${_y}"
pkgrel=0
pkgdesc="high accuracy SNES emulator"
url="http://byuu.org/bsnes/"
arch="all"
license="GPL"
depends=
depends_dev="qt-dev openal-soft-dev sdl-dev alsa-lib-dev mesa-dev libao-dev libxv-dev"
makedepends="$depends_dev"
install=""
subpackages=
source="http://bsnes.googlecode.com/files/${pkgname}_${_pkgver}-source.tar.bz2
	nall-strlcpy.patch
	no-pulseaudio.patch"

_builddir="${srcdir}/${pkgname}_${_pkgver}-source/bsnes"
prepare() {
	local i
	cd "$_builddir/.."
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	make compiler=gcc prefix=/usr profile=performance || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" prefix=/usr profile=performance install || return 1
}

md5sums="19c07dc9be18bf3314f4e7122c00f16e  bsnes_v078-source.tar.bz2
d5017142f2cbccac878bbfc799b3445f  nall-strlcpy.patch
07caea846bf49ee6f5deaf999dffbd5f  no-pulseaudio.patch"

# Contributor: Kiyoshi Aman <kiyoshi.aman@gmail.com>
# Maintainer: Kiyoshi Aman <kiyoshi.aman@gmail.com>
pkgname=lynx
pkgver=2.8.8
pkgrel=0
_d=${pkgver//./-}
_d=${_d%_*}
_ver=${pkgver/_p/rel.}
pkgdesc="Cross-platform text-based browser"
url="http://lynx.isc.org"
arch="all"
license="GPL"
depends=
makedepends="openssl-dev gettext zlib-dev glib-dev perl pkgconfig ncurses-dev"
install=""
subpackages="$pkgname-doc"
source="http://lynx.isc.org/lynx${_ver}/lynx${_ver}.tar.bz2"

_builddir="$srcdir/${pkgname}${_d}"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		|| return 1
	make helpdir=/usr/share/doc/lynx/help \
		docdir=/usr/share/doc/lynx || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install install-help install-doc \
		helpdir=/usr/share/doc/lynx/help \
		docdir=/usr/share/doc/lynx || return 1
}

md5sums="f467c043fe9a3963fc1c05f54923803f  lynx2.8.8.tar.bz2"
sha256sums="a25a1c74c8fe86ff332d8a85441d6155a842fef894d2ffb9ffd9f6457a754c02  lynx2.8.8.tar.bz2"
sha512sums="ecfc3e9c3b42b3e1da12d094a1e0898434552bd516a9661beba41b779bf714f52a91414caa2991147d5bed37de461b053f97de9c0e341c1da2a930c3360f1e24  lynx2.8.8.tar.bz2"

From 0377ef91270d06592a0d4dd009c29e7b1ff9c9b8 Mon Sep 17 00:00:00 2001
From: Karel Zak <kzak@redhat.com>
Date: Mon, 26 Nov 2012 10:57:26 +0000
Subject: mount: (deprecated) drop --guess-fstype

The option is undocumented and unnecessary.

Signed-off-by: Karel Zak <kzak@redhat.com>
---
diff --git a/mount-deprecated/mount.c b/mount-deprecated/mount.c
index ad80218..3190d2f 100644
--- a/mount/mount.c
+++ b/mount/mount.c
@@ -2208,7 +2208,6 @@ static struct option longopts[] = {
 	{ "types", 1, 0, 't' },
 	{ "bind", 0, 0, 'B' },
 	{ "move", 0, 0, 'M' },
-	{ "guess-fstype", 1, 0, 134 },
 	{ "rbind", 0, 0, 'R' },
 	{ "make-shared", 0, 0, 136 },
 	{ "make-slave", 0, 0, 137 },
@@ -2470,18 +2469,6 @@ main(int argc, char *argv[]) {
 		case 0:
 			break;
 
-		case 134:
-			/* undocumented, may go away again:
-			   call: mount --guess-fstype device
-			   use only for testing purposes -
-			   the guessing is not reliable at all */
-		    {
-			const char *fstype;
-			fstype = fsprobe_get_fstype_by_devname(optarg);
-			printf("%s\n", fstype ? fstype : "unknown");
-			exit(fstype ? 0 : EX_FAIL);
-		    }
-
 		case 136:
 			mounttype = MS_SHARED;
 			break;
--
cgit v0.9.1

# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=procps
pkgver=3.3.4
pkgrel=1
pkgdesc="Utilities for monitoring your system and processes on your system"
url="http://gitorious.org/procps"
arch="all"
license="GPL LGPL"
depends=
# needs fancy install
makedepends="ncurses-dev coreutils"
subpackages="$pkgname-dev $pkgname-doc libproc"
source="http://ftp.us.debian.org/debian/pool/main/p/procps/${pkgname}_${pkgver}.orig.tar.xz"

prepare() {
	cd "$srcdir"
#	patch -p1 -i "$srcdir"/01-fix-install-options-for-busybox.patch || return 1
}

build() {
	cd "$srcdir"/$pkgname-ng-$pkgver
	./configure --prefix=/ \
		--bindir=/bin \
		--sbindir=/sbin \
		--libdir=/lib \
		--mandir=/usr/share/man \
		--sysconfdir=/etc \
		--docdir=/usr/share/doc \
		--disable-static \
		--disable-w-from \
		--disable-kill \
		--disable-rpath \
		--with-ncurses
	make || return 1
}

package() {
	cd "$srcdir"/$pkgname-ng-$pkgver
	make DESTDIR="$pkgdir" ldconfig=true install="install -D" \
		install || return 1
	install -d "$pkgdir"/usr/include/proc || return 1
	install -m644 proc/*.h "$pkgdir"/usr/include/proc/ || return 1
	rm "$pkgdir"/lib/*.la || return 1
	mv "$pkgdir"/lib/pkgconfig "$pkgdir"/usr/lib/
}

libproc() {
	pkgdesc="Library for monitoring system and processes"
	install -d "$subpkgdir"/
	mv "$pkgdir"/lib "$subpkgdir"/
}

md5sums="85efd032ad6514689d8dcadfac239008  procps_3.3.4.orig.tar.xz"

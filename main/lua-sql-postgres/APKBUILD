# Contributor: Mika Havela <mika.havela@gmail.com>
# Maintainer: Mika Havela <mika.havela@gmail.com>
pkgname=lua-sql-postgres
pkgver=2.2.0
pkgrel=0
pkgdesc="PostgreSQL driver for LuaSQL"
url="http://www.keplerproject.org/luasql/"
arch="all"
license="MIT"
depends="lua"
makedepends="lua-dev postgresql-dev"
install=
subpackages=
source="http://dev.alpinelinux.org/archive/$pkgname/luasql-$pkgver.tar.gz"
replaces=luasql-postgres

build() {
	cd "$srcdir/luasql-$pkgver"
	make CFLAGS="$CFLAGS" T=postgres DRIVER_LIBS="-lpq" || return 1
}

package() {
	cd "$srcdir/luasql-$pkgver"
	install -D src/postgres.so "$pkgdir"/usr/lib/lua/5.1/luasql/postgres.so
}

md5sums="59d72db444c6369c936d4f03694db6b7  luasql-2.2.0.tar.gz"

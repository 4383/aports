From 081155c438c0680b868175c95d160f1e3b519541 Mon Sep 17 00:00:00 2001
From: Natanael Copa <ncopa@alpinelinux.org>
Date: Wed, 3 Oct 2012 09:16:28 +0200
Subject: [PATCH] solver: improve assert error messages

Print name of package and void double "ERROR"
---
 src/solver.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/solver.c b/src/solver.c
index f9a2117..edf1650 100644
--- a/src/solver.c
+++ b/src/solver.c
@@ -927,11 +927,12 @@ static int next_branch(struct apk_solver_state *ss)
 
 #ifdef DEBUG_CHECKS
 		ASSERT(cmpscore(&d->saved_score, &ss->score) == 0,
-			"ERROR! saved_score "SCORE_FMT" != score "SCORE_FMT,
+			"Saved_score "SCORE_FMT" != score "SCORE_FMT,
 			SCORE_PRINTF(&d->saved_score),
 			SCORE_PRINTF(&ss->score));
 		ASSERT(d->saved_requirers == name->ss.requirers,
-			"ERROR! requirers not restored between decisions");
+			"Requirers not restored between decisions (%s)",
+			name->name);
 #endif
 
 		if (backup_until >= ss->num_decisions &&
-- 
1.7.12.2


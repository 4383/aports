# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=curl
pkgver=7.29.0
pkgrel=0
pkgdesc="An URL retrival utility and library"
url="http://curl.haxx.se"
arch="all"
license="MIT"
depends=
depends_dev="zlib-dev openssl-dev libssh2-dev"
makedepends="$depends_dev"
source="http://curl.haxx.se/download/curl-$pkgver.tar.bz2"
subpackages="$pkgname-doc $pkgname-dev"

_builddir="$srcdir/$pkgname-$pkgver"

prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}
build() {
	cd "$_builddir"
	./configure --prefix=/usr \
		--mandir=/usr/share/man \
		--without-libidn \
		--enable-ipv6 \
		--disable-ldap
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	rm "$pkgdir"/usr/lib/*.la || return 1
}

md5sums="fa5f37f38a8042020e292ce7ec5341ce  curl-7.29.0.tar.bz2"
sha256sums="9d78e8bac6fa101679ca82e72a24e55918c5d495d29acb1eff62610929d3832f  curl-7.29.0.tar.bz2"
sha512sums="b14f9aa1441d2d9c5fd35210388a97e7ffa758dc453b788d0e56b1595d3fa303793e4b086393c04861bd30e577f3acfe5aacae468f59516d8b5f3d0d8e007e57  curl-7.29.0.tar.bz2"

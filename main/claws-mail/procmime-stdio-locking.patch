diff -ru claws-mail-3.10.1.orig/src/procmime.c claws-mail-3.10.1/src/procmime.c
--- claws-mail-3.10.1.orig/src/procmime.c	2014-06-09 11:24:17.000000000 -0300
+++ claws-mail-3.10.1/src/procmime.c	2014-09-05 11:26:59.268768631 -0300
@@ -371,6 +371,9 @@
 		procmime_fclose(infp);
 		return FALSE;
 	}
+#ifdef HAVE_FGETS_UNLOCKED
+	flockfile(outfp);
+#endif
 	tmp_file = TRUE;
 	readend = mimeinfo->offset + mimeinfo->length;
 

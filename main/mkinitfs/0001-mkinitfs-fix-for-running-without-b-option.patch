From 98fb74fadf3dc91a22b6aa11b4351e1a8ea3ef18 Mon Sep 17 00:00:00 2001
From: Natanael Copa <ncopa@alpinelinux.org>
Date: Wed, 3 Nov 2010 13:02:12 +0000
Subject: [PATCH] mkinitfs: fix for running without -b option

---
 mkinitfs.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/mkinitfs.in b/mkinitfs.in
index 8246d07..67981c4 100755
--- a/mkinitfs.in
+++ b/mkinitfs.in
@@ -16,7 +16,7 @@ _cp() {
 	local i
 	if [ -n "$list_sources" ]; then
 		for i in "$@"; do
-			echo "$basedir"/$i
+			echo "$basedir"/"$i"
 		done
 		return
 	fi
@@ -55,7 +55,7 @@ initfs_base() {
 	done
 	[ -z "$list_sources" ] && mkdir -p $dirs
 
-	cd "$basedir"
+	cd "${basedir:-/}"
 	for file in $(feature_files "$filelists_dir"); do
 		_cp $file
 	done
-- 
1.7.3.2


From b9ad256b04db3965bf21ed7ee25ddfd7c166d102 Mon Sep 17 00:00:00 2001
From: Natanael Copa <ncopa@alpinelinux.org>
Date: Wed, 27 Apr 2011 09:15:20 +0000
Subject: [PATCH] init: fix progressbar when not quiet

see http://bugs.alpinelinux.org/issues/613
---
 initramfs-init.in |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/initramfs-init.in b/initramfs-init.in
index 7b09722..a0e594d 100755
--- a/initramfs-init.in
+++ b/initramfs-init.in
@@ -462,6 +462,9 @@ fi
 
 # install new root
 ebegin "Installing packages to root filesystem"
+# insert newline unless quiet to fix progress bar
+[ -n "$KOPT_quiet" ] || echo ""
+
 if [ "$KOPT_chart" = yes ]; then
 	pkgs="$pkgs acct"
 fi
-- 
1.7.4.5


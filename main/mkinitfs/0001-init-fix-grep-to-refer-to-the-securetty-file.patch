From 4ab4340f14a1882c486f41c34ed6e016d090b506 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Timo=20Ter=C3=A4s?= <timo.teras@iki.fi>
Date: Tue, 22 Dec 2015 14:03:37 +0200
Subject: [PATCH] init: fix grep to refer to the securetty file

otherwise it hangs waiting input from stdin
---
 initramfs-init.in | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/initramfs-init.in b/initramfs-init.in
index e9155e0..ca115e9 100755
--- a/initramfs-init.in
+++ b/initramfs-init.in
@@ -142,7 +142,7 @@ setup_inittab_console(){
 			echo "$tty::respawn:/sbin/getty $line $speed $tty $term" \
 				>> $sysroot/etc/inittab
 		fi
-		if [ -e "$sysroot"/etc/securetty ] && ! grep -q -w "$tty"; then
+		if [ -e "$sysroot"/etc/securetty ] && ! grep -q -w "$tty" "$sysroot"/etc/securetty; then
 			echo "$tty" >> "$sysroot"/etc/securetty
 		fi
 	done
-- 
2.6.4


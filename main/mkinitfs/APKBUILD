# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=mkinitfs
pkgver=2.0_rc1
pkgrel=1
pkgdesc="Tool to generate initramfs images for Alpine"
url=http://git.alpinelinux.org/cgit/mkinitfs
depends="busybox"
source="http://git.alpinelinux.org/cgit/$pkgname/snapshot/$pkgname-$pkgver.tar.bz2
	0001-mkinitfs-support-for-q.-echo-to-stdout-rather-than-s.patch
	0002-init-fixes-for-new-apk-behaviour.patch
	"
license="GPL-2"

build() {
	cd "$srcdir"/$pkgname-$pkgver
	patch -p1 -i ../0001-mkinitfs-support-for-q.-echo-to-stdout-rather-than-s.patch || return 1
	patch -p1 -i ../0002-init-fixes-for-new-apk-behaviour.patch || return 1

	make
	make install DESTDIR="$pkgdir" || return 1
}
md5sums="4c8ae5a6cdeae50ddb36a8e3d3268eb2  mkinitfs-2.0_rc1.tar.bz2
ccbd60017cd2498f7e14e4b661efffb7  0001-mkinitfs-support-for-q.-echo-to-stdout-rather-than-s.patch
eb588902edfef79a8912b5c81dfd6f1e  0002-init-fixes-for-new-apk-behaviour.patch"

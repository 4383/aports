# Maintainer: Eivind Uggedal <eivind@uggedal.com>
pkgname=hiredis
pkgver=0.13.0
pkgrel=1
pkgdesc="Minimalistic C client library for Redis"
url="https://github.com/redis/hiredis"
arch="all"
license="BSD"
depends=""
depends_dev=""
makedepends="$depends_dev"
install=""
subpackages="$pkgname-dev"
source="$pkgname-$pkgver.tar.gz::$url/archive/v$pkgver.tar.gz
	c99.patch"

_builddir="$srcdir/$pkgname-$pkgver"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"

	make DEBUG=
}

package() {
	cd "$_builddir"

	make PREFIX="$pkgdir"/usr install
}

md5sums="3ae916ada628e4498b4f7de2f492fc6b  hiredis-0.13.0.tar.gz
74207403ca439516de02510d574ea713  c99.patch"
sha256sums="416d6cded4795d2223d8703dd9687259cb8c68445b3f73652eb15887297b15bb  hiredis-0.13.0.tar.gz
9d5a0f97a5f231ec4490b9e077658e6ad1955d366c590146f4a2a645e834f262  c99.patch"
sha512sums="d2e8ff13e45bf78d8115d63f6dd3fc907000270309356412070c3ce2f0cfa6c3d9707c3ce5bd51b2056dedd0c511a6587f309f74c19bcbb879fc53928367914e  hiredis-0.13.0.tar.gz
ca340ba74939dece34e15737ce2abb05b657120134781396d18653321710dc8d8dd0a3eb7b5c662a00584cfe244214399189b997dd7a613738569c6b688c18ae  c99.patch"

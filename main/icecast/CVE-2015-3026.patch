Index: src/auth_url.c
===================================================================
--- a/src/auth_url.c	(revision 2b7cb1c641b7d9b632f93e410dc4048938f41913)
+++ b/src/auth_url.c	(revision 27abfbbd688df3e3077b535997330aa06603250f)
@@ -540,7 +540,17 @@
     port = config->port;
     config_release_config ();
-    user = util_url_escape (client->username);
-    pass = util_url_escape (client->password);
     ipaddr = util_url_escape (client->con->ip);
+
+    if (client->username) {
+        user = util_url_escape(client->username);
+    } else {
+        user = strdup("");
+    }
+
+    if (client->password) {
+        pass = util_url_escape(client->password);
+    } else {
+        pass = strdup("");
+    }
 
     snprintf (post, sizeof (post),

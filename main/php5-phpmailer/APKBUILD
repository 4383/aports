# Contributor: Sergei Lukin <sergej.lukin@gmail.com>
# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer:  Timo Teräs <timo.teras@iki.fi>
_php=php5
pkgname=${_php}-phpmailer
_pkgname=PHPMailer
pkgver=5.2.4
pkgrel=1
pkgdesc="PHP class for SMTP mailing"
url="http://code.google.com/a/apache-extras.org/p/phpmailer/"
arch="noarch"
license="LGPL"
depends="$_php"
depends_dev=
makedepends="$depends_dev"
install=""
subpackages=""
source="${_pkgname}-${pkgver}.tar.gz::https://github.com/PHPMailer/PHPMailer/archive/v${pkgver}.tar.gz
	CVE-2016-10033,CVE-2016-10045.patch
	"
# secfixes:
#   5.2.4-r1:
#     - CVE-2016-10033
#     - CVE-2016-10045

builddir="$srcdir/${_pkgname}-$pkgver"
build() {
	cd "$builddir"
}

package() {
	cd "$builddir"
	install -d -m755 "$pkgdir"/usr/share/pear
	install -D -m644 "$builddir"/class.*.php "$pkgdir"/usr/share/pear || return 1
}

md5sums="dbe2d8e10e4a981187e4ea1afa4b66d1  PHPMailer-5.2.4.tar.gz
d7ceb90217a458f00ca5d971171dcb05  CVE-2016-10033,CVE-2016-10045.patch"
sha256sums="6fbc37fec49f3e2621633f1441ee6f6e6d9750459fefe79ae75df98da9ba25e7  PHPMailer-5.2.4.tar.gz
c8d984a4dd8a11dd286a8d6b3a1ca4bd058137719ffd81cedb9dfc9106bd8b3b  CVE-2016-10033,CVE-2016-10045.patch"
sha512sums="84f3f984bf9c463c6b28fe16c628ee31e104ff56174ff5de07d520083e47cec7c0d6b24095fa952af1c1116bed6ba62912d78d9aef67f01722b697e75cc40f69  PHPMailer-5.2.4.tar.gz
79f574321b55bd1f3b6e3bbc17cfbbf042e82510f354b663eb1d947ac585b232562c4536e227c5f18341b7a4afb278cfad9317a34ffb8abdc316e519c90430ac  CVE-2016-10033,CVE-2016-10045.patch"

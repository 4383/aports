# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=texinfo
pkgver=5.1
pkgrel=1
pkgdesc="Utilities to work with and produce manuals, ASCII text, and on-line documentation from a single source file"
url="http://www.gnu.org/software/texinfo/"
arch="all"
license='GPL23'
depends="perl"
makedepends="ncurses-dev perl"
source="ftp://ftp.gnu.org/pub/gnu/${pkgname}/${pkgname}-${pkgver}.tar.gz"
subpackages="$pkgname-doc"

_builddir="$srcdir"/texinfo-$pkgver
build() {
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR=${pkgdir} install || return 1

	rm -f ${pkgdir}/usr/share/info/dir
	gzip ${pkgdir}/usr/share/info/*

	rm -rf "$pkgdir"/usr/lib/charset.alias
	rmdir -p "$pkgdir"/usr/lib 2>/dev/null
	return 0
}

md5sums="54e250014fe698fb4832016158747c03  texinfo-5.1.tar.gz"
sha256sums="50e8067f9758bb2bf175b69600082ac4a27c464cb4bcd48a578edd3127216600  texinfo-5.1.tar.gz"
sha512sums="ddbe6703bae95db5ec720d1add1fc5b5f5e780341ede4d5e559007ea89d7c2f932fb5707aa7365b30ea015d8a47773ff01b1858f0089d9afc11c7fe48e5ecd80  texinfo-5.1.tar.gz"

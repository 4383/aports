# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=texinfo
pkgver=5.2
pkgrel=0
pkgdesc="Utilities to work with and produce manuals, ASCII text, and on-line documentation from a single source file"
url="http://www.gnu.org/software/texinfo/"
arch="all"
license='GPL23'
depends="perl"
makedepends="ncurses-dev perl"
source="ftp://ftp.gnu.org/pub/gnu/${pkgname}/${pkgname}-${pkgver}.tar.gz"
subpackages="$pkgname-doc"

_builddir="$srcdir"/texinfo-$pkgver
build() {
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR=${pkgdir} install || return 1

	rm -f ${pkgdir}/usr/share/info/dir
	gzip ${pkgdir}/usr/share/info/*

	rm -rf "$pkgdir"/usr/lib/charset.alias
	rmdir -p "$pkgdir"/usr/lib 2>/dev/null
	return 0
}

md5sums="1b8f98b80a8e6c50422125e07522e8db  texinfo-5.2.tar.gz"
sha256sums="6b8ca30e9b6f093b54fe04439e5545e564c63698a806a48065c0bba16994cf74  texinfo-5.2.tar.gz"
sha512sums="85756bdeddabdba5de5fcb0bed90a5bcc7646d8ac8d3cda0548b650299f5ae4512a2f08e5419a600da7e4cc6836b0d974b65de158c7d586a2650b07075e57819  texinfo-5.2.tar.gz"

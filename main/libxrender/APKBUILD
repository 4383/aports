# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=libxrender
pkgver=0.9.7
pkgrel=0
pkgdesc="X Rendering Extension client library"
url="http://xorg.freedesktop.org/"
arch="all"
license="custom"
subpackages="$pkgname-dev"
depends=
depends_dev="xproto renderproto libx11-dev"
makedepends="$depends_dev"
source="http://xorg.freedesktop.org/releases/individual/lib/libXrender-$pkgver.tar.bz2
	CVE-2013-1987-1.patch
	CVE-2013-1987-2.patch
	CVE-2013-1987-3.patch
	"


_builddir="$srcdir"/libXrender-$pkgver
prepare() {
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() { 
	cd "$_builddir"
	./configure --prefix=/usr
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	rm "$pkgdir"/usr/lib/*.la || return 1
}
md5sums="ee62f4c7f0f16ced4da63308963ccad2  libXrender-0.9.7.tar.bz2
5d82b028bed7456b38f1d001a222b1d8  CVE-2013-1987-1.patch
8e0adc5dcbf89ea1d0c7fe0e0dd5e8d7  CVE-2013-1987-2.patch
b3bac65a7f41bcacbf5fd8278ac709b6  CVE-2013-1987-3.patch"

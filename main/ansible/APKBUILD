# Contributor: Fabian Affolter <fabian@affolter-engineering.ch>
# Maintainer: Fabian Affolter <fabian@affolter-engineering.ch>
pkgname=ansible
pkgver=1.1
pkgrel=0
pkgdesc='Configuration-management, deployment, task-execution, and multinode orchestration framework'
url='http://ansible.cc'
arch='noarch'
license='GPL3'
depends='python py-yaml py-paramiko py-jinja2'
makedepends="python-dev"
subpackages="$pkgname-doc"
source="http://ansible.cc/releases/$pkgname-$pkgver.tar.gz"
_builddir="$srcdir"/$pkgname-$pkgver

build() {
	cd "$_builddir"
	python setup.py build || return 1
}

package() {
	cd "$_builddir"
	python setup.py install --prefix=/usr --root="$pkgdir" || return 1

	install -d $pkgdir/usr/share/ansible || return 1
	cp ./library/* $pkgdir/usr/share/ansible/ || return 1

    _manpages="$pkgname-playbook.1 $pkgname.1"
    for _manpage in $_manpages; do
		install -Dm644 "$_builddir"/docs/man/man1/$_manpage \
			"$pkgdir"/usr/share/man/man1/$_manpage || return 1
	done
}

md5sums="29059e7738212392d7c23db8c8f91019  ansible-1.1.tar.gz"
sha256sums="5e7d2a46715484abcd2f59f846fb12699d64b420400cca4224ae6ec358f2d0a1  ansible-1.1.tar.gz"
sha512sums="a32f32201782cf763fa442d12b778aaef41fe3d9e0a06864e8fa4b13e0a0bad66105d59b71b4e9981b4b080f4b79479bde33f3afb9e98bc4e33271453451300c  ansible-1.1.tar.gz"

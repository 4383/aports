# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=fribidi
pkgver=0.19.5
pkgrel=2
pkgdesc="A Free Implementation of the Unicode Bidirectional Algorithm"
url="http://fribidi.org"
arch="all"
license="LGPL2+"
subpackages="$pkgname-dev $pkgname-doc"
depends=""
makedepends=""
source="http://fribidi.org/download/fribidi-$pkgver.tar.bz2
	format.patch"

_builddir="$srcdir/$pkgname-$pkgver"
prepare() {
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
	update_config_sub || return 1
}

build ()
{
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	rm "$pkgdir"/usr/lib/*.la || return 1
}

md5sums="925bafb97afee8a2fc2d0470c072a155  fribidi-0.19.5.tar.bz2
eaac20910502561926414e6611ef5201  format.patch"
sha256sums="501231e4260f83fccedae1cafe983a7de87082e3f5387e0b283d016f7f4cb428  fribidi-0.19.5.tar.bz2
f4b95b5e1bb53fd99f1844a7a92a7ee1d5dfdeeaccb0ff959648e85d8f3eb42a  format.patch"
sha512sums="0a1216d3ff23f76dd90a1fa5b1eadd1276cfedc07bd636e345df23911d2e23bc3780a5ba2e32f2025b517f7137135fb3de6d337f872932466efe480ece364e43  fribidi-0.19.5.tar.bz2
a0b304e6ba76c86fb40c1818fbec5be1fb27a292080531042f72a2292a7db89b6389fa49b8709daae8dc2dcccca9f6f078515bf54ba3b080852a0d1291ead57c  format.patch"

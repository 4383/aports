# Contributor: Michael Mason <ms13sp@gmail.com>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=trac
_realname=Trac
pkgver=1.0
pkgrel=0
pkgusers="tracd"
pkggroups="tracd"
pkgdesc="Trac is a minimalistic web-based project management, wiki and bug/issue tracking system."
url="http://trac.edgewall.com/"
arch="noarch"
license="GPL"
depends="python py-setuptools py-genshi"
makedepends="python-dev"
install="$pkgname.pre-install"
source="http://download.edgewall.org/trac/Trac-$pkgver.tar.gz
	tracd.confd
	tracd.initd"

_builddir="$srcdir"/$_realname-$pkgver

build() {
	cd "$_builddir"
	python setup.py install --prefix=/usr --root="$pkgdir"
}

package() {
	cd "$_builddir"
	install -d -o tracd -g tracd "$pkgdir"/var/lib/trac
	install -m755 -D "$srcdir"/tracd.initd "$pkgdir"/etc/init.d/tracd
	install -m644 -D "$srcdir"/tracd.confd "$pkgdir"/etc/conf.d/tracd
}

md5sums="e07f052ec91efc1733cb9d49743ecb32  Trac-1.0.tar.gz
95b1311ca65e1ffcd51a191542f45ba4  tracd.confd
fd3f1cd33a2819c43de82b92a839660d  tracd.initd"

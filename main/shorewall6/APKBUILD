# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=shorewall6
pkgver=4.6.2.1

_ver=$pkgver
case $pkgver in
*.*.*.*) _ver=${pkgver%.*};;
esac

pkgrel=0
pkgdesc="Files for the IPV6 Shorewall Firewall"
url="http://www.shorewall.net/"
arch=""
license="GPL-2"
depends="shorewall-core perl ip6tables iproute2"
# coreutils for install -T
makedepends="coreutils bash"
replaces=""
subpackages="$pkgname-doc"
source="http://www1.shorewall.net/pub/shorewall/${_ver%.*}/shorewall-$_ver/$pkgname-$pkgver.tar.bz2
	shorewall6.initd
	"

_builddir="$srcdir/$pkgname-$pkgver"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./configure MANDIR=/usr/share/man SBINDIR=/usr/sbin || return 1
}

package() {
	cd "$_builddir"
	DESTDIR="$pkgdir" ./install.sh || return 1
	rm -f "$pkgdir"/etc/init.d/shorewall6 || return 1
	install -m755 "$srcdir"/shorewall6.initd "$pkgdir"/etc/init.d/shorewall6
}

md5sums="04b47a2a267e854d85ec0ec07b85a8f6  shorewall6-4.6.2.1.tar.bz2
685f7d32ff6ce1251658365e7d7076ee  shorewall6.initd"
sha256sums="76e14b49b175cefdea573bf84edfc2c366294f4fd7af38dcd6bb1af7fedb5306  shorewall6-4.6.2.1.tar.bz2
a0c9a30cebee098e05d38626d6124398947d4b6cac15d278b1d383bfcc29bcda  shorewall6.initd"
sha512sums="b8d38b5627d57b3c0f7f8b5f28fb6e1dbd57365fb2b6d2f586fc168c5609a4383b2661a8c7cfb3a7e22e9c8eaca124a3d8b72bbab4c8be0195da4552f1826c95  shorewall6-4.6.2.1.tar.bz2
ef7c3fb6080cd8f49ad8fef5221cf9e43701aa5838e30ddba73bc2fe1499bb2487a45d020c6b26bde36366cc9fb87a321955a6b5bfe8f844060f462e2d1bac2b  shorewall6.initd"

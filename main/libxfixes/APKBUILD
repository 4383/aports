# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=libxfixes
pkgver=5.0
pkgrel=2
pkgdesc="X11 miscellaneous 'fixes' extension library"
url="http://xorg.freedesktop.org/"
arch="all"
license="custom"
depends=
depends_dev="xproto fixesproto libx11-dev"
makedepends="$depends_dev xextproto"
subpackages="$pkgname-dev $pkgname-doc"
source="http://xorg.freedesktop.org/releases/individual/lib/libXfixes-$pkgver.tar.bz2
	CVE-2013-1983.patch"

_builddir="$srcdir"/libXfixes-$pkgver
prepare() {
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./configure --prefix=/usr --sysconfdir=/etc --build=${CHOST} --host=${CHOST}
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	rm "$pkgdir"/usr/lib/*.la || return 1
}
md5sums="678071bd7f9f7467e2fc712d81022318  libXfixes-5.0.tar.bz2
cfd62d3f71592118ca0a6862cfe221b3  CVE-2013-1983.patch"
sha256sums="537a2446129242737a35db40081be4bbcc126e56c03bf5f2b142b10a79cda2e3  libXfixes-5.0.tar.bz2
b1e261feb83e064ac1123cb3004f0ed9284b23abef34f4f5bb6a5d452aff1192  CVE-2013-1983.patch"
sha512sums="fd3071b52c657975b4321e6c7ebe433c43ea6944d04d2228da075aad394e962eec705e41a6c3a6bbc12f704765189116d1328c3111e457f23395ff6f57ae63d5  libXfixes-5.0.tar.bz2
6c1e9d1261ece81d97af947a1543f313aebfeb8cc18c121bc51e8cc1142e49c4c5c21fb304d2d37af318c530551e02c029bfbce928d9caefb9432b1c5a4da66c  CVE-2013-1983.patch"

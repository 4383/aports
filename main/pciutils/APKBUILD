# Contributor: Leonardo Arena <rnalrd@alpinelinux.org>
# Maintainer: Leonardo Arena <rnalrd@alpinelinux.org>
pkgname=pciutils
pkgver=3.2.0
pkgrel=0
pkgdesc="PCI bus configuration space access library and tools"
url="http://mj.ucw.cz/pciutils.html"
arch="all"
license="GPL"
depends="hwdata-pci"
makedepends=
install=
subpackages="$pkgname-doc $pkgname-dev"
source="http://www.kernel.org/pub/software/utils/$pkgname/$pkgname-$pkgver.tar.gz"

_builddir="$srcdir"/$pkgname-$pkgver
build() {
	cd "$_builddir"
	sed -i -e "106s/^/\#/" Makefile
	make ZLIB=no \
		PREFIX=/usr \
		SHAREDIR=/usr/share/hwdata \
		MANDIR=/usr/share/man \
		all || return 1
}

package() {
	cd "$_builddir"
	make PREFIX="$pkgdir"/usr \
		SHAREDIR="$pkgdir"/usr/share/hwdata \
		MANDIR="$pkgdir"/usr/share/man \
		install
	
	install -d "$pkgdir"/usr/lib
	install -m644 lib/libpci.a "$pkgdir"/usr/lib
	for i in config.h header.h pci.h types.h; do
		install -D -m 644 lib/${i} "$pkgdir"/usr/include/pci/${i}
	done

}

md5sums="c05fe3a8444d83b7cccbfa118d54a037  pciutils-3.2.0.tar.gz"
sha256sums="17e346b168ed2caf3ee48019805e756943d945e088057b203c4368b845e32524  pciutils-3.2.0.tar.gz"
sha512sums="7540199c57a8894e9595a4d5b59bfda60c07e940d6433c39ec5cf6bbe38864e181c53c88b59a7d676547088bd23566dd9efed7e53c41ed2901a237cd9c0fd4fd  pciutils-3.2.0.tar.gz"

# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=gmp
pkgver=4.3.2
pkgrel=1
pkgdesc="A free library for arbitrary precision arithmetic"
url="http://gmplib.org/"
license="LGPL3"
makedepends="m4 texinfo"
depends=
subpackages="$pkgname-doc $pkgname-dev"
source="ftp://ftp.gnu.org/gnu/gmp/gmp-$pkgver.tar.bz2
	gmp-4.1.4-noexecstack.patch
	"

_builddir="$srcdir"/$pkgname-$pkgver
build() {
	cd "$_builddir"
	patch -p1 < ../gmp-4.1.4-noexecstack.patch || return 1 

	ABI="32" ./configure --prefix=/usr \
		--build=${CHOST} \
		--infodir=/usr/share/info \
		--mandir=/usr/share/man \
		--localstatedir=/var/state/gmp \
		--disable-mpfr \
		--disable-mpbsd \
		--disable-cxx  \
		--with-pic \
		|| return 1

	make || return 1
}

package() {
	cd "$_builddir"
	make -j1 DESTDIR="${pkgdir}" install || return 1
}
md5sums="dd60683d7057917e34630b4a787932e8  gmp-4.3.2.tar.bz2
13c34f00e77ded6673270cfea06c35c3  gmp-4.1.4-noexecstack.patch"

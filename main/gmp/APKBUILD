# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=gmp
pkgver=4.3.1
pkgrel=0
pkgdesc="A free library for arbitrary precision arithmetic"
url="http://gmplib.org/"
license="LGPL3"
makedepends="m4 texinfo"
depends=
subpackages="$pkgname-doc $pkgname-dev"
source="ftp://ftp.gnu.org/gnu/gmp/gmp-$pkgver.tar.bz2
	gmp-4.1.4-noexecstack.patch
	"

build ()
{
	cd "${srcdir}/${pkgname}-${pkgver}"
	patch -p1 < ../gmp-4.1.4-noexecstack.patch || return 1 

	ABI="32" ./configure --prefix=/usr \
		--build=${CHOST} \
		--infodir=/usr/share/info \
		--mandir=/usr/share/man \
		--localstatedir=/var/state/gmp \
		--disable-mpfr \
		--disable-mpbsd \
		--disable-cxx  \
		--with-pic \
		|| return 1

	make || return 1
	make -j1 DESTDIR="${pkgdir}" install || return 1
}
md5sums="26cec15a90885042dd4a15c4003b08ae  gmp-4.3.1.tar.bz2
13c34f00e77ded6673270cfea06c35c3  gmp-4.1.4-noexecstack.patch"

# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=xtables-addons
pkgver=2.3
pkgrel=0
pkgdesc="Netfilter userspace extensions for iptables"
url="http://xtables-addons.sourceforge.net/"
arch="all"
license="GPL"
depends=
makedepends="iptables-dev pkgconfig bash coreutils"
install=
subpackages="$pkgname-doc"
source="http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.xz"

_builddir="$srcdir/$pkgname-$pkgver"

prepare() {
	cd "$_builddir"
	update_config_sub || return 1
}

build() {
	cd "$_builddir"

	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--mandir=/usr/share/man \
		--without-kbuild \
		|| return 1

	make CC="${CC-gcc}" kbuilddir=
}

package() {
	cd "$_builddir"
	make builddir= DESTDIR="$pkgdir" install || return 1
	rm "$pkgdir"/usr/lib/*.la || return 1
}

md5sums="7d942729c365a549513511061f74c3e3  xtables-addons-2.3.tar.xz"
sha256sums="7ab43981d594131ec8d72d4604c92c25dcf67dd4cae6aabb71113238a27cdff9  xtables-addons-2.3.tar.xz"
sha512sums="08d529f0a2fa96ba715d2142934d6568a3c4f0ddb49f06c3c4d4ac200de0a4d2b59a4007302b557ca21014cbacda104e7781df0d5158e5313a673a928453abcc  xtables-addons-2.3.tar.xz"

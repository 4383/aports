# Contributor: Jeff Bilyk <jbilyk@gmail.com>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=fail2ban
pkgver=0.8.9
pkgrel=0
pkgdesc="Scans log files for login failures then updates iptables to reject originating ip address"
url="http://www.fail2ban.org"
arch="noarch"
license="GPLv2"
depends="python iptables logrotate"
makedepends="python-dev"
source="f2b-$pkgver.tar.gz::https://nodeload.github.com/$pkgname/$pkgname/legacy.tar.gz/$pkgver
	fail2ban.confd
	fail2ban.logrotate"

build() {
	return 0
}

package() {
	cd "$srcdir"/$pkgname-$pkgname-*

	python setup.py install --root "$pkgdir" || return 1
	install -Dm755 files/gentoo-initd "$pkgdir"/etc/init.d/fail2ban \
		|| return 1
	install -Dm644 "$srcdir"/fail2ban.confd "$pkgdir"/etc/conf.d/fail2ban \
		|| return 1
	install -Dm644 "$srcdir"/fail2ban.logrotate \
		"$pkgdir"/etc/logrotate.d/fail2ban || return 1
}

md5sums="18685696e74988fbc28ba12509b7bcc7  f2b-0.8.9.tar.gz
b209a04f9314dd064a4aa0ee505c8a4d  fail2ban.confd
6d1af6ceebd15c8ae3938bc675efe553  fail2ban.logrotate"
sha256sums="b20c1a074620a1003ec4e48e30ac40a41cc6f4242a37eb6a78fa29daa9165bb7  f2b-0.8.9.tar.gz
e35f1f820bfe5ecaac2696d60155c348d84af428e8c615e97b900c24a587d233  fail2ban.confd
4cfe274ec9c71dd0ae0575298f5327230f6e67b2f8fc1a616c645d0f6b3ce02f  fail2ban.logrotate"
sha512sums="b9f695a62541f3df2fd51eaa5779f2b9394927695a4d8898d495b83d7da7177e19c2b5043fb1331a90b4be9431810fde1dac61aadc8da56fd8e1044b3c47d6da  f2b-0.8.9.tar.gz
1e7581dd04e7777d6fd5c40cc842a7ec5f4e6a0374673d020d89dd61bf4093d48934844bee89bcac9084f9ae44f3beb66e714cf3c2763d79c3e8feb790c5e43b  fail2ban.confd
60c80dcf8ced5a0323daef2df702f862d99ac45f56b91015ce39be8471cf9d6a3bb45d776df0330692f40db37638dc3ef2004cfc65f26d50dd67c94fbfdf4ec2  fail2ban.logrotate"

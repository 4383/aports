# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=libnl
pkgver=1.1
pkgrel=4
pkgdesc="Library for applications dealing with netlink sockets"
url="http://people.suug.ch/~tgr/libnl"
arch="all"
license="GPL"
depends=
makedepends=
subpackages="$pkgname-dev"
source="http://distfiles.gentoo.org/distfiles/$pkgname-$pkgver.tar.gz
	libnl-1.1-flags.patch
	libnl-1.1-minor-leaks.patch
	libnl-1.1-vlan-header.patch
	libnl-1.1-glibc-2.8-ULONG_MAX.patch
	fix-includes.patch
	"

_builddir="$srcdir"/libnl-$pkgver

prepare () { 
	cd "$_builddir"
	for i in "$srcdir"/*.patch; do
		[ -r "$i" ] || continue
		msg "Applying $i"
		patch -s -p1 -i $i || return 1
	done
}

build () { 
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
}

md5sums="ae970ccd9144e132b68664f98e7ceeb1  libnl-1.1.tar.gz
9c9072ac8b74135798e0ebcf2d90290d  libnl-1.1-flags.patch
3a42f98cfb353f2469ac3c44b7c0a027  libnl-1.1-minor-leaks.patch
d757127e7af3bd3c82cdb51b1b09d2e0  libnl-1.1-vlan-header.patch
9169c7eec8a2b4b2556dd26ac73c6020  libnl-1.1-glibc-2.8-ULONG_MAX.patch
30fa3d1250b81ec884a7cf45878468f0  fix-includes.patch"
sha256sums="35cea4cfb6cd8af0cafa0f34fff81def5a1f193b8b8384299b4b21883e22edc3  libnl-1.1.tar.gz
1b89c83789c695c7622318496c6cb6de338c76a61844c2bbaa200a5a1d6a8c9b  libnl-1.1-flags.patch
b423657e30be6b2589b9da7fc98507b658028786c4950295138769b0ff0cb171  libnl-1.1-minor-leaks.patch
c9c7d8bf94ab06884f91ecd98977433be952530555aff37befc335f1f6312619  libnl-1.1-vlan-header.patch
cb9e0965c5a4a44c5d1e51254b453219660d47b843d5c4607c7b766804396949  libnl-1.1-glibc-2.8-ULONG_MAX.patch
f05d79e22cc05b19708f98584669859fe126183a3eafd664514f3931443d5443  fix-includes.patch"
sha512sums="add02849845bd0029968a9fb9a642133051196da17cf7b45eef192de1c09ad0b0ad7cc8424fa325f1c63262779d0abfd74e4ecb634abe66a4d2f394b3ad3e3de  libnl-1.1.tar.gz
7ef2b3a7fb79227644c897a8cd59d6fc1e94a37211ea59684fe11ec4e34fe95cdc8c3df72134128326c2db10cbada9641290994253a4a80875971d95a73a74c0  libnl-1.1-flags.patch
4e0023fd4f23dc9c4f85033c20dd7c5e731e74e8d9654f55fafe5019caee91faf60a3e290163008fc330c036d5deea316b9791873f4b4648d826efa6f11534c5  libnl-1.1-minor-leaks.patch
ea45d780b16e6045735aaf2e3febf19ddccab4ca0e03710aebfe51655adc50177aefa3bd4d06e0ccce0160f4c6db73cfa4eb7cebe53b3e15c1807c3b00dc1c9c  libnl-1.1-vlan-header.patch
acd5a5c986d722a1b2303dc229a894c3e7463199387e7f823cca5e1d464843475454e3fae713fe8cceeaaba2d0284ab0de8619e3f98999ac13b85da7c5f49055  libnl-1.1-glibc-2.8-ULONG_MAX.patch
79eac1d7e3e64bdd5c767912d4bf1af98bf68af402d789d632f5cab36b8bca9e8b44958cd185197592dc02acaa0f4e148f0af0b1a4f39ccff633f2ff1bd022a5  fix-includes.patch"

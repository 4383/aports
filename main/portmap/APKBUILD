# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=portmap
pkgver=6.0
pkgrel=2
pkgdesc="RPC connection manager"
url="http://neil.brown.name/portmap/"
license="GPL"
depends="uclibc"
makedepends=""
install="$pkgname.pre-install"
subpackages="$pkgname-doc"
source="http://neil.brown.name/$pkgname/$pkgname-$pkgver.tgz
	$pkgname-6.0-tcpd.patch
	$install
	$pkgname.confd
	$pkgname.initd"

build () 
{ 
	cd "$srcdir"/portmap_$pkgver
	for i in ../*.patch; do
		msg "Applying $i"
		patch -p1 < $i || return 1
	done

	make NO_TCP_WRAPPER=NO || return 1
	mkdir -p "$pkgdir"/sbin
	mkdir -p "$pkgdir"/usr/share/man/man8
	make BASEDIR="$pkgdir" install
	mkdir -p "$pkgdir"/etc/init.d "$pkgdir"/etc/conf.d
	install -m 755 "$startdir"/$pkgname.initd $pkgdir/etc/init.d/$pkgname
	install -m 644 "$startdir"/$pkgname.confd $pkgdir/etc/conf.d/$pkgname
}

md5sums="ac108ab68bf0f34477f8317791aaf1ff  portmap-6.0.tgz
bdcd217a0d459c75116d0b5aa90a372b  portmap-6.0-tcpd.patch
b726a64e91b47244a7539288338c6bbd  portmap.pre-install
56b0f47cda2003f3394ef7c37ec4cdff  portmap.confd
2944aa0387aba4ed6219d7856e5e8fb0  portmap.initd"

# Maintainer: Eivind Uggedal <eivind@uggedal.com>
pkgname=uglifyjs
_pkgname=uglify-js
pkgver=2.4.14
pkgrel=0
pkgdesc="JavaScript parser, compressor and beautifier"
url="http://lisperator.net/uglifyjs/"
arch="noarch"
license="BSD"
depends="nodejs nodejs-async nodejs-source-map nodejs-optimist
	nodejs-uglify-to-browserify"
depends_dev=""
makedepends="$depends_dev"
install=""
subpackages=""
source="https://registry.npmjs.org/$_pkgname/-/$_pkgname-$pkgver.tgz"

_builddir="$srcdir/package"
_moduledir=usr/lib/node_modules/$_pkgname

package() {
	# bin symlink
	# fix package.json
	# deps symlinks

	cd "$_builddir"

	mkdir -p "$pkgdir"/$_moduledir
	cp -pr package.json bin lib tools "$pkgdir"/$_moduledir

	mkdir -p "$pkgdir"/usr/bin
	ln -s ../../$_moduledir/bin/$pkgname "$pkgdir"/usr/bin/$pkgname
}

md5sums="b8cefa596c50199240cd5dc655834f90  uglify-js-2.4.14.tgz"
sha256sums="760d578e16df8d7a138b28281773d569247ffcd760a63a4745b843873f7b9df3  uglify-js-2.4.14.tgz"
sha512sums="c2a21a421a1364db20184c5abc3aa394f03963bf3e473b8b2bb460faa76d1d0905c8d600e1109c706a9d7e80dc8cf9b13a956b44cd122151efc8c468ce3526a1  uglify-js-2.4.14.tgz"

# Contributor: Andrew Wilcox <AWilcox@Wilcox-Tech.com>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=py-django
_pkgname=Django
pkgver=1.6.7
pkgrel=1
pkgdesc="A high-level Python Web framework"
url="http://djangoproject.com/"
arch="noarch"
license="BSD"
depends="python"
depends_dev=""
makedepends="python-dev"
install=""
subpackages=""
source="http://pypi.python.org/packages/source/${_pkgname:0:1}/$_pkgname/$_pkgname-$pkgver.tar.gz
	CVE-2015-8213.patch
"

prepare() {
	cd "$srcdir"/Django-$pkgver
	for i in $source; do
		case $i in
			*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
			esac
	done
}


_builddir="$srcdir"/$_pkgname-$pkgver
build() {
	cd "$_builddir"
	python setup.py build || return 1
}

package() {
	cd "$_builddir"
	python setup.py install --root "$pkgdir" || return 1
}
md5sums="f31e2f953feb258e3569e962790630b6  Django-1.6.7.tar.gz
ad2a4a3fa3694e11293085600d787093  CVE-2015-8213.patch"
sha256sums="9a64211c96a3262bb2545acc82af5d8f3da0175299f7c7e901e4ed455be965fb  Django-1.6.7.tar.gz
fe5e611b6b958eee50af2594588feb6c3e442d7b736c9bb87b47f78b588585aa  CVE-2015-8213.patch"
sha512sums="7806562853c1c2db1decc597ec62f1e91689a6a3668030ed8dc0a757e5bf1603f4be945cef277ce564d26665a39d5c4151060b7889822e66671345d973dd256d  Django-1.6.7.tar.gz
1c4e77e05492eff7dead5141e81bbfd049334d05e643a34d2e662df492bc38bce2e7ec55e3032193821f3ba9267809bc3d25f77c0ec8ee0b3ee20e046694a3a2  CVE-2015-8213.patch"

From 612b7578ccc8586f86620435ee1c2cdbc3ba1795 Mon Sep 17 00:00:00 2001
From: Leonardo Arena <rnalrd@alpinelinux.org>
Date: Fri, 28 Apr 2017 12:40:11 +0000
Subject: [PATCH] qtdemux: Increment current stts index whenever we finished
 one stts entry

---
 gst/isomp4/qtdemux.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/gst/isomp4/qtdemux.c b/gst/isomp4/qtdemux.c
index d2b78ed..ba40a09 100644
--- a/gst/isomp4/qtdemux.c
+++ b/gst/isomp4/qtdemux.c
@@ -8003,7 +8003,8 @@ done2:
           /* save values */
           stream->stts_time = stts_time;
           stream->stts_sample_index = j + 1;
-	  stream->stts_index++;
+	  if (stream->stts_sample_index >= stream->stts_samples)
+	    stream->stts_index++;
           goto done3;
         }
       }
-- 
2.11.1


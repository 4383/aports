# Contributor: Michael Mason <ms13sp@gmail.com>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=dansguardian
pkgver=2.10.1.1
pkgrel=0
pkgdesc="Web content filter"
url="http://dansguardian.org"
license="GPL"
depends=
makedepends="zlib-dev uclibc++-dev pcre-dev pkgconfig libiconv-dev"
install="$pkgname.pre-install $pkgname.post-install"
subpackages="$pkgname-doc"
source="http://dansguardian.org/downloads/2/Stable/$pkgname-$pkgver.tar.gz
	dansguardian.initd
	$install
	"

build() {
	cd "$srcdir/$pkgname-$pkgver"
	export CXX=g++-uc

	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--with-proxyuser=dansguar \
		--with-proxygroup=dansguar \
		--with-logdir=/var/log/dansguardian \
		--with-piddir=/var/run/ \
		--enable-ntlm
	make || return 1
	make DESTDIR="$pkgdir" install

	install -D -m 755 ../dansguardian.initd "$pkgdir"/etc/init.d/dansguardian
}

md5sums="0987a1c9bfbdf398118386f10279611a  dansguardian-2.10.1.1.tar.gz
0c04f74cd5db9fc7a8e80b407ec34214  dansguardian.initd
ab4e1104633aad0595a8b530fceb810a  dansguardian.pre-install
e3dcc0f51e44f15a2ff152ac338999d1  dansguardian.post-install"

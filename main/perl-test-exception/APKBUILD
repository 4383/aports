# Automatically generated by apkbuild-cpan, template 1
# Contributor: Natanael Copa <ncopa@alpinelinux.org>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=perl-test-exception
_pkgreal=Test-Exception
pkgver=0.35
pkgrel=0
pkgdesc="Perl - Test exception based code"
url="http://search.cpan.org/dist/Test-Exception/"
arch="noarch"
license="GPL PerlArtistic"
cpandepends="perl-sub-uplevel"
cpanmakedepends="   "
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/E/EX/EXODIST/$_pkgreal-$pkgver.tar.gz"

_builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	perl Build.PL installdirs=vendor || return 1
}

build() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	./Build && ./Build test
}

package() {
	cd "$_builddir"
	./Build install destdir="$pkgdir" || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="d774ff26e5fcd67d6364a990b61e62ca  Test-Exception-0.35.tar.gz"
sha256sums="a84b71dfba618d76c943e33322d0e2603ee4f9a7e4389870ad727396bf878d2a  Test-Exception-0.35.tar.gz"
sha512sums="429197a6bca77e86248bacd2b0e3a9fad340064eb9c443c1aecd305ed8f76d338c648b6001ee4a00f95e25b697ecd887541d5fa5acb04fe3bccee6c02fefa056  Test-Exception-0.35.tar.gz"

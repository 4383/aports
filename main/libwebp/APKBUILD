# Contributor: Kiyoshi Aman <kiyoshi.aman@gmail.com>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=libwebp
pkgver=0.3.1
pkgrel=0
pkgdesc="Libraries for working with WebP images"
url="http://code.google.com/speed/webp/index.html"
arch="all"
license="BSD"
depends=
depends_dev=
makedepends="libpng-dev libjpeg-turbo-dev tiff-dev automake autoconf libtool"
install=""
subpackages="$pkgname-dev $pkgname-doc"
source="http://webp.googlecode.com/files/libwebp-$pkgver.tar.gz"

_builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$_builddir"
	sh autogen.sh
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	rm "$pkgdir"/usr/lib/*.la || return 1
        mkdir -p "$pkgdir"/usr/share/doc/$pkgname
        install -Dm644 PATENTS README "$pkgdir"/usr/share/doc/$pkgname
}

md5sums="dc862bb4006d819b7587767a9e83d31f  libwebp-0.3.1.tar.gz"
sha256sums="b37932c625322a69fe4e9b88884b5c7aed2b3eaf9fd5e5b480aee339a92e6ee7  libwebp-0.3.1.tar.gz"
sha512sums="9b962ce8ce696eb1cc78de624abe0371f9143449cbc8978eb6327e40afe95b31c1b4c9aa97e9c3f4ada46c2f2b70d7b1ca59e46046ddbb3546ecb8e3e766922f  libwebp-0.3.1.tar.gz"

# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=serf
pkgver=1.3.2
pkgrel=1
pkgdesc="High-Performance Asynchronous HTTP Client Library"
url="http://code.google.com/p/serf"
arch="all"
license="ASL 2.0"
depends=""
depends_dev=""
makedepends="$depends_dev apr-util-dev apr-dev openssl-dev zlib-dev scons"
install=""
subpackages="$pkgname-dev"
source="https://serf.googlecode.com/files/serf-$pkgver.tar.bz2"

_builddir="$srcdir"/serf-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	scons PREFIX=/usr || return 1
}

package() {
	cd "$_builddir"
	install -d "${pkgdir}/usr"
	scons PREFIX="${pkgdir}/usr" install	
	rm -f "$pkgdir"/usr/lib/*.la
}

md5sums="43ce30fccf39ab0186a7590e2733e3ec  serf-1.3.2.tar.bz2"
sha256sums="e4e7da37d99f4fdf14a4c13a256330037536d4328a0e1ae3deb6f8531ed8200f  serf-1.3.2.tar.bz2"
sha512sums="4e9a117c08db172cfc159d43b7a1a5cd4d888e74cbc8b55af6c5e5dc70562d4a3e1d875093fa40c515c2e8e3e290f91238491ec260d7c67b6613b83ede47543e  serf-1.3.2.tar.bz2"

From 76e93e602f74e0fcf8cfc708fd93b4f71b74781e Mon Sep 17 00:00:00 2001
From: Natanael Copa <ncopa@alpinelinux.org>
Date: Tue, 4 Sep 2012 13:37:26 +0000
Subject: [PATCH 2/2] abuild: add provides information

---
 abuild.in | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/abuild.in b/abuild.in
index 3acec46..207cc66 100755
--- a/abuild.in
+++ b/abuild.in
@@ -919,8 +919,11 @@ trace_apk_deps() {
 		fi
 	done
 
-	[ -z "$autodeps" ] && return 0
 	echo "# automatically detected:" >> "$dir"/.PKGINFO
+	if [ -f "$dir"/.provides-so ]; then
+		sed 's/^/provides = /' "$dir"/.provides-so >> "$dir"/.PKGINFO
+	fi
+	[ -z "$autodeps" ] && return 0
 	for i in $autodeps; do
 		echo "depend = $i" >> "$dir"/.PKGINFO
 	done
-- 
1.7.12


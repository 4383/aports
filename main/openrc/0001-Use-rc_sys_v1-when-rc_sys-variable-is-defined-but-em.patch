From 9b7f57c47e1a5c73d22a0f5bff132c702e6f352b Mon Sep 17 00:00:00 2001
From: Natanael Copa <ncopa@alpinelinux.org>
Date: Thu, 3 Mar 2011 18:16:50 +0000
Subject: [PATCH] Use rc_sys_v1() when rc_sys variable is defined but empty.

This makes current vserver boot
---
 src/librc/librc.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/src/librc/librc.c b/src/librc/librc.c
index e134547..8292f6e 100644
--- a/src/librc/librc.c
+++ b/src/librc/librc.c
@@ -292,7 +292,8 @@ librc_hidden_def(rc_sys_v1)
 const char *
 rc_sys(void)
 {
-	if (rc_conf_value("rc_sys")) {
+	char *val = rc_conf_value("rc_sys");
+	if (val && *val) {
 		return rc_sys_v2();
 	} else {
 		return rc_sys_v1();
-- 
1.7.4.1


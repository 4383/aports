From e75406e7120271ebfecf2260b95040509dfcf168 Mon Sep 17 00:00:00 2001
From: Arthur Schiwon <blizzz@owncloud.com>
Date: Wed, 3 Apr 2013 13:04:38 +0200
Subject: [PATCH] PostreSQL compatibility, fixes #2666

---
 lib/files/cache/legacy.php | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/files/cache/legacy.php b/lib/files/cache/legacy.php
index f114cf0..9556a26 100644
--- a/lib/files/cache/legacy.php
+++ b/lib/files/cache/legacy.php
@@ -97,7 +97,7 @@ function getEtag($path) {
 			$relativePath = '';
 		}
 		if(is_null($query)){
-			$query = \OC_DB::prepare('SELECT `propertyvalue` FROM `*PREFIX*properties` WHERE `userid` = ? AND propertypath = ? AND propertyname = "{DAV:}getetag"');
+			$query = \OC_DB::prepare('SELECT `propertyvalue` FROM `*PREFIX*properties` WHERE `userid` = ? AND `propertypath` = ? AND `propertyname` = \'{DAV:}getetag\'');
 		}
 		$result = $query->execute(array($user, '/' . $relativePath));
 		if ($row = $result->fetchRow()) {
-- 
1.8.1.5


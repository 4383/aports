# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
_name=gmp
pkgname=${_name}5

pkgver=5.0.1
pkgrel=1
pkgdesc="A free library for arbitrary precision arithmetic"
url="http://gmplib.org/"
license="LGPL3"
makedepends="m4 texinfo"
depends=
subpackages="$pkgname-doc gmp-dev"
source="ftp://ftp.gnu.org/gnu/gmp/gmp-$pkgver.tar.bz2
	gmp-4.1.4-noexecstack.patch
	"

_builddir="$srcdir"/$_name-$pkgver
build() {
	cd "$_builddir"
	patch -p1 < "$srcdir"/gmp-4.1.4-noexecstack.patch || return 1

	ABI="32" ./configure --prefix=/usr \
		--build=${CHOST} \
		--infodir=/usr/share/info \
		--mandir=/usr/share/man \
		--localstatedir=/var/state/gmp \
		--disable-mpfr \
		--disable-mpbsd \
		--disable-cxx  \
		--with-pic \
		|| return 1

	make || return 1
}

package() {
	cd "$_builddir"
	make -j1 DESTDIR="${pkgdir}" install || return 1
}

dev() {
	replaces="gmp gmp5-dev"
	default_dev
}

md5sums="6bac6df75c192a13419dfd71d19240a7  gmp-5.0.1.tar.bz2
13c34f00e77ded6673270cfea06c35c3  gmp-4.1.4-noexecstack.patch"

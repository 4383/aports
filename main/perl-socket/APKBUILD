# Automatically generated by apkbuild-cpan, template 1
# Contributor: 
# Maintainer: 
pkgname=perl-socket
_pkgreal=Socket
pkgver=2.019
pkgrel=0
pkgdesc="networking constants and support functions"
url="http://search.cpan.org/dist/Socket/"
arch="all"
license="GPL PerlArtistic"
cpandepends=""
cpanmakedepends="   "
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/P/PE/PEVANS/$_pkgreal-$pkgver.tar.gz"

_builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	#FIXME: fail 
	make #&& make test
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="8afec24ac4e084e0da0600c2018ccead  Socket-2.019.tar.gz"
sha256sums="0a5188686e6b71ef3464a0d74f18bda62912b8e35aeb714483ab5f0b157a7b5e  Socket-2.019.tar.gz"
sha512sums="2b440bd1fd5cca8b6b3c9817135d165e217abdce1fa8e197744bf56c266e9287dcacfc741425b32fa1da30d58a533e5cb2687398d12115586d4d98bbc4eff1d3  Socket-2.019.tar.gz"

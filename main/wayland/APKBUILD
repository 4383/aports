# Maintainer:
# Contributor: Bart≈Çomiej Piotrowski <bpiotrowski@alpinelinux.org>

pkgname=wayland
pkgver=1.6.0
pkgrel=0
pkgdesc='A computer display server protocol'
arch=all
url='http://wayland.freedesktop.org'
license='MIT'
depends=
makedepends='doxygen libffi-dev expat-dev'
subpackages="$pkgname-dev $pkgname-doc"
source="http://wayland.freedesktop.org/releases/$pkgname-$pkgver.tar.xz"

_builddir="$srcdir"/$pkgname-$pkgver
build() {
	cd "$_builddir"

	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--disable-static || return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	install -Dm644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
	find "$pkgdir" -name \*.la -delete || return 1
}

md5sums="d34c141c975084e4fb668e77b38f840e  wayland-1.6.0.tar.xz"
sha256sums="a7d5102dcf53d08c059d24bc62de491d7cd482070abeb6737a20d0d86ba6fc7f  wayland-1.6.0.tar.xz"
sha512sums="11fc8cb90f00a07b9952c073f1d18bf53284a46b4cc3aa5c71ed33cf509fca0cdf45afbdb852461a7fae236424b1be0e5314a2bbde8a59de2ab81246960da055  wayland-1.6.0.tar.xz"

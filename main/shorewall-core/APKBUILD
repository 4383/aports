# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=shorewall-core
pkgver=4.6.3.1

_ver=$pkgver
case $pkgver in
*.*.*.*) _ver=${pkgver%.*};;
esac

pkgrel=0
pkgdesc="Core libraries for Shorewall"
url="http://www.shorewall.net/"
arch="noarch"
license="GPL-2"
depends=""
# coreutils for install -T
makedepends="coreutils bash"
replaces=""
subpackages=""
source="http://www1.shorewall.net/pub/shorewall/${_ver%.*}/shorewall-$_ver/shorewall-core-$pkgver.tar.bz2
	shorewallrc.alpine
	"

_builddir="$srcdir/$pkgname-$pkgver"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
	cp "$srcdir"/shorewallrc.alpine .
}

build() {
	cd "$_builddir"
	./configure || return 1
}

package() {
	cd "$_builddir"
	DESTDIR="$pkgdir" ./install.sh shorewallrc.alpine || return 1
}

md5sums="6bc3bf44b1d6f1a6615b7052968324f3  shorewall-core-4.6.3.1.tar.bz2
422c5d36fcee177acba58756b0fec7e2  shorewallrc.alpine"
sha256sums="abec8495d0631f294f271cd3a1b108c52b94b3deeee9297a6b485a4ec4872702  shorewall-core-4.6.3.1.tar.bz2
99f588523594b5a8062b2f43ab9f59daf91f12634b178f30dd7cb61786bd8220  shorewallrc.alpine"
sha512sums="1bc9b1be741fabe6b4df3bf57e1447a7b6a81c070ddcda2eb8978e04799e551887e7ff05fdbe3c13ed7b8968b6629ba2b0152d7f58e71951a3ea1e4c3bc5200e  shorewall-core-4.6.3.1.tar.bz2
c076ae42e7b404cecf521fdc32f92ba3a6b77d61579726abde2f00b6b6282e55b0b334b9fe5e43a6e4ae56361cce3214d9a38099f9f8714f03ae4fb888c744b7  shorewallrc.alpine"

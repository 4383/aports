From bd784acbbf0ea501d2b63be2c6f7fe0cfa179886 Mon Sep 17 00:00:00 2001
From: Carlo Landmeter <clandmeter@gmail.com>
Date: Mon, 17 Feb 2014 14:00:08 +0000
Subject: [PATCH] fallback from udev to mdev

---
 src/lxc/lxc-create.in | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/src/lxc/lxc-create.in b/src/lxc/lxc-create.in
index ebbdd7b..44ac8e6 100644
--- a/src/lxc/lxc-create.in
+++ b/src/lxc/lxc-create.in
@@ -330,7 +330,11 @@ fi
 if [ "$backingstore" = "lvm" ]; then
     [ -d "$rootfs" ] || mkdir $rootfs
     lvcreate -L $fssize -n $lvname $vgname || exit 1
-    udevadm settle
+    if [ -x /sbin/udevadm ]; then 
+        udevadm settle 
+    else
+        mdev -s
+    fi
     mkfs -t $fstype $rootdev || exit 1
     mount -t $fstype $rootdev $rootfs
 fi
-- 
1.8.5.4


# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=haserl
pkgver=0.9.30
pkgrel=0
pkgdesc="Html And Shell Embedded Report Language"
url="http://haserl.sourceforge.net/"
arch="all"
license="GPL-2"
depends=
makedepends="lua-dev automake autoconf"
subpackages="$pkgname-doc"
source="http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz
	"

_builddir="$srcdir/$pkgname-$pkgver"
prepare() {
	cd "$_builddir"
	sed -i -e 's/^        /\t/' src/Makefile.am || return 1
	rm -f src/haserl_lualib.inc

	aclocal && autoconf && automake --add-missing || return 1
}

build() {
	cd "$_builddir"
	./configure --prefix=/usr \
		--with-lua || return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir/" install
	chmod 4111 "$pkgdir"/usr/bin/haserl
}

md5sums="e25f1a13f7cfe5993e961803446cd718  haserl-0.9.30.tar.gz"
sha256sums="01f9f942c58beb8eb6acd7fdbc5fa32e9156a9b8630992def7eb5a48c5f04b50  haserl-0.9.30.tar.gz"
sha512sums="33b478c5cb5a53e8e696b9db36aaabe5961da3fa9d6199eb198d780ca9de9c1c9588f594a2ffd4ba0dd56c5ed6a1494ef4f67ae73f31bfa24cd6629b53dee806  haserl-0.9.30.tar.gz"

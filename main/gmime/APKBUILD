# Contributor: William Pitcock <nenolod@dereferenced.org>
# Maintainer: William Pitcock <nenolod@dereferenced.org>
pkgname=gmime
pkgver=2.6.16
pkgrel=0
pkgdesc="glib mime library"
url="http://spruce.sourceforge.net/gmime/"
arch="all"
license="LGPL"
depends=
depends_dev="glib-dev gpgme-dev"
makedepends="$depends_dev intltool"
install=""
subpackages="$pkgname-dev $pkgname-doc"
source="http://ftp.acc.umu.se/pub/GNOME/sources/gmime/${pkgver%.*}/gmime-$pkgver.tar.xz"

_builddir="${srcdir}/${pkgname}-${pkgver}"
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	cd "$_builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		|| return 1
	make || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	rm "$pkgdir"/usr/lib/*.la || return 1
}

md5sums="05c365dd1c4fd3617ec9c68f134075f1  gmime-2.6.16.tar.xz"
sha256sums="1093c2c9b4644d53b9c2df30042b3c4c2e9141d3e65e299030d227485d95c8af  gmime-2.6.16.tar.xz"
sha512sums="2fc585a0c4a6bd87f2d0ab785223e34e0ec4f144d151a182758991d125d2906e3c7bc19371c1657d562882b0a942cbe49002908ca505a484ccfa6657c7ac7222  gmime-2.6.16.tar.xz"

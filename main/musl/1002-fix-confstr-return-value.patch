From edb7cd561b8df14eac5ce6a62acd1c4f9f12bb03 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Timo=20Ter=C3=A4s?= <timo.teras@iki.fi>
Date: Wed, 19 Feb 2014 09:40:35 +0200
Subject: [PATCH] fix confstr return value

man page says the terminating null byte is counted.
---
 src/conf/confstr.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/conf/confstr.c b/src/conf/confstr.c
index 4332f72..6e9c23a 100644
--- a/src/conf/confstr.c
+++ b/src/conf/confstr.c
@@ -13,5 +13,5 @@ size_t confstr(int name, char *buf, size_t len)
 	}
 	// snprintf is overkill but avoid wasting code size to implement
 	// this completely useless function and its truncation semantics
-	return snprintf(buf, len, "%s", s);
+	return snprintf(buf, len, "%s", s) + 1;
 }
-- 
1.8.5.4

